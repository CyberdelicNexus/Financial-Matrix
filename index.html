<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyberdelic Nexus | Financial Matrix</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&family=Space+Grotesk:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a25;
            --bg-card: #16161f;
            --border: #2a2a3a;
            --border-subtle: #1f1f2a;
            --text-primary: #f0f0f5;
            --text-secondary: #a0a0b0;
            --text-muted: #606070;
            --accent-cyan: #00d4ff;
            --accent-purple: #a855f7;
            --accent-pink: #ec4899;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --accent-blue: #3b82f6;
            --gradient-cyber: linear-gradient(135deg, #00d4ff 0%, #a855f7 50%, #ec4899 100%);
            --gradient-card: linear-gradient(180deg, rgba(168, 85, 247, 0.05) 0%, transparent 100%);
            --shadow-glow: 0 0 40px rgba(0, 212, 255, 0.15);
            --shadow-purple: 0 0 40px rgba(168, 85, 247, 0.15);
        }

        [data-theme="light"] {
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f1f3f5;
            --bg-card: #ffffff;
            --border: #dee2e6;
            --border-subtle: #e9ecef;
            --text-primary: #212529;
            --text-secondary: #495057;
            --text-muted: #6c757d;
            --accent-cyan: #0891b2;
            --accent-purple: #9333ea;
            --accent-pink: #db2777;
            --accent-green: #059669;
            --accent-orange: #ea580c;
            --accent-red: #dc2626;
            --accent-blue: #2563eb;
            --gradient-cyber: linear-gradient(135deg, #0891b2 0%, #9333ea 50%, #db2777 100%);
            --gradient-card: linear-gradient(180deg, rgba(147, 51, 234, 0.05) 0%, transparent 100%);
            --shadow-glow: 0 0 40px rgba(8, 145, 178, 0.1);
            --shadow-purple: 0 0 40px rgba(147, 51, 234, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated background */
        .bg-grid {
            position: fixed;
            inset: 0;
            background-image:
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 0;
        }

        .bg-gradient {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 30%, rgba(168, 85, 247, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(0, 212, 255, 0.08) 0%, transparent 50%);
            animation: bgPulse 20s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes bgPulse {

            0%,
            100% {
                transform: translate(0, 0) rotate(0deg);
            }

            50% {
                transform: translate(-5%, -5%) rotate(5deg);
            }
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-cyber);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
        }

        .logo-text {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-cyber);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-subtitle {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.15em;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 0.25rem;
            background: var(--bg-tertiary);
            padding: 0.25rem;
            border-radius: 12px;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 0.6rem 1rem;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.8rem;
            font-weight: 500;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .nav-tab:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-tab.active {
            background: var(--gradient-cyber);
            color: var(--bg-primary);
        }

        /* Main Content */
        .main {
            position: relative;
            z-index: 1;
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: visible;
            /* Allow tooltips to overflow */
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-cyber);
            opacity: 0.5;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-title-icon {
            width: 32px;
            height: 32px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        /* Grid Layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
        }

        @media (max-width: 1200px) {
            .grid-4 {
                grid-template-columns: repeat(2, 1fr);
            }

            .grid-3 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {

            .grid-4,
            .grid-3,
            .grid-2 {
                grid-template-columns: 1fr;
            }

            .header-content {
                flex-direction: column;
            }

            .nav-tabs {
                justify-content: center;
            }
        }

        /* Metric Cards */
        .metric-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            position: relative;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            border-color: var(--accent-cyan);
            box-shadow: var(--shadow-glow);
            transform: translateY(-2px);
        }

        .metric-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .metric-value.cyan {
            color: var(--accent-cyan);
        }

        .metric-value.purple {
            color: var(--accent-purple);
        }

        .metric-value.green {
            color: var(--accent-green);
        }

        .metric-value.orange {
            color: var(--accent-orange);
        }

        .metric-value.pink {
            color: var(--accent-pink);
        }

        .metric-value.blue {
            color: var(--accent-blue);
        }

        .metric-change {
            font-size: 0.75rem;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .metric-change.positive {
            color: var(--accent-green);
        }

        .metric-change.negative {
            color: var(--accent-red);
        }

        /* Input Groups */
        .input-group {
            margin-bottom: 1rem;
            overflow: visible;
            /* Allow tooltips to overflow */
        }

        .input-label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .input-field {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        }

        .input-field::placeholder {
            color: var(--text-muted);
        }

        .dual-input {
            display: flex;
            gap: 0.5rem;
        }

        .dual-input .input-field {
            flex: 1;
        }

        .dual-input .input-field.price {
            flex: 0 0 80px;
            text-align: center;
        }

        .input-hint {
            font-size: 0.65rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        /* Course list styling */
        .course-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .course-item {
            display: grid;
            grid-template-columns: 1fr 80px 80px 32px;
            gap: 0.5rem;
            align-items: center;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
        }

        .course-item .input-field {
            margin: 0;
            padding: 0.5rem 0.75rem;
            font-size: 0.8rem;
        }

        .btn-icon {
            width: 32px;
            height: 32px;
            border: none;
            background: rgba(239, 68, 68, 0.15);
            color: var(--accent-red);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .btn-icon:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        .btn-icon.add {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .btn-icon.add:hover {
            background: rgba(16, 185, 129, 0.3);
        }

        .course-header {
            display: grid;
            grid-template-columns: 1fr 80px 80px 32px;
            gap: 0.5rem;
            padding: 0 0.75rem;
            margin-bottom: 0.5rem;
        }

        .course-header span {
            font-size: 0.65rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .add-course-row {
            display: flex;
            justify-content: flex-end;
            margin-top: 0.5rem;
        }

        /* Range Slider */
        .range-container {
            margin-bottom: 1rem;
        }

        .range-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .range-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .range-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            color: var(--accent-cyan);
        }

        .range-slider {
            width: 100%;
            height: 6px;
            background: var(--bg-secondary);
            border-radius: 3px;
            appearance: none;
            cursor: pointer;
        }

        .range-slider::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            background: var(--gradient-cyber);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .range-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            text-align: left;
            padding: 0.75rem 1rem;
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border);
        }

        .data-table td {
            padding: 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            border-bottom: 1px solid var(--border);
        }

        .data-table tr:hover {
            background: rgba(0, 212, 255, 0.03);
        }

        .data-table .highlight {
            color: var(--accent-cyan);
            font-weight: 500;
        }

        /* Fix column widths for revenue projections table */
        .data-table {
            table-layout: fixed;
            width: 100%;
        }

        .data-table th:first-child,
        .data-table td:first-child {
            width: 35%;
            text-align: left;
        }

        .data-table th:nth-child(2),
        .data-table td:nth-child(2) {
            width: 21.66%;
            text-align: right;
            padding-right: 1.5rem;
        }

        .data-table th:nth-child(3),
        .data-table td:nth-child(3) {
            width: 21.66%;
            text-align: right;
            padding-right: 1.5rem;
        }

        .data-table th:nth-child(4),
        .data-table td:nth-child(4) {
            width: 21.66%;
            text-align: right;
            padding-right: 1.5rem;
        }

        /* Specific styling for revenue projections table */
        .revenue-projections-table {
            table-layout: fixed !important;
        }

        .revenue-projections-table th:first-child,
        .revenue-projections-table td:first-child {
            width: 30% !important;
            text-align: left !important;
        }

        .revenue-projections-table th:nth-child(2),
        .revenue-projections-table td:nth-child(2) {
            width: 23.33% !important;
            text-align: center !important;
        }

        .revenue-projections-table th:nth-child(3),
        .revenue-projections-table td:nth-child(3) {
            width: 23.33% !important;
            text-align: center !important;
        }

        .revenue-projections-table th:nth-child(4),
        .revenue-projections-table td:nth-child(4) {
            width: 23.33% !important;
            text-align: center !important;
        }

        /* Ensure editable revenue cells align properly */
        .revenue-projections-table .editable-revenue {
            display: inline-block;
            min-width: 80px;
            text-align: center;
        }

        /* Unit economics table specific styling */
        .unit-economics-table {
            table-layout: fixed !important;
        }

        .unit-economics-table th:nth-child(1),
        .unit-economics-table td:nth-child(1) {
            width: 20%;
            text-align: left;
        }

        .unit-economics-table th:nth-child(2),
        .unit-economics-table td:nth-child(2),
        .unit-economics-table th:nth-child(3),
        .unit-economics-table td:nth-child(3) {
            width: 15%;
            text-align: right;
        }

        .unit-economics-table th:nth-child(4),
        .unit-economics-table td:nth-child(4),
        .unit-economics-table th:nth-child(5),
        .unit-economics-table td:nth-child(5) {
            width: 15%;
            text-align: center;
        }

        .unit-economics-table th:nth-child(6),
        .unit-economics-table td:nth-child(6) {
            width: 20%;
            text-align: center;
        }

        /* Scenario Pills */
        .scenario-pills {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .scenario-pill {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.8rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .scenario-pill:hover {
            border-color: var(--accent-purple);
            color: var(--text-primary);
        }

        .scenario-pill.active {
            background: var(--accent-purple);
            border-color: var(--accent-purple);
            color: white;
        }

        /* Progress Bar */
        .progress-bar {
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-cyber);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Comparison Cards */
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .comparison-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .comparison-card.safe {
            border-color: var(--accent-cyan);
        }

        .comparison-card.equity {
            border-color: var(--accent-purple);
        }

        .comparison-header {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .comparison-card.safe .comparison-header {
            color: var(--accent-cyan);
        }

        .comparison-card.equity .comparison-header {
            color: var(--accent-purple);
        }

        .comparison-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border);
        }

        .comparison-item:last-child {
            border-bottom: none;
        }

        .comparison-label {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .comparison-value {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
        }

        /* Branch Cards */
        .branch-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .branch-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-glow);
        }

        .branch-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .branch-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .branch-icon.society {
            background: linear-gradient(135deg, #00d4ff33, #00d4ff11);
        }

        .branch-icon.labs {
            background: linear-gradient(135deg, #a855f733, #a855f711);
        }

        .branch-icon.academy {
            background: linear-gradient(135deg, #10b98133, #10b98111);
        }

        .branch-icon.dojos {
            background: linear-gradient(135deg, #f59e0b33, #f59e0b11);
        }

        .branch-name {
            font-size: 1rem;
            font-weight: 600;
        }

        .branch-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .branch-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .branch-metric {
            text-align: center;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .branch-metric-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .branch-metric-label {
            font-size: 0.65rem;
            color: var(--text-muted);
            text-transform: uppercase;
            margin-top: 0.25rem;
        }

        /* Charts */
        .chart-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            min-height: 300px;
            display: flex;
            flex-direction: column;
        }

        .chart-title {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .chart-bars {
            flex: 1;
            display: flex;
            align-items: flex-end;
            gap: 1rem;
            padding: 1rem 0;
        }

        .chart-bar-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .chart-bar {
            width: 100%;
            max-width: 60px;
            background: var(--gradient-cyber);
            border-radius: 4px 4px 0 0;
            transition: height 0.5s ease;
        }

        .chart-bar-label {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        /* Status Badge */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 500;
            text-transform: uppercase;
        }

        .status-badge.success {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .status-badge.warning {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-orange);
        }

        .status-badge.danger {
            background: rgba(239, 68, 68, 0.15);
            color: var(--accent-red);
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: var(--gradient-cyber);
            color: var(--bg-primary);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            border-color: var(--accent-cyan);
        }

        /* Section Headers */
        .section-header {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .section-subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Divider */
        .divider {
            height: 1px;
            background: var(--border);
            margin: 2rem 0;
        }

        /* ==========================================
           TOOLTIP & HELP ICON SYSTEM
           ========================================== */

        .tooltip-container {
            position: relative;
            display: inline-flex;
            align-items: center;
        }

        .help-icon {
            display: inline-flex;
            width: 18px;
            height: 18px;
            background: var(--accent-cyan);
            color: var(--bg-card);
            border-radius: 50%;
            cursor: help;
            font-size: 11px;
            font-weight: 700;
            align-items: center;
            justify-content: center;
            margin-left: 6px;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        .help-icon:hover {
            background: var(--accent-purple);
            transform: scale(1.1);
        }

        .help-icon-inline {
            display: inline-flex;
            width: 16px;
            height: 16px;
            background: var(--accent-cyan);
            color: var(--bg-card);
            border-radius: 50%;
            cursor: help;
            font-size: 10px;
            font-weight: 700;
            align-items: center;
            justify-content: center;
            margin-left: 4px;
            vertical-align: middle;
        }

        .tooltip {
            position: fixed;
            /* Use fixed for reliable positioning above all content */
            background: var(--bg-card);
            border: 1px solid var(--accent-cyan);
            border-radius: 8px;
            padding: 0.75rem;
            min-width: 200px;
            max-width: 320px;
            box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
            z-index: 10000;
            /* Ensure tooltips appear above everything */
            display: none;
            font-size: 0.875rem;
            line-height: 1.5;
            color: var(--text-primary);
            pointer-events: none;
            /* Allow clicking through inactive tooltips */
        }

        .tooltip.active {
            display: block;
            pointer-events: auto;
            /* Re-enable interaction for active tooltips */
        }

        .tooltip.top {
            bottom: calc(100% + 8px);
        }

        .tooltip.bottom {
            top: calc(100% + 8px);
        }

        .tooltip::before {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--bg-card);
            border: 1px solid var(--accent-cyan);
            transform: rotate(45deg);
            left: 50%;
            margin-left: -4px;
        }

        .tooltip.top::before {
            bottom: -5px;
            border-top: none;
            border-left: none;
        }

        .tooltip.bottom::before {
            top: -5px;
            border-bottom: none;
            border-right: none;
        }

        /* Warning and Info Banners */
        .warning-banner {
            padding: 0.75rem 1rem;
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--accent-orange);
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.875rem;
            color: var(--text-primary);
        }

        .alert {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            margin: 0.5rem 0;
            font-size: 0.875rem;
        }

        .alert-critical {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid var(--accent-red);
            color: var(--text-primary);
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--accent-orange);
            color: var(--text-primary);
        }

        .alert-info {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid var(--accent-blue);
            color: var(--text-primary);
        }

        .info-callout {
            padding: 1rem;
            background: rgba(0, 212, 255, 0.05);
            border: 1px solid var(--accent-cyan);
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .benchmark-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--accent-green);
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.875rem;
        }

        /* Summary Row */
        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(0, 212, 255, 0.05);
            border: 1px solid var(--accent-cyan);
            border-radius: 8px;
            margin-top: 1rem;
        }

        .summary-label {
            font-weight: 600;
        }

        .summary-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.25rem;
            color: var(--accent-cyan);
        }

        /* ==========================================
           BUSINESS PLAN SECTION STYLES
           ========================================== */

        .hero-section {
            text-align: center;
            padding: 3rem 2rem;
            background: linear-gradient(180deg, rgba(168, 85, 247, 0.1) 0%, transparent 100%);
            border-radius: 20px;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-cyber);
        }

        .hero-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--gradient-cyber);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .hero-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            padding-left: 0;
            padding-right: 0;
            line-height: 1.6;
            text-align: center;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            flex-wrap: wrap;
        }

        .hero-stat {
            text-align: center;
        }

        .hero-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-cyan);
        }

        .hero-stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Vision Cards */
        .vision-card {
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        .vision-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient-cyber);
        }

        .vision-card h3 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: var(--accent-cyan);
        }

        .vision-card p {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, var(--accent-cyan), var(--accent-purple), var(--accent-pink));
        }

        .timeline-item {
            position: relative;
            padding-bottom: 2rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2rem;
            top: 0.25rem;
            width: 12px;
            height: 12px;
            background: var(--accent-cyan);
            border-radius: 50%;
            transform: translateX(-5px);
        }

        .timeline-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .timeline-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-align: left !important;
        }

        /* Feature Grid */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .feature-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            border-color: var(--accent-purple);
            box-shadow: var(--shadow-purple);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-cyber);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .feature-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* Market Size Bars */
        .market-bar {
            margin-bottom: 1.5rem;
        }

        .market-bar-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .market-bar-label {
            font-weight: 500;
        }

        .market-bar-value {
            font-family: 'JetBrains Mono', monospace;
            color: var(--accent-cyan);
        }

        .market-bar-track {
            height: 24px;
            background: var(--bg-secondary);
            border-radius: 12px;
            overflow: hidden;
        }

        .market-bar-fill {
            height: 100%;
            background: var(--gradient-cyber);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--bg-primary);
        }

        /* ==========================================
           ELEVATOR PITCH STYLES
           ========================================== */

        .pitch-hero {
            text-align: center;
            padding: 4rem 2rem;
            background: radial-gradient(ellipse at center, rgba(168, 85, 247, 0.15) 0%, transparent 70%);
            border-radius: 24px;
            margin-bottom: 2rem;
        }

        .pitch-tagline {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            padding-left: 0;
            padding-right: 0;
            line-height: 1.3;
            text-align: center;
        }

        .pitch-tagline span {
            background: var(--gradient-cyber);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .pitch-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .pitch-section h3 {
            font-size: 1rem;
            color: var(--accent-cyan);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .pitch-section p,
        .pitch-section ul {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .pitch-section ul {
            list-style: none;
            padding: 0;
        }

        .pitch-section li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .pitch-section li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 1rem;
            width: 8px;
            height: 8px;
            background: var(--gradient-cyber);
            border-radius: 50%;
        }

        .ask-box {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%);
            border: 2px solid var(--accent-cyan);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
        }

        .ask-amount {
            font-family: 'JetBrains Mono', monospace;
            font-size: 3rem;
            font-weight: 700;
            background: var(--gradient-cyber);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .ask-label {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* ==========================================
           ONE-PAGER STYLES
           ========================================== */

        .onepager-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem;
            background: var(--bg-card);
            border-radius: 16px;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .onepager-logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .onepager-logo-icon {
            width: 56px;
            height: 56px;
            background: var(--gradient-cyber);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .onepager-company {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.75rem;
            font-weight: 700;
        }

        .onepager-tagline {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .onepager-contact {
            text-align: right;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .onepager-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        @media (max-width: 900px) {
            .onepager-grid {
                grid-template-columns: 1fr;
            }
        }

        .onepager-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .onepager-section h4 {
            font-size: 0.75rem;
            color: var(--accent-cyan);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .onepager-section p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .onepager-list {
            list-style: none;
            padding: 0;
        }

        .onepager-list li {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.9rem;
        }

        .onepager-list li:last-child {
            border-bottom: none;
        }

        .onepager-list .label {
            color: var(--text-secondary);
        }

        .onepager-list .value {
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Team Section */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .team-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
        }

        .team-avatar {
            width: 64px;
            height: 64px;
            background: var(--gradient-cyber);
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .team-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .team-role {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Use of Funds */
        .funds-chart {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .funds-item {
            flex: 1;
            text-align: center;
        }

        .funds-bar {
            height: 120px;
            background: var(--bg-secondary);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .funds-fill {
            background: var(--gradient-cyber);
            border-radius: 8px 8px 0 0;
            transition: height 0.5s ease;
        }

        .funds-label {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .funds-percent {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--accent-cyan);
        }

        /* Phase 5: Enhanced One-Pager Styles */

        /* Intro and action buttons */
        .onepager-intro {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
            padding: 1rem;
            background: rgba(0, 212, 255, 0.05);
            border: 1px solid var(--accent-cyan);
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .intro-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .intro-text {
            font-size: 0.875rem;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .onepager-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .btn-secondary {
            padding: 0.75rem 1.5rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
        }

        .btn-secondary:hover {
            background: var(--accent-cyan);
            color: var(--bg-card);
            border-color: var(--accent-cyan);
            transform: translateY(-2px);
        }

        /* Problem/Solution Section Styles */
        .stat-highlight {
            font-size: 2rem;
            font-weight: 700;
            background: var(--gradient-cyber);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0.5rem 0;
        }

        .problem-list {
            list-style: none;
            padding: 0;
            margin: 1rem 0;
        }

        .problem-list li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-secondary);
        }

        .problem-list li::before {
            content: "â–¸";
            position: absolute;
            left: 0;
            color: var(--accent-red);
        }

        .why-now-box {
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--accent-orange);
            border-radius: 8px;
        }

        .value-props {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .value-prop {
            display: flex;
            gap: 0.75rem;
            align-items: flex-start;
        }

        /* FIX 7: Our Solution 4-Column Grid */
        .solution-intro {
            margin-bottom: 1.5rem;
        }

        .solution-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        @media (max-width: 1024px) {
            .solution-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 640px) {
            .solution-grid {
                grid-template-columns: 1fr;
            }
        }

        .solution-column {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: text;
            transition: all 0.2s ease;
        }

        .solution-column:hover {
            background: rgba(0, 212, 255, 0.05);
            border-color: var(--accent-cyan);
        }

        .solution-icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
        }

        .solution-title {
            font-weight: 600;
            font-size: 1.125rem;
            color: var(--accent-cyan);
            margin-bottom: 0.5rem;
        }

        .solution-desc {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .prop-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .prop-content strong {
            display: block;
            color: var(--accent-cyan);
            margin-bottom: 0.25rem;
        }

        .prop-content {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Market Size Funnel */
        .market-funnel {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .market-tier {
            padding: 1rem;
            border-radius: 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
        }

        .tier-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .tier-label {
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--accent-cyan);
        }

        .tier-value {
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-cyber);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tier-description {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .tier-definition {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin: 0.25rem 0;
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-primary);
            border-radius: 4px;
            margin-top: 0.75rem;
            overflow: hidden;
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: var(--progress);
            background: var(--gradient-cyber);
            transition: width 1s ease;
        }

        .market-growth {
            margin-top: 1rem;
        }

        .cagr-display {
            text-align: center;
            padding: 1rem;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 12px;
        }

        .cagr-label {
            display: block;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .cagr-value {
            display: block;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-green);
        }

        .growth-note {
            text-align: center;
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .growth-arc {
            width: 100px;
            height: 50px;
            margin: 0.5rem auto 0;
        }

        /* Revenue Chart */
        .revenue-chart-container {
            margin: 1rem 0;
            background: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 12px;
        }

        #onepager-revenue-chart {
            width: 100%;
            height: auto;
            min-height: 250px;
            display: block;
        }

        .revenue-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .stat-card {
            padding: 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            text-align: center;
        }

        .stat-card.highlight {
            background: rgba(0, 212, 255, 0.1);
            border-color: var(--accent-cyan);
        }

        .stat-label {
            display: block;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .stat-value {
            display: block;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--accent-cyan);
            font-family: 'JetBrains Mono', monospace;
        }

        .assumptions-box {
            margin-top: 1rem;
            padding: 0.75rem 1rem;
            background: rgba(168, 85, 247, 0.1);
            border-left: 3px solid var(--accent-purple);
            border-radius: 8px;
            font-size: 0.875rem;
        }

        .assumptions-list {
            margin-top: 0.5rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Business Model Grid */
        .revenue-streams-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .stream-card {
            padding: 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            text-align: center;
        }

        .stream-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .stream-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .stream-price {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--accent-cyan);
            margin-bottom: 0.75rem;
        }

        .unit-economics {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .ue-metric {
            font-size: 0.8rem;
        }

        .ue-highlight {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--accent-green);
            margin-top: 0.25rem;
        }

        .economics-summary {
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 8px;
            text-align: center;
        }

        .summary-stat {
            margin-bottom: 0.5rem;
        }

        .summary-label {
            display: block;
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .summary-value {
            display: block;
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--accent-green);
        }

        .summary-note {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .why-model-works {
            margin-top: 1rem;
            font-size: 0.875rem;
        }

        .why-model-works ul {
            margin-top: 0.5rem;
            padding-left: 1.5rem;
            color: var(--text-secondary);
        }

        .why-model-works li {
            margin: 0.25rem 0;
        }

        /* Timeline Styles */
        .timeline-container {
            display: flex;
            align-items: flex-start;
            padding: 2rem 1rem;
            overflow-x: auto;
        }

        .timeline-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 180px;
            flex: 1;
        }

        .timeline-marker {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
            margin-bottom: 1rem;
            position: relative;
        }

        .timeline-marker.achieved {
            background: var(--accent-green);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
        }

        .timeline-marker.current {
            background: var(--accent-cyan);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.4);
            animation: pulse 2s infinite;
        }

        .timeline-marker.future {
            background: var(--bg-tertiary);
            border: 2px solid var(--border);
        }

        .timeline-marker.milestone {
            background: var(--gradient-cyber);
            box-shadow: 0 0 30px rgba(168, 85, 247, 0.5);
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .marker-icon {
            font-size: 1.5rem;
            line-height: 1;
        }

        .marker-month {
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }

        .timeline-connector {
            flex: 1;
            height: 2px;
            background: var(--border);
            margin: 30px -10px 0 -10px;
            position: relative;
        }

        .timeline-connector::after {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 50%;
            background: var(--accent-green);
        }

        /* FIX 4: New Roadmap Card Design */
        .roadmap-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .roadmap-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .milestone-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            position: relative;
            transition: all 0.3s ease;
        }

        .milestone-card:hover {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.1);
        }

        .milestone-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .milestone-month-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .milestone-month-input {
            width: 60px;
            font-size: 1.5rem;
            font-weight: 700;
            background: transparent;
            border: none;
            color: var(--accent-cyan);
            text-align: center;
            padding: 0;
        }

        .milestone-month-input:focus {
            outline: none;
            color: var(--accent-purple);
        }

        .milestone-title-input {
            width: 100%;
            font-size: 1rem;
            font-weight: 600;
            background: transparent;
            border: none;
            color: var(--text-primary);
            margin: 0.5rem 0;
            padding: 0.25rem;
        }

        .milestone-title-input:focus {
            outline: 1px solid var(--accent-cyan);
            border-radius: 4px;
        }

        .milestone-desc-input {
            width: 100%;
            min-height: 60px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 0.875rem;
            resize: vertical;
            font-family: inherit;
            padding: 0.25rem;
        }

        .milestone-desc-input:focus {
            outline: 1px solid var(--accent-cyan);
            border-radius: 4px;
        }

        .milestone-status-select {
            width: 100%;
            padding: 0.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            margin-top: 0.5rem;
            font-size: 0.875rem;
            cursor: pointer;
        }

        .milestone-status-select:focus {
            outline: none;
            border-color: var(--accent-cyan);
        }

        .remove-milestone {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            width: 24px;
            height: 24px;
            background: var(--accent-red);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1rem;
            line-height: 1;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .milestone-card:hover .remove-milestone {
            opacity: 1;
        }

        .remove-milestone:hover {
            background: #b91c1c;
        }

        .timeline-content {
            text-align: center;
            padding: 0 0.5rem;
        }

        .timeline-content strong {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--accent-cyan);
        }

        .timeline-content p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* BUG 4 FIX: Editable Milestone Styles */
        .editable-milestone-month {
            width: 50px;
            padding: 0.25rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            text-align: center;
        }

        .editable-milestone-title {
            width: 100%;
            padding: 0.5rem;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 4px;
            color: var(--accent-cyan);
            font-weight: 600;
            font-size: 0.9rem;
            text-align: center;
            margin-bottom: 0.5rem;
            transition: all 0.2s;
        }

        .editable-milestone-title:focus {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--accent-cyan);
            outline: none;
        }

        .editable-milestone-desc {
            width: 100%;
            padding: 0.5rem;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 4px;
            color: var(--text-secondary);
            font-size: 0.875rem;
            text-align: center;
            resize: vertical;
            min-height: 50px;
            font-family: inherit;
            transition: all 0.2s;
        }

        .editable-milestone-desc:focus {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--accent-cyan);
            outline: none;
        }

        .milestone-status-select {
            padding: 0.25rem 0.5rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-primary);
            font-size: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .remove-milestone-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 24px;
            height: 24px;
            background: var(--accent-red);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .timeline-item:hover .remove-milestone-btn {
            opacity: 1;
        }

        /* Competitive Comparison Table */
        .comparison-intro {
            text-align: center;
            margin-bottom: 1rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .comparison-table-container {
            overflow-x: auto;
            margin: 1rem 0;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 0.75rem;
            border: 1px solid var(--border);
            text-align: center;
        }

        .comparison-table thead th {
            background: var(--bg-tertiary);
            font-weight: 600;
        }

        .comparison-table .highlight-col {
            background: rgba(0, 212, 255, 0.1);
        }

        .comparison-table tbody td:first-child {
            text-align: left;
            font-weight: 500;
        }

        .company-header {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .company-examples {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-weight: 400;
        }

        .badge-you {
            display: inline-block;
            padding: 0.125rem 0.5rem;
            background: var(--accent-cyan);
            color: var(--bg-card);
            border-radius: 12px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }

        .comparison-table .check {
            color: var(--accent-green);
            font-weight: 700;
            font-size: 1.25rem;
        }

        .comparison-table .cross {
            color: var(--accent-red);
            font-weight: 700;
            font-size: 1.25rem;
        }

        .comparison-table .partial {
            color: var(--accent-orange);
            font-size: 0.875rem;
        }

        .competitive-moat {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(168, 85, 247, 0.1);
            border-left: 4px solid var(--accent-purple);
            border-radius: 8px;
            font-size: 0.875rem;
        }

        /* Enhanced Use of Funds */
        .raise-amount-display {
            text-align: center;
            font-size: 1.125rem;
            margin-bottom: 1.5rem;
        }

        .raise-amount-display strong {
            font-size: 1.5rem;
            color: var(--accent-cyan);
        }

        .funds-breakdown {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .fund-item {
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .fund-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .fund-category {
            font-weight: 600;
            font-size: 1rem;
        }

        .fund-amount {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--accent-green);
        }

        .fund-bar {
            height: 12px;
            background: var(--bg-primary);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 0.75rem;
        }

        .fund-fill {
            height: 100%;
            background: var(--gradient-cyber);
            transition: width 1s ease;
        }

        .fund-details {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .runway-projection {
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--accent-orange);
            border-radius: 8px;
            text-align: center;
        }

        .runway-projection #extended-runway {
            color: var(--accent-orange);
            font-weight: 700;
            font-size: 1.125rem;
        }

        /* FIX 5: Use of Funds 4-Column Grid */
        .use-of-funds-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-top: 1rem;
        }

        @media (max-width: 1024px) {
            .use-of-funds-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 640px) {
            .use-of-funds-grid {
                grid-template-columns: 1fr;
            }
        }

        .fund-column {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .fund-column:hover {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.1);
        }

        .fund-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .fund-category {
            font-weight: 600;
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
        }

        .fund-percentage {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-cyan);
            margin-bottom: 0.25rem;
        }

        .fund-amount {
            font-size: 1.25rem;
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .fund-details {
            text-align: left;
            list-style: none;
            padding: 0;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .fund-details li {
            padding: 0.25rem 0;
            border-left: 2px solid var(--accent-cyan);
            padding-left: 0.5rem;
            margin-bottom: 0.25rem;
        }

        /* Investment Terms Grid */
        .terms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .term-item {
            padding: 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            text-align: center;
        }

        .term-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .term-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .term-note {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        .highlight-cyan {
            color: var(--accent-cyan);
        }

        .highlight-purple {
            color: var(--accent-purple);
        }

        .highlight-green {
            color: var(--accent-green);
        }

        .highlight-orange {
            color: var(--accent-orange);
        }

        .investment-footnotes {
            margin-top: 1.5rem;
            padding: 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            font-size: 0.875rem;
        }

        .investment-footnotes ul {
            margin-top: 0.5rem;
            padding-left: 1.5rem;
        }

        .investment-footnotes li {
            margin: 0.5rem 0;
            color: var(--text-secondary);
        }

        .full-width {
            grid-column: 1 / -1;
        }

        /* Print Optimization */
        @media print {
            .onepager-section {
                page-break-inside: avoid;
            }

            .help-icon {
                display: none !important;
            }

            body {
                background: white;
                color: black;
            }

            .nav,
            .header,
            button,
            .btn-secondary,
            .onepager-actions {
                display: none !important;
            }

            .onepager-section {
                border: 1px solid #ccc;
                margin-bottom: 1rem;
                padding: 1rem;
            }

            .timeline-marker {
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .timeline-container {
                flex-direction: column;
            }

            .timeline-connector {
                width: 2px;
                height: 40px;
                margin: -10px 0 -10px 30px;
            }

            .timeline-connector::after {
                width: 100%;
                height: 50%;
            }

            .timeline-item {
                flex-direction: row;
                align-items: flex-start;
                text-align: left;
                width: 100%;
            }

            .timeline-content {
                text-align: left;
                padding-left: 1rem;
            }

            .value-props {
                grid-template-columns: 1fr;
            }

            .revenue-streams-grid {
                grid-template-columns: 1fr;
            }

            .terms-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Editable content styles */
        [contenteditable="true"],
        .editable-text {
            cursor: text;
            border-radius: 4px;
            padding: 0.25rem;
            margin: -0.25rem;
            transition: background 0.2s ease, outline 0.2s ease;
            position: relative;
        }

        [contenteditable="true"]:hover,
        .editable-text:hover {
            background: rgba(0, 212, 255, 0.05);
            outline: 1px dashed rgba(0, 212, 255, 0.3);
        }

        [contenteditable="true"]:focus,
        .editable-text.editing {
            background: var(--bg-tertiary);
            outline: 2px solid var(--accent-cyan);
        }

        /* Reset button styling */
        .reset-tab-btn {
            padding: 0.4rem 0.8rem;
            background: rgba(255, 68, 68, 0.1);
            border: 1px solid rgba(255, 68, 68, 0.3);
            color: #ff4444;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .reset-tab-btn:hover {
            background: rgba(255, 68, 68, 0.2);
            border-color: rgba(255, 68, 68, 0.5);
            transform: translateY(-1px);
        }

        /* Rename button styling */
        .rename-state-btn {
            padding: 0.25rem 0.5rem;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: var(--accent-cyan);
            border-radius: 4px;
            font-size: 0.7rem;
            cursor: pointer;
            margin-right: 0.5rem;
            transition: all 0.2s;
            font-weight: 500;
        }

        .rename-state-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 212, 255, 0.5);
        }

        /* Rename input styling */
        .rename-input {
            padding: 0.25rem 0.5rem;
            background: var(--bg-secondary);
            border: 2px solid var(--accent-cyan);
            color: var(--text-primary);
            border-radius: 4px;
            font-size: 0.85rem;
            font-family: inherit;
            width: 100%;
            max-width: 300px;
        }

        .rename-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.2);
        }

        .rename-error {
            color: var(--accent-red);
            font-size: 0.7rem;
            margin-top: 0.25rem;
        }

        .saved-state-name {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .editable-revenue {
            min-width: 80px;
            display: inline-block;
        }

        /* Save/Load dropdown styles */
        #header-load-btn:hover {
            background: var(--bg-tertiary);
        }

        .saved-state-item:hover {
            background: var(--bg-tertiary) !important;
        }

        .saved-state-item {
            width: 100%;
            padding: 0.75rem 1rem;
            background: transparent;
            border: none;
            color: var(--text-primary);
            text-align: left;
            cursor: pointer;
            font-size: 0.85rem;
            transition: background 0.2s;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .saved-state-item:last-child {
            border-bottom: none;
        }

        .saved-state-time {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .delete-state-btn {
            padding: 0.25rem 0.5rem;
            background: rgba(255, 68, 68, 0.1);
            border: 1px solid rgba(255, 68, 68, 0.3);
            color: #ff4444;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.7rem;
            margin-left: 0.5rem;
            transition: all 0.2s;
        }

        .delete-state-btn:hover {
            background: rgba(255, 68, 68, 0.2);
            border-color: rgba(255, 68, 68, 0.5);
        }

        /* Mobile hamburger menu */
        .hamburger-btn {
            display: none;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            margin-left: auto;
        }

        .hamburger-icon {
            width: 24px;
            height: 20px;
            position: relative;
            transform: rotate(0deg);
            transition: .5s ease-in-out;
            cursor: pointer;
        }

        .hamburger-icon span {
            display: block;
            position: absolute;
            height: 3px;
            width: 100%;
            background: var(--text-primary);
            border-radius: 3px;
            opacity: 1;
            left: 0;
            transform: rotate(0deg);
            transition: .25s ease-in-out;
        }

        .hamburger-icon span:nth-child(1) {
            top: 0px;
        }

        .hamburger-icon span:nth-child(2) {
            top: 8px;
        }

        .hamburger-icon span:nth-child(3) {
            top: 16px;
        }

        .hamburger-icon.active span:nth-child(1) {
            top: 8px;
            transform: rotate(135deg);
        }

        .hamburger-icon.active span:nth-child(2) {
            opacity: 0;
            left: -60px;
        }

        .hamburger-icon.active span:nth-child(3) {
            top: 8px;
            transform: rotate(-135deg);
        }

        /* Tooltip styles */
        .help-icon {
            position: relative;
        }

        .help-icon:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.75rem;
            min-width: 200px;
            max-width: 320px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), 0 0 10px rgba(0, 212, 255, 0.2);
            z-index: 1000;
            font-size: 0.875rem;
            line-height: 1.5;
            font-weight: 400;
            white-space: normal;
            text-align: left;
            pointer-events: none;
        }

        .help-icon:hover::before {
            content: '';
            position: absolute;
            bottom: 115%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: var(--bg-card);
            z-index: 1001;
            pointer-events: none;
        }

        th .help-icon:hover::after {
            bottom: auto;
            top: 125%;
        }

        th .help-icon:hover::before {
            bottom: auto;
            top: 115%;
            border-top-color: transparent;
            border-bottom-color: var(--bg-card);
        }

        /* Warning alert styles */
        .alert {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            line-height: 1.5;
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .alert-critical {
            background: rgba(239, 68, 68, 0.1);
            border-left: 3px solid var(--accent-red);
            color: var(--text-primary);
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            border-left: 3px solid var(--accent-orange);
            color: var(--text-primary);
        }

        .alert-info {
            background: rgba(0, 212, 255, 0.1);
            border-left: 3px solid var(--accent-cyan);
            color: var(--text-primary);
        }

        /* Mobile responsive styles */
        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
            }

            .hamburger-btn {
                display: block;
                order: 2;
            }

            .logo {
                order: 1;
            }

            .nav-tabs {
                order: 3;
                width: 100%;
                flex-direction: column;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease-in-out;
                margin-top: 0;
            }

            .nav-tabs.mobile-open {
                max-height: 800px;
                margin-top: 1rem;
                padding-top: 1rem;
                border-top: 1px solid var(--border);
            }

            .nav-tab {
                width: 100%;
                text-align: left;
                padding: 1rem;
                border-bottom: 1px solid var(--border-subtle);
            }

            .nav-tab:last-of-type {
                border-bottom: none;
            }

            #header-save-btn,
            #header-load-btn {
                width: 100%;
                justify-content: center;
                margin-top: 0.5rem;
            }

            #load-dropdown {
                right: auto;
                left: 0;
                width: calc(100% - 2rem);
                margin: 0 1rem;
            }

            /* Mobile table responsiveness */
            .grid-2,
            .grid-3,
            .grid-4 {
                grid-template-columns: 1fr !important;
            }

            table {
                display: block;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .card {
                overflow-x: auto;
            }

            /* Make projection chart scrollable */
            canvas {
                max-width: 100%;
                height: auto !important;
            }

            /* Adjust input groups for mobile */
            .dual-input {
                flex-direction: column;
            }

            .dual-input input {
                width: 100% !important;
            }

            /* Course/project/event items */
            .course-item,
            .event-item,
            [style*="grid-template-columns"] {
                grid-template-columns: 1fr !important;
                gap: 0.5rem !important;
            }

            .course-item input,
            .event-item input,
            .course-item select,
            .event-item select {
                width: 100% !important;
            }

            /* Stack metrics cards */
            .metric-card,
            .branch-card {
                min-width: 100%;
            }

            /* Adjust font sizes for mobile */
            .section-title {
                font-size: 1.5rem;
            }

            .metric-value {
                font-size: 1.8rem;
            }

            /* Pitch and one-pager adjustments */
            .pitch-hero {
                padding: 2rem 1rem;
            }

            .pitch-tagline {
                font-size: 1.25rem;
            }

            .ask-amount {
                font-size: 2rem;
            }
        }

        /* Print styles */
        @media print {
            body {
                background: white;
                color: black;
            }

            .header,
            .nav-tabs,
            #presentation-controls,
            .btn-secondary {
                display: none;
            }

            .card,
            .section {
                page-break-inside: avoid;
            }
        }

        /* ==========================================
           EDITABLE CONTENT SYSTEM
           ========================================== */
        .editable-inline {
            cursor: text;
            position: relative;
            transition: all 0.2s ease;
        }

        .editable-inline:hover {
            background: rgba(0, 212, 255, 0.05);
            outline: 1px dashed var(--accent-cyan);
            outline-offset: 2px;
        }

        .editable-inline.editing {
            background: var(--bg-secondary);
            outline: 2px solid var(--accent-cyan);
        }

        .inline-edit-input {
            width: 100%;
            background: var(--bg-secondary);
            border: none;
            color: var(--text-primary);
            font-family: inherit;
            font-size: inherit;
            padding: 0.5rem;
            border-radius: 4px;
        }

        .inline-edit-input:focus {
            outline: none;
        }

        textarea.inline-edit-input {
            min-height: 60px;
            resize: vertical;
        }

        /* ==========================================
           DECISION STATUS STRIP (Dashboard)
           ========================================== */
        .decision-status-strip {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
            min-width: 200px;
        }

        .status-icon {
            font-size: 1.5rem;
        }

        .status-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .status-value {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .status-value.critical {
            color: var(--accent-red);
        }

        .status-value.warning {
            color: var(--accent-orange);
        }

        .status-value.success {
            color: var(--accent-green);
        }

        .next-action-hint {
            padding: 1rem;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid var(--accent-cyan);
            border-radius: 8px;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
        }

        .next-action-hint strong {
            color: var(--accent-cyan);
        }

        /* ==========================================
           RAISE INTENT & FRICTION WARNINGS
           ========================================== */
        .raise-intent-selector {
            margin-bottom: 1.5rem;
        }

        .raise-intent-selector label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .raise-intent-selector select {
            width: 100%;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.875rem;
            cursor: pointer;
        }

        .friction-notice,
        .safe-warning {
            padding: 1rem;
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--accent-orange);
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .safe-warning {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid var(--accent-red);
        }

        /* ==========================================
           PRESENTATION MODE (One-Pager)
           ========================================== */
        #presentation-controls {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            display: flex;
            gap: 1rem;
            align-items: center;
            background: var(--bg-card);
            padding: 1rem 2rem;
            border-radius: 50px;
            border: 1px solid var(--border);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        #presentation-controls button {
            padding: 0.5rem 1.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        #presentation-controls button:hover {
            background: var(--accent-cyan);
            color: var(--bg-primary);
        }

        #section-counter {
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .presentation-mode .section>*:not(.presentation-visible) {
            display: none !important;
        }

        .presentation-visible {
            animation: slideIn 0.4s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ==========================================
           STRUCTURED SECTIONS (Business Plan)
           ========================================== */
        .structured-section {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .structured-section h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .assumption-list,
        .risk-list,
        .questions-list {
            min-height: 100px;
            padding: 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            line-height: 1.8;
        }

        .coherence-warnings {
            margin-top: 1rem;
        }

        .coherence-warning {
            padding: 0.75rem 1rem;
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--accent-orange);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
        }

        /* ==========================================
           ELEVATOR PITCH STRUCTURE
           ========================================== */
        .pitch-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .pitch-controls select {
            padding: 0.75rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.875rem;
            cursor: pointer;
        }

        .pitch-structure {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .pitch-part {
            background: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .pitch-part label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--accent-cyan);
            font-size: 0.875rem;
        }

        .pitch-input {
            width: 100%;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
            resize: vertical;
        }

        .char-count {
            display: block;
            text-align: right;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        /* ==========================================
           REVENUE STREAM META
           ========================================== */
        .stream-meta {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-top: 0.5rem;
            flex-wrap: wrap;
        }

        .stream-priority {
            padding: 0.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 0.75rem;
            cursor: pointer;
        }

        .time-to-revenue {
            width: 80px;
            padding: 0.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 0.75rem;
            text-align: center;
        }

        .sensitivity-check {
            margin-top: 0.75rem;
        }

        .test-sensitivity {
            padding: 0.5rem 1rem;
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--accent-orange);
            border-radius: 6px;
            color: var(--accent-orange);
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.2s ease;
        }

        .test-sensitivity:hover {
            background: rgba(245, 158, 11, 0.2);
        }

        .sensitivity-result {
            margin-top: 0.5rem;
            padding: 0.75rem;
            background: var(--bg-tertiary);
            border-radius: 6px;
            font-size: 0.85rem;
        }

        /* ==========================================
           BOTTLENECK ANALYSIS (Operations)
           ========================================== */
        .bottleneck-analysis {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .bottleneck-analysis h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .prompt-box {
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border);
            margin-bottom: 1rem;
        }

        .prompt-box strong {
            display: block;
            color: var(--accent-cyan);
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
        }

        .prompt-box textarea {
            width: 100%;
            min-height: 80px;
            padding: 0.75rem;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: inherit;
            resize: vertical;
        }

        /* ==========================================
           SAVE/RENAME SYSTEM
           ========================================== */
        .save-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .save-name-input {
            padding: 0.5rem 0.75rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.875rem;
            max-width: 200px;
        }

        .saved-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            transition: background 0.2s ease;
        }

        .saved-item:hover {
            background: rgba(0, 212, 255, 0.05);
        }

        .saved-item-name {
            flex: 1;
            font-size: 0.875rem;
            color: var(--text-primary);
        }

        .saved-item-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-rename,
        .btn-load-item,
        .btn-delete-item {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-rename {
            background: rgba(0, 212, 255, 0.15);
            color: var(--accent-cyan);
        }

        .btn-load-item {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .btn-delete-item {
            background: rgba(239, 68, 68, 0.15);
            color: var(--accent-red);
        }

        .btn-rename:hover {
            background: rgba(0, 212, 255, 0.3);
        }

        .btn-load-item:hover {
            background: rgba(16, 185, 129, 0.3);
        }

        .btn-delete-item:hover {
            background: rgba(239, 68, 68, 0.3);
        }
    </style>
</head>

<body>
    <div class="bg-grid"></div>
    <div class="bg-gradient"></div>

    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon"
                    style="background: linear-gradient(135deg, #00d4ff 0%, #a855f7 50%, #ec4899 100%); box-shadow: 0 0 20px rgba(168, 85, 247, 0.6);">
                    CN</div>
                <div>
                    <div class="logo-text">Cyberdelic Nexus</div>
                    <div class="logo-subtitle">Financial Matrix</div>
                </div>
            </div>
            <button id="theme-toggle"
                style="background: var(--bg-card); border: 1px solid var(--border); color: var(--text-primary); padding: 0.5rem 0.75rem; border-radius: 8px; cursor: pointer; font-size: 1.2rem; display: flex; align-items: center; gap: 0.5rem; transition: all 0.2s;"
                title="Toggle theme">
                <span id="theme-icon">ðŸŒ™</span>
            </button>
            <button class="hamburger-btn" id="hamburger-btn" aria-label="Toggle menu">
                <div class="hamburger-icon" id="hamburger-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
            <nav class="nav-tabs" id="nav-tabs">
                <button class="nav-tab active" data-section="dashboard">Dashboard</button>
                <button class="nav-tab" data-section="business-plan">Business Plan</button>
                <button class="nav-tab" data-section="pitch">Elevator Pitch</button>
                <button class="nav-tab" data-section="onepager">One-Pager</button>
                <button class="nav-tab" data-section="capital">Capital Raise</button>
                <button class="nav-tab" data-section="revenue">Revenue</button>
                <button class="nav-tab" data-section="operations">Operations</button>
                <div style="margin-left: auto; display: flex; gap: 0.5rem; align-items: center;">
                    <button id="header-save-btn"
                        style="background: linear-gradient(135deg, #00d4ff 0%, #a855f7 100%); color: #0a0a0f; font-weight: 700; padding: 0.75rem 1.5rem; border-radius: 8px; border: none; cursor: pointer; font-size: 0.9rem; transition: all 0.2s ease;">
                        ðŸ’¾ Save
                    </button>
                    <div style="position: relative;">
                        <button id="header-load-btn"
                            style="background: var(--bg-card); border: 1px solid var(--border); color: var(--text-primary); font-weight: 600; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-size: 0.9rem; transition: all 0.2s ease;">
                            ðŸ“‚ Load
                        </button>
                        <div id="load-dropdown"
                            style="display: none; position: absolute; right: 0; top: calc(100% + 0.5rem); background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; min-width: 280px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4); z-index: 1000; overflow: hidden;">
                            <div
                                style="padding: 0.75rem 1rem; background: var(--bg-tertiary); font-size: 0.75rem; color: var(--text-secondary); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; border-bottom: 1px solid var(--border);">
                                Saved States</div>
                            <div id="saved-states-list" style="max-height: 350px; overflow-y: auto;">
                                <div
                                    style="padding: 1.5rem; text-align: center; color: var(--text-secondary); font-size: 0.85rem;">
                                    No saved states yet</div>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="main">
        <!-- ==========================================
             DASHBOARD SECTION
             ========================================== -->
        <section id="dashboard" class="section active">
            <div class="section-header">
                <h1 class="section-title">Financial Overview</h1>
                <p class="section-subtitle">Real-time metrics across all branches</p>
            </div>

            <!-- Decision Status Strip -->
            <div class="decision-status-strip">
                <div class="status-item">
                    <span class="status-icon">ðŸƒ</span>
                    <div>
                        <div class="status-label">Runway Health</div>
                        <div class="status-value" id="runway-health-status">Calculating...</div>
                    </div>
                </div>
                <div class="status-item">
                    <span class="status-icon">ðŸ’°</span>
                    <div>
                        <div class="status-label">Revenue Model</div>
                        <div class="status-value" id="revenue-model-status">Needs validation</div>
                    </div>
                </div>
                <div class="status-item">
                    <span class="status-icon">ðŸ“Š</span>
                    <div>
                        <div class="status-label">Raise Readiness</div>
                        <div class="status-value" id="raise-readiness-status">Not ready</div>
                    </div>
                </div>
            </div>

            <div class="next-action-hint">
                <strong>ðŸ‘‰ Next Recommended Action:</strong>
                <span id="next-action-text">Complete your financial inputs in the tabs above to see personalized
                    guidance.</span>
            </div>

            <div class="grid-4">
                <div class="metric-card">
                    <div class="metric-label">Total MRR</div>
                    <div class="metric-value cyan" id="total-mrr">$0</div>
                    <div class="metric-change positive">Calculated live</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Runway</div>
                    <div class="metric-value purple" id="runway-months">0 mo</div>
                    <div class="metric-change" id="runway-status">Based on burn rate</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Funding Gap</div>
                    <div class="metric-value orange" id="funding-gap">$0</div>
                    <div class="metric-change">18-month target</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">LTV:CAC Ratio</div>
                    <div class="metric-value green" id="ltv-cac-ratio">0:1</div>
                    <div class="metric-change" id="ltv-cac-status">Target: 3:1</div>
                </div>
            </div>

            <div class="grid-4" style="margin-top: 1rem;">
                <div class="branch-card">
                    <div class="branch-header">
                        <div class="branch-icon society">&#127760;</div>
                        <div>
                            <div class="branch-name">Society</div>
                            <div class="branch-desc">Memberships & Events</div>
                        </div>
                    </div>
                    <div class="branch-metrics">
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="society-mrr">$0</div>
                            <div class="branch-metric-label">MRR</div>
                        </div>
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="society-members">0</div>
                            <div class="branch-metric-label">Members</div>
                        </div>
                    </div>
                </div>
                <div class="branch-card">
                    <div class="branch-header">
                        <div class="branch-icon labs">&#129514;</div>
                        <div>
                            <div class="branch-name">Labs</div>
                            <div class="branch-desc">Consulting & R&D</div>
                        </div>
                    </div>
                    <div class="branch-metrics">
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="labs-mrr">$0</div>
                            <div class="branch-metric-label">MRR</div>
                        </div>
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="labs-projects">0</div>
                            <div class="branch-metric-label">Projects</div>
                        </div>
                    </div>
                </div>
                <div class="branch-card">
                    <div class="branch-header">
                        <div class="branch-icon academy">&#127891;</div>
                        <div>
                            <div class="branch-name">Academy</div>
                            <div class="branch-desc">Courses & Certs</div>
                        </div>
                    </div>
                    <div class="branch-metrics">
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="academy-mrr">$0</div>
                            <div class="branch-metric-label">MRR</div>
                        </div>
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="academy-students">0</div>
                            <div class="branch-metric-label">Students</div>
                        </div>
                    </div>
                </div>
                <div class="branch-card">
                    <div class="branch-header">
                        <div class="branch-icon dojos">&#129351;</div>
                        <div>
                            <div class="branch-name">Dojos</div>
                            <div class="branch-desc">Spaces & XR</div>
                        </div>
                    </div>
                    <div class="branch-metrics">
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="dojos-mrr">$0</div>
                            <div class="branch-metric-label">MRR</div>
                        </div>
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="dojos-sessions">0</div>
                            <div class="branch-metric-label">Sessions/mo</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 1.5rem;">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128200;</div>
                        3-Year Revenue Projection
                    </div>
                    <div class="scenario-pills">
                        <button class="scenario-pill" data-scenario="conservative">Conservative</button>
                        <button class="scenario-pill active" data-scenario="moderate">Moderate</button>
                        <button class="scenario-pill" data-scenario="aggressive">Aggressive</button>
                    </div>
                </div>

                <!-- Summary Metrics Row -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px; margin: 0 1.5rem 1.5rem 1.5rem;">
                    <div style="text-align: center;">
                        <div
                            style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">
                            Starting MRR</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-cyan);"
                            id="projection-start-mrr">$0</div>
                    </div>
                    <div style="text-align: center;">
                        <div
                            style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">
                            Year 3 MRR</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-purple);"
                            id="projection-end-mrr">$0</div>
                    </div>
                    <div style="text-align: center;">
                        <div
                            style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">
                            Total ARR (Y3)</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-green);"
                            id="projection-total-arr">$0</div>
                    </div>
                    <div style="text-align: center;">
                        <div
                            style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">
                            Growth Rate</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-orange);"
                            id="projection-growth-rate">0%</div>
                    </div>
                </div>

                <!-- Chart with Axis Labels -->
                <div class="chart-container" style="position: relative; padding: 2rem 1.5rem 1.5rem 1.5rem;">
                    <!-- Y-Axis Label -->
                    <div
                        style="position: absolute; left: 0; top: 50%; transform: translateY(-50%) rotate(-90deg); transform-origin: center; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; white-space: nowrap;">
                        Quarterly Revenue ($)</div>

                    <!-- Y-Axis Values -->
                    <div id="y-axis-values"
                        style="position: absolute; left: 45px; top: 2rem; bottom: 3rem; display: flex; flex-direction: column; justify-content: space-between; font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--text-muted);">
                    </div>

                    <!-- Chart Bars -->
                    <div style="margin-left: 80px;">
                        <div class="chart-bars" id="projection-chart"></div>
                    </div>

                    <!-- X-Axis Label -->
                    <div
                        style="text-align: center; margin-top: 1rem; margin-left: 80px; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">
                        Time (Quarters)</div>
                </div>

                <!-- Data Table View -->
                <div style="margin: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px;">
                    <h4
                        style="font-size: 0.85rem; color: var(--text-primary); margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 0.05em;">
                        Quarterly Breakdown</h4>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;"
                        id="projection-table-view"></div>
                </div>
            </div>
        </section>

        <!-- ==========================================
             BUSINESS PLAN SECTION
             ========================================== -->
        <section id="business-plan" class="section">
            <div class="hero-section">
                <div class="hero-title">Cyberdelic Nexus</div>
                <div class="hero-subtitle" contenteditable="true" id="business-hero-subtitle">
                    A global ecosystem designing humane technology, immersive experiences, and cultural frameworks
                    that help people turn expanded states of consciousness into lasting clarity, creativity, and deeper
                    ways of living.
                </div>
                <div class="hero-stats">
                    <div class="hero-stat">
                        <div class="hero-stat-value">$55B+</div>
                        <div class="hero-stat-label">Digital Therapeutics TAM by 2032</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value">$1.7T</div>
                        <div class="hero-stat-label">XR Market by 2032</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value">27%</div>
                        <div class="hero-stat-label">CAGR Growth Rate</div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="vision-card">
                    <h3>&#127919; Vision</h3>
                    <p contenteditable="true" id="business-vision-text">To become a global hub redefining
                        human-technology relationships by providing a coherent, ethically designed environment where
                        creators, technologists, researchers, and seekers can collaborate, prototype, and deepen their
                        understanding of how humane technology can support human flourishing.</p>
                </div>
                <div class="vision-card">
                    <h3>&#127919; Mission</h3>
                    <p contenteditable="true" id="business-mission-text">Design humane technologies, practices, and
                        frameworks that help individuals and communities learn to turn states of consciousness into
                        lasting cognitive, emotional, and creative traits. We build ecosystems where immersive
                        technology is used deliberately, ethically, and skillfully.</p>
                </div>
            </div>

            <div class="card" style="margin-top: 1.5rem;">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128640;</div>
                        The Four Branches
                    </div>
                </div>
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">&#129514;</div>
                        <div class="feature-title">Cyberdelic Labs</div>
                        <div class="feature-desc" contenteditable="true" id="business-labs-desc">R&D, consulting, and
                            prototyping for immersive technologies, cognitive tools, and transformation-focused
                            applications. Works with partners in arts, culture, digital therapeutics, and emerging tech.
                        </div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">&#127891;</div>
                        <div class="feature-title">Cyberdelic Academy</div>
                        <div class="feature-desc" contenteditable="true" id="business-academy-desc">Courses,
                            certifications, and training programs that teach people how to design, facilitate, and
                            integrate transformative experiences. Supports both personal learning and professional
                            development.</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">&#129351;</div>
                        <div class="feature-title">Cyberdelic Dojos</div>
                        <div class="feature-desc" contenteditable="true" id="business-dojos-desc">Physical and virtual
                            spaces for guided immersive practice. Participants explore expanded states through
                            structured protocols and supervised technologies while developing long-term capacities.
                        </div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">&#127760;</div>
                        <div class="feature-title">Cyberdelic Society</div>
                        <div class="feature-desc" contenteditable="true" id="business-society-desc">A membership-driven
                            cultural network that offers community, research access, events, and ongoing collaboration
                            opportunities. The connective tissue for the entire ecosystem.</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128202;</div>
                        Market Opportunity
                    </div>
                </div>

                <div class="market-bar">
                    <div class="market-bar-header">
                        <span class="market-bar-label">Digital Therapeutics</span>
                        <span class="market-bar-value">$8.2B &#8594; $55B (2032)</span>
                    </div>
                    <div class="market-bar-track">
                        <div class="market-bar-fill" style="width: 85%;">26.3% CAGR</div>
                    </div>
                </div>

                <div class="market-bar">
                    <div class="market-bar-header">
                        <span class="market-bar-label">Extended Reality (XR)</span>
                        <span class="market-bar-value">$184B &#8594; $1.7T (2032)</span>
                    </div>
                    <div class="market-bar-track">
                        <div class="market-bar-fill" style="width: 95%;">32.1% CAGR</div>
                    </div>
                </div>

                <div class="market-bar">
                    <div class="market-bar-header">
                        <span class="market-bar-label">Wellness Economy</span>
                        <span class="market-bar-value">$5.6T &#8594; $8.5T (2032)</span>
                    </div>
                    <div class="market-bar-track">
                        <div class="market-bar-fill" style="width: 70%;">5-7% CAGR</div>
                    </div>
                </div>

                <div class="market-bar">
                    <div class="market-bar-header">
                        <span class="market-bar-label">Online Education</span>
                        <span class="market-bar-value">$350B &#8594; $1T+ (2032)</span>
                    </div>
                    <div class="market-bar-track">
                        <div class="market-bar-fill" style="width: 75%;">14% CAGR</div>
                    </div>
                </div>

                <div style="margin-top: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px;">
                    <h4 style="color: var(--accent-cyan); margin-bottom: 1rem;">Serviceable Addressable Market (SAM)
                    </h4>
                    <p style="color: var(--text-secondary); line-height: 1.7;" contenteditable="true"
                        id="business-market-sam-desc">
                        Focusing on consciousness-oriented technology and experiential wellness: <strong
                            style="color: var(--accent-cyan);">$15-25 billion</strong> globally, encompassing VR/AR
                        wellness applications, mindfulness platforms, professional consciousness facilitation training,
                        and experiential wellness centers.
                    </p>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128176;</div>
                        3-Year Revenue Projections
                    </div>
                </div>

                <!-- Year Headers -->
                <div
                    style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; background: var(--bg-tertiary); border-bottom: 2px solid var(--border); font-weight: 600; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">
                    <div>Revenue Stream</div>
                    <div style="text-align: center;">Year 1</div>
                    <div style="text-align: center;">Year 2</div>
                    <div style="text-align: center;">Year 3</div>
                </div>

                <!-- Society Memberships Row -->
                <div
                    style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 500;">Society Memberships</div>
                    <input type="text" class="editable-revenue" data-year="1" data-stream="society" value="$60,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue" data-year="2" data-stream="society" value="$240,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue highlight" data-year="3" data-stream="society"
                        value="$600,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--accent-cyan, #00d4ff) transparent var(--accent-cyan, #00d4ff) transparent; border-width: 0 0 2px 0; padding: 0.5rem; border-radius: 6px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; font-weight: 600;">
                </div>

                <!-- Academy Courses Row -->
                <div
                    style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 500;">Academy Courses</div>
                    <input type="text" class="editable-revenue" data-year="1" data-stream="academy" value="$25,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue" data-year="2" data-stream="academy" value="$100,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue highlight" data-year="3" data-stream="academy"
                        value="$300,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--accent-cyan, #00d4ff) transparent var(--accent-cyan, #00d4ff) transparent; border-width: 0 0 2px 0; padding: 0.5rem; border-radius: 6px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; font-weight: 600;">
                </div>

                <!-- Labs Consulting Row -->
                <div
                    style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 500;">Labs Consulting</div>
                    <input type="text" class="editable-revenue" data-year="1" data-stream="labs" value="$50,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue" data-year="2" data-stream="labs" value="$150,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue highlight" data-year="3" data-stream="labs"
                        value="$400,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--accent-cyan, #00d4ff) transparent var(--accent-cyan, #00d4ff) transparent; border-width: 0 0 2px 0; padding: 0.5rem; border-radius: 6px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; font-weight: 600;">
                </div>

                <!-- Events Row -->
                <div
                    style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 500;">Events (Summit)</div>
                    <input type="text" class="editable-revenue" data-year="1" data-stream="events" value="$30,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue" data-year="2" data-stream="events" value="$75,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue highlight" data-year="3" data-stream="events"
                        value="$150,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--accent-cyan, #00d4ff) transparent var(--accent-cyan, #00d4ff) transparent; border-width: 0 0 2px 0; padding: 0.5rem; border-radius: 6px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; font-weight: 600;">
                </div>

                <!-- Merch & Other Row -->
                <div
                    style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; border-bottom: 2px solid var(--border); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 500;">Merch & Other</div>
                    <input type="text" class="editable-revenue" data-year="1" data-stream="merch" value="$10,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue" data-year="2" data-stream="merch" value="$35,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue highlight" data-year="3" data-stream="merch"
                        value="$50,000"
                        style="text-align: center; background: var(--bg-card); border: 1px solid var(--accent-cyan, #00d4ff) transparent var(--accent-cyan, #00d4ff) transparent; border-width: 0 0 2px 0; padding: 0.5rem; border-radius: 6px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; font-weight: 600;">
                </div>

                <!-- Total Revenue Row -->
                <div
                    style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1.5rem; background: rgba(0, 212, 255, 0.05); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 700; font-size: 1rem;">Total Revenue</div>
                    <div id="revenue-year1-total"
                        style="text-align: center; font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700; color: var(--accent-cyan);">
                        $175,000</div>
                    <div id="revenue-year2-total"
                        style="text-align: center; font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700; color: var(--accent-cyan);">
                        $600,000</div>
                    <div id="revenue-year3-total"
                        style="text-align: center; font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700; color: var(--accent-cyan);">
                        $1,500,000</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#9889;</div>
                        Competitive Moat
                    </div>
                </div>
                <div class="grid-3">
                    <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 8px;">
                        <h4 style="color: var(--accent-cyan); margin-bottom: 0.5rem;">Ecosystem Integration</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true"
                            id="business-moat-ecosystem">No single competitor offers the full stack of research,
                            education, community, and physical spaces</p>
                    </div>
                    <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 8px;">
                        <h4 style="color: var(--accent-purple); margin-bottom: 0.5rem;">Proprietary Frameworks</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true"
                            id="business-moat-frameworks">The Cyberdelic XD Canvas and training protocols create
                            differentiated IP</p>
                    </div>
                    <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 8px;">
                        <h4 style="color: var(--accent-pink); margin-bottom: 0.5rem;">Network Effects</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true"
                            id="business-moat-network">Each branch strengthens the others, creating switching costs for
                            engaged members</p>
                    </div>
                </div>
            </div>

            <!-- Structured Analysis Sections -->
            <div class="structured-section">
                <h3>ðŸ“Š Key Assumptions</h3>
                <div class="assumption-list" contenteditable="true" id="business-assumptions">â€¢ Add your critical
                    assumptions here (e.g., market adoption rate, customer acquisition cost, churn rate)
                    â€¢ Be specific and quantifiable where possible
                    â€¢ These assumptions should align with your revenue projections</div>
            </div>

            <div class="structured-section">
                <h3>âš ï¸ Known Risks</h3>
                <div class="risk-list" contenteditable="true" id="business-risks">â€¢ Add identified risks here (e.g.,
                    regulatory changes, competitive threats, technology dependencies)
                    â€¢ Include both internal and external risks
                    â€¢ Indicate which risks you can control vs. which you cannot</div>
            </div>

            <div class="structured-section">
                <h3>â“ Open Questions</h3>
                <div class="questions-list" contenteditable="true" id="business-questions">â€¢ Add unanswered questions
                    here (e.g., optimal pricing strategy, key hiring needs, partnership requirements)
                    â€¢ These should be questions that require research or validation
                    â€¢ Prioritize questions that would most impact your strategy</div>
            </div>

            <div class="coherence-warnings" id="business-plan-warnings"></div>
        </section>

        <!-- ==========================================
             ELEVATOR PITCH SECTION
             ========================================== -->
        <section id="pitch" class="section">
            <div class="pitch-hero">
                <div class="pitch-tagline" contenteditable="true" id="pitch-tagline-text">
                    We're building the <span>operating system for consciousness technology</span> -
                    the integrated platform where research, education, and practice converge to help
                    people transform peak experiences into lasting human capacities.
                </div>
                <div class="hero-stats">
                    <div class="hero-stat">
                        <div class="hero-stat-value" id="pitch-seed-round">$500K</div>
                        <div class="hero-stat-label">Seed Round</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value" id="pitch-runway">18 mo</div>
                        <div class="hero-stat-label">Runway</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value">8.6x</div>
                        <div class="hero-stat-label">Target Return</div>
                    </div>
                </div>
                <!-- BUG 3 FIX: Keep only Book a Meeting in hero -->
                <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; flex-wrap: wrap;">
                    <div style="flex: 1; max-width: 300px;">
                        <label
                            style="display: block; font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Book
                            Meeting Link</label>
                        <input type="url" id="meeting-link" class="input-field"
                            placeholder="https://calendly.com/cyberdelicnexus/cyberdelic-nexus-meeting"
                            value="https://calendly.com/cyberdelicnexus/cyberdelic-nexus-meeting"
                            style="margin-bottom: 0.5rem;">
                        <a href="https://calendly.com/cyberdelicnexus/cyberdelic-nexus-meeting" id="meeting-button"
                            class="btn-primary"
                            style="display: inline-block; width: 100%; text-align: center; padding: 0.75rem 1.5rem; background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-pink) 100%); color: #fff; text-decoration: none; border-radius: 8px; font-weight: 600; transition: transform 0.2s;">
                            ðŸ“… Book a Meeting
                        </a>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="pitch-section">
                    <h3>&#128308; The Problem</h3>
                    <p contenteditable="true" id="pitch-problem-intro">Altered states of consciousness can enhance
                        creativity, problem-solving, and well-being. But today, people explore these states through
                        <strong>scattered subcultures, isolated experiences, and unconnected tools</strong>.
                    </p>
                    <ul style="margin-top: 1rem;">
                        <li contenteditable="true" id="pitch-problem-1">Transformative experiences exist in silos with
                            no unified framework</li>
                        <li contenteditable="true" id="pitch-problem-2">No cultural scaffolding for harm reduction or
                            integration</li>
                        <li contenteditable="true" id="pitch-problem-3">Groundbreaking projects struggle to reach
                            audiences</li>
                        <li contenteditable="true" id="pitch-problem-4">Research, creators, and practitioners rarely
                            converge</li>
                    </ul>
                </div>

                <div class="pitch-section">
                    <h3>&#128994; Our Solution</h3>
                    <p contenteditable="true" id="pitch-solution-intro">Cyberdelic Nexus is the <strong>integrated
                            ecosystem</strong> that connects the fragmented landscape of consciousness technology into a
                        coherent platform.</p>
                    <ul style="margin-top: 1rem;">
                        <li contenteditable="true" id="pitch-solution-1"><strong>Labs:</strong> R&D and consulting
                            ($175/hr avg)</li>
                        <li contenteditable="true" id="pitch-solution-2"><strong>Academy:</strong> Courses and
                            certifications ($99-$2,499)</li>
                        <li contenteditable="true" id="pitch-solution-3"><strong>Society:</strong> Membership community
                            ($15-$199/mo)</li>
                        <li contenteditable="true" id="pitch-solution-4"><strong>Dojos:</strong> Physical/virtual
                            practice spaces</li>
                    </ul>
                </div>
            </div>

            <div class="pitch-section">
                <h3>&#128640; Why Now?</h3>
                <div class="grid-3" style="margin-top: 1rem;">
                    <div
                        style="text-align: center; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#127973;</div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true"
                            id="pitch-why-now-1">Digital therapeutics growing at 27% CAGR</div>
                    </div>
                    <div
                        style="text-align: center; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#129299;</div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true"
                            id="pitch-why-now-2">XR wellness becoming mainstream</div>
                    </div>
                    <div
                        style="text-align: center; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#129504;</div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true"
                            id="pitch-why-now-3">Mental health crisis demands innovation</div>
                    </div>
                </div>
            </div>

            <div class="pitch-section">
                <h3>&#128176; Traction & Milestones</h3>
                <div class="timeline" style="margin-top: 1rem;">
                    <div class="timeline-item">
                        <div class="timeline-title">Foundation Complete</div>
                        <div class="timeline-desc" contenteditable="true" id="pitch-timeline-1">Business plan finalized,
                            legal structure established (LLC/OU), initial partnerships secured</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Community Building</div>
                        <div class="timeline-desc" contenteditable="true" id="pitch-timeline-2">Growing community of
                            practitioners, researchers, and technologists engaged with vision</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Product Development</div>
                        <div class="timeline-desc" contenteditable="true" id="pitch-timeline-3">Proprietary Cyberdelic
                            XD Canvas framework developed, Academy curriculum in progress</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Revenue Generation</div>
                        <div class="timeline-desc" contenteditable="true" id="pitch-timeline-4">Initial consulting
                            engagements, membership subscriptions launching</div>
                    </div>
                </div>
            </div>

            <div class="ask-box">
                <div
                    style="font-size: 0.85rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem;">
                    The Ask</div>
                <div class="ask-amount" id="pitch-ask-amount">$500,000</div>
                <div class="ask-label">Seed Round via SAFE Note at <span id="pitch-safe-cap">$2M</span> Cap</div>
                <div style="margin-top: 1.5rem; display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap;">
                    <div style="text-align: center;">
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.25rem; color: var(--accent-green);"
                            id="pitch-ask-runway">18 months</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">Runway</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.25rem; color: var(--accent-purple);"
                            id="pitch-year3-revenue">$1.5M</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">Year 3 Revenue Target</div>
                    </div>
                    <div style="text-align: center;">
                        <div
                            style="font-family: 'JetBrains Mono', monospace; font-size: 1.25rem; color: var(--accent-cyan);">
                            5,000+</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">Members by Year 3</div>
                    </div>
                </div>
            </div>

            <div class="pitch-section" style="margin-top: 1.5rem;">
                <h3>&#128161; Why Invest?</h3>
                <div class="grid-2" style="margin-top: 1rem;">
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Category Creation Opportunity
                        </h4>
                        <p contenteditable="true" id="pitch-invest-1">First-mover advantage in defining "integrated
                            consciousness technology" before market consolidation</p>
                    </div>
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Multiple Revenue Streams</h4>
                        <p contenteditable="true" id="pitch-invest-2">Diversified model with memberships, consulting,
                            courses, and events reduces risk</p>
                    </div>
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Defensible Moat</h4>
                        <p contenteditable="true" id="pitch-invest-3">Network effects, proprietary IP, and ecosystem
                            lock-in create lasting competitive advantage</p>
                    </div>
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Social Impact</h4>
                        <p contenteditable="true" id="pitch-invest-4">Aligned with growing ESG trends in mental health,
                            wellness, and consciousness expansion</p>
                    </div>
                </div>
            </div>

            <!-- BUG 3 FIX: Add both buttons at bottom of Elevator Pitch -->
            <div
                style="display: flex; gap: 1rem; justify-content: center; margin-top: 3rem; flex-wrap: wrap; padding: 2rem; background: var(--bg-tertiary); border-radius: 12px;">
                <div style="flex: 1; max-width: 300px;">
                    <label
                        style="display: block; font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Investor
                        Pitch Link</label>
                    <input type="url" id="pitch-deck-link-bottom" class="input-field"
                        placeholder="https://yourpitch.com/deck" value="" style="margin-bottom: 0.5rem;">
                    <a href="#" id="pitch-deck-button-bottom" class="btn-primary"
                        style="display: inline-block; width: 100%; text-align: center; padding: 0.75rem 1.5rem; background: linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-purple) 100%); color: #fff; text-decoration: none; border-radius: 8px; font-weight: 600; transition: transform 0.2s;">
                        ðŸ“Š View Investor Pitch Deck
                    </a>
                </div>
                <div style="flex: 1; max-width: 300px;">
                    <label
                        style="display: block; font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Book
                        Meeting Link</label>
                    <input type="url" id="meeting-link-bottom" class="input-field"
                        placeholder="https://calendly.com/cyberdelicnexus/cyberdelic-nexus-meeting"
                        value="https://calendly.com/cyberdelicnexus/cyberdelic-nexus-meeting"
                        style="margin-bottom: 0.5rem;">
                    <a href="https://calendly.com/cyberdelicnexus/cyberdelic-nexus-meeting" id="meeting-button-bottom"
                        class="btn-primary"
                        style="display: inline-block; width: 100%; text-align: center; padding: 0.75rem 1.5rem; background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-pink) 100%); color: #fff; text-decoration: none; border-radius: 8px; font-weight: 600; transition: transform 0.2s;">
                        ðŸ“… Book a Meeting
                    </a>
                </div>
            </div>
        </section>

        <!-- ==========================================
             ONE-PAGER SECTION
             ========================================== -->
        <section id="onepager" class="section">
            <div class="onepager-intro">
                <div class="intro-icon">ðŸ’¡</div>
                <div class="intro-text">
                    <strong>About This One-Pager:</strong>
                    This is a concise pitch summary designed to help founders tell a coherent story to investors.
                    All numbers are dynamically calculated from assumptions in other tabs.
                    Click any section to edit, or export to PDF to share.
                </div>
            </div>

            <div class="onepager-actions">
                <button class="btn-secondary" onclick="window.print()">
                    ðŸ“„ Export to PDF
                </button>
                <button class="btn-secondary" onclick="copyOnePagerLink()">
                    ðŸ”— Copy Shareable Link
                </button>
            </div>

            <div class="onepager-header">
                <div class="onepager-logo">
                    <div class="onepager-logo-icon">CN</div>
                    <div>
                        <div class="onepager-company">Cyberdelic Nexus</div>
                        <div class="onepager-tagline" contenteditable="true" id="onepager-tagline">The Operating System
                            for Consciousness Technology</div>
                    </div>
                </div>
                <div class="onepager-contact">
                    <div>cyberdelic.nexus</div>
                    <div style="color: var(--accent-cyan);">Seed Round: $500K</div>
                </div>
            </div>

            <div class="onepager-grid">
                <div class="onepager-section">
                    <h4>ðŸ’¡ The Problem</h4>

                    <div class="stat-highlight" contenteditable="true">$1.7T Market Fragmentation</div>

                    <div contenteditable="true" class="problem-text editable-inline" id="onepager-problem-text">
                        The $55B digital therapeutics and $1.7T XR markets suffer from ecosystem fragmentation:
                    </div>

                    <ul class="problem-list">
                        <li contenteditable="true"><strong>73%</strong> of consciousness tech startups fail to scale due
                            to lack of infrastructure</li>
                        <li contenteditable="true"><strong>18-month gap</strong> between research and practical
                            application</li>
                        <li contenteditable="true"><strong>$420M+</strong> wasted annually on duplicate R&D efforts</li>
                        <li contenteditable="true"><strong>No unified platform</strong> for discovery, education, and
                            community</li>
                    </ul>

                    <div class="why-now-box" contenteditable="true">
                        <strong>ðŸ”¥ Why Now?</strong>
                        Post-pandemic consciousness tech adoption grew <strong>340%</strong>.
                        Regulatory tailwinds (FDA digital therapeutic pathways) and
                        generational shift to XR create unprecedented opportunity.
                    </div>
                </div>

                <div class="onepager-section">
                    <h4>âœ¨ Our Solution</h4>

                    <div contenteditable="true" class="solution-intro" id="onepager-solution-text">
                        Cyberdelic Nexus is the first full-stack operating system for consciousness technology:
                    </div>

                    <div class="solution-grid">
                        <div class="solution-column" contenteditable="true">
                            <div class="solution-icon">ðŸ”¬</div>
                            <div class="solution-title">Research Infrastructure</div>
                            <div class="solution-desc">Labs provide validated frameworks and consulting services</div>
                        </div>
                        <div class="solution-column" contenteditable="true">
                            <div class="solution-icon">ðŸŽ“</div>
                            <div class="solution-title">Education Pathway</div>
                            <div class="solution-desc">Structured curriculum from fundamentals to certification</div>
                        </div>
                        <div class="solution-column" contenteditable="true">
                            <div class="solution-icon">ðŸ›ï¸</div>
                            <div class="solution-title">Practice Spaces</div>
                            <div class="solution-desc">Physical and virtual Dojos for hands-on experience</div>
                        </div>
                        <div class="solution-column" contenteditable="true">
                            <div class="solution-icon">ðŸŒ</div>
                            <div class="solution-title">Global Network</div>
                            <div class="solution-desc">Society connects practitioners, researchers, investors</div>
                        </div>
                    </div>
                </div>

                <div class="onepager-section">
                    <h4>ðŸ“Š Market Opportunity</h4>

                    <div class="market-funnel">
                        <div class="market-tier tam">
                            <div class="tier-header">
                                <span class="tier-label">TAM</span>
                                <span class="tier-value" contenteditable="true" id="market-tam">$1.7T+</span>
                            </div>
                            <div class="tier-description">Total Addressable Market</div>
                            <div class="tier-definition">Digital therapeutics + XR + wellness tech</div>
                            <div class="progress-bar" style="--progress: 100%;"></div>
                        </div>

                        <div class="market-tier sam">
                            <div class="tier-header">
                                <span class="tier-label">SAM</span>
                                <span class="tier-value" contenteditable="true" id="market-sam">$15-25B</span>
                            </div>
                            <div class="tier-description">Serviceable Available Market</div>
                            <div class="tier-definition">Consciousness tech segment (psychedelics, meditation,
                                biohacking)</div>
                            <div class="progress-bar" style="--progress: 60%;"></div>
                        </div>

                        <div class="market-tier som">
                            <div class="tier-header">
                                <span class="tier-label">SOM</span>
                                <span class="tier-value" contenteditable="true" id="market-som">$1-5M</span>
                            </div>
                            <div class="tier-description">Serviceable Obtainable Market</div>
                            <div class="tier-definition">Year 1-3 realistic capture (0.02% of SAM)</div>
                            <div class="progress-bar" style="--progress: 30%;"></div>
                        </div>
                    </div>

                    <div class="market-growth">
                        <div class="cagr-display">
                            <span class="cagr-label">Compound Annual Growth Rate</span>
                            <span class="cagr-value" contenteditable="true" id="market-cagr">27.3%</span>
                            <svg viewBox="0 0 100 50" class="growth-arc">
                                <path d="M10,50 Q50,10 90,50" stroke="var(--accent-green)" stroke-width="3" fill="none"
                                    stroke-dasharray="120" stroke-dashoffset="30" />
                            </svg>
                        </div>
                        <div class="growth-note">
                            Growing 2Ã— faster than overall tech sector (14% CAGR)
                        </div>
                    </div>
                </div>

                <div class="onepager-section">
                    <h4>ðŸ“ˆ Financial Projections</h4>

                    <div class="revenue-chart-container" style="width: 100%; margin: 1.5rem 0; position: relative;">
                        <canvas id="onepager-revenue-chart" width="800" height="300" style="width: 100%; height: auto; display: block;"></canvas>
                        <button onclick="drawOnePagerRevenueChart(); alert('Chart redrawn!');" style="position: absolute; top: 10px; right: 10px; padding: 0.5rem 1rem; background: var(--accent-cyan); color: var(--bg-card); border: none; border-radius: 6px; cursor: pointer; font-size: 0.75rem; z-index: 10; font-weight: 600;">
                            ðŸ”„ Redraw Chart
                        </button>
                    </div>

                    <div class="revenue-stats-grid">
                        <div class="stat-card">
                            <span class="stat-label">Year 1</span>
                            <span class="stat-value" id="onepager-year1-revenue">$175K</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Year 2</span>
                            <span class="stat-value" id="onepager-year2-revenue">$600K</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Year 3</span>
                            <span class="stat-value" id="onepager-year3-revenue">$1.5M</span>
                        </div>
                        <div class="stat-card highlight">
                            <span class="stat-label">CAGR</span>
                            <span class="stat-value" id="revenue-cagr">193%</span>
                        </div>
                    </div>

                    <div class="assumptions-box">
                        <strong>Key Assumptions:</strong>
                        <span class="help-icon"
                            data-tooltip="Growth assumptions are conservative based on market traction"
                            style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                        <div class="assumptions-list">
                            â€¢ 12% monthly growth rate (conservative scenario)<br>
                            â€¢ Blended customer acquisition across all branches<br>
                            â€¢ 85% retention rate for recurring revenue
                        </div>
                    </div>
                </div>

                <!-- BUG 6 FIX: Make Business Model full width -->
                <div class="onepager-section full-width">
                    <h4>ðŸ’° Business Model & Unit Economics</h4>

                    <div class="revenue-streams-grid">
                        <div class="stream-card">
                            <div class="stream-icon">ðŸŒ</div>
                            <div class="stream-name">Society Memberships</div>
                            <div class="stream-price">$10-20/mo</div>
                            <div class="unit-economics">
                                <span class="ue-metric">CAC: $<span id="onepager-society-cac">25</span></span>
                                <span class="ue-metric">LTV: $<span id="onepager-society-ltv">540</span></span>
                                <span class="ue-highlight"><span id="onepager-society-ratio">21.6</span>:1</span>
                            </div>
                        </div>

                        <div class="stream-card">
                            <div class="stream-icon">ðŸ”¬</div>
                            <div class="stream-name">Labs Consulting</div>
                            <div class="stream-price">$175/hr+</div>
                            <div class="unit-economics">
                                <span class="ue-metric">CAC: $<span id="onepager-labs-cac">500</span></span>
                                <span class="ue-metric">LTV: $<span id="onepager-labs-ltv">15000</span></span>
                                <span class="ue-highlight"><span id="onepager-labs-ratio">30.0</span>:1</span>
                            </div>
                        </div>

                        <div class="stream-card">
                            <div class="stream-icon">ðŸŽ“</div>
                            <div class="stream-name">Academy Courses</div>
                            <div class="stream-price">$99-2,499</div>
                            <div class="unit-economics">
                                <span class="ue-metric">CAC: $<span id="onepager-academy-cac">75</span></span>
                                <span class="ue-metric">LTV: $<span id="onepager-academy-ltv">450</span></span>
                                <span class="ue-highlight"><span id="onepager-academy-ratio">6.0</span>:1</span>
                            </div>
                        </div>

                        <div class="stream-card">
                            <div class="stream-icon">ðŸ›ï¸</div>
                            <div class="stream-name">Dojo Sessions</div>
                            <div class="stream-price">$50-300</div>
                            <div class="unit-economics">
                                <span class="ue-metric">CAC: $<span id="onepager-dojos-cac">100</span></span>
                                <span class="ue-metric">LTV: $<span id="onepager-dojos-ltv">1800</span></span>
                                <span class="ue-highlight"><span id="onepager-dojos-ratio">18.0</span>:1</span>
                            </div>
                        </div>
                    </div>

                    <div class="economics-summary">
                        <div class="summary-stat">
                            <span class="summary-label">Blended LTV:CAC Ratio</span>
                            <span class="summary-value">14.5:1</span>
                        </div>
                        <div class="summary-note">
                            Target: >3:1 (Good) | >6:1 (Excellent) | Ours: <strong>Excellent</strong>
                        </div>
                    </div>

                    <div class="why-model-works">
                        <strong>Why This Model Works:</strong>
                        <ul>
                            <li>Multiple revenue streams reduce risk</li>
                            <li>Network effects: Society members become Academy students and Labs clients</li>
                            <li>High-margin digital products (70%+) subsidize community building</li>
                            <li>B2B consulting provides immediate cash flow</li>
                        </ul>
                    </div>
                </div>

                <div class="onepager-section full-width">
                    <h4>âš¡ Competitive Landscape</h4>

                    <div class="comparison-intro">
                        We compete with point solutions, but win through ecosystem integration
                    </div>

                    <!-- BUG 8 FIX: Make competitive table editable -->
                    <div class="comparison-table-container">
                        <table class="comparison-table" id="competitive-table">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th class="highlight-col">
                                        <div class="company-header">
                                            <span contenteditable="true" class="editable-company-name">Cyberdelic
                                                Nexus</span>
                                            <span class="badge-you">You</span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="company-header" contenteditable="true"
                                            class="editable-company-name">Education Platforms</div>
                                        <div class="company-examples" contenteditable="true">Udemy, Coursera</div>
                                    </th>
                                    <th>
                                        <div class="company-header" contenteditable="true"
                                            class="editable-company-name">XR Studios</div>
                                        <div class="company-examples" contenteditable="true">Tripp, FlowVR</div>
                                    </th>
                                    <th>
                                        <div class="company-header" contenteditable="true"
                                            class="editable-company-name">Wellness Apps</div>
                                        <div class="company-examples" contenteditable="true">Calm, Headspace</div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="competitive-tbody">
                                <tr>
                                    <td contenteditable="true">Full-Stack Ecosystem</td>
                                    <td><input type="text" class="competitor-cell" value="âœ“"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="âœ—"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="âœ—"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="âœ—"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                </tr>
                                <tr>
                                    <td contenteditable="true">Research + Education + Practice</td>
                                    <td><input type="text" class="competitor-cell" value="âœ“"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="Education only"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="Practice only"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="Practice only"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                </tr>
                                <tr>
                                    <td contenteditable="true">Network Effects</td>
                                    <td><input type="text" class="competitor-cell" value="âœ“"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="Limited"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="âœ—"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="âœ—"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                </tr>
                                <tr>
                                    <td contenteditable="true">B2B Revenue</td>
                                    <td><input type="text" class="competitor-cell" value="âœ“"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="Enterprise only"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="âœ—"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="âœ“"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                </tr>
                                <tr>
                                    <td contenteditable="true">Proprietary IP/Frameworks</td>
                                    <td><input type="text" class="competitor-cell" value="âœ“ XD Canvas"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="âœ—"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="Proprietary content"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="âœ—"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                </tr>
                                <tr>
                                    <td contenteditable="true">Community-Driven</td>
                                    <td><input type="text" class="competitor-cell" value="âœ“"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="âœ—"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="âœ—"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                    <td><input type="text" class="competitor-cell" value="Limited"
                                            style="width: 100%; text-align: center; background: transparent; border: none; color: inherit;">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="competitive-moat">
                        <strong>Our Defensible Moat:</strong>
                        The more members join Society â†’ More students enroll in Academy â†’
                        More Labs clients seek consulting â†’ More Dojo locations open â†’
                        Stronger network effects attract more members (flywheel)
                    </div>
                </div>

                <div class="onepager-section full-width">
                    <h4>ðŸŽ¯ 18-Month Roadmap</h4>

                    <!-- BUG 4 FIX: Make roadmap editable -->
                    <div id="roadmap-milestones-container" class="timeline-container">
                        <!-- Milestones will be rendered here by JavaScript -->
                    </div>
                    <div style="text-align: center; margin-top: 1rem;">
                        <button onclick="addRoadmapMilestone()" class="btn-secondary"
                            style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                            âž• Add Milestone
                        </button>
                    </div>
                </div>

                <!-- BUG 6 FIX: Make Use of Funds full width -->
                <div class="onepager-section full-width">
                    <h4>ðŸ’¼ Use of Funds</h4>

                    <div class="raise-amount-display">
                        Deployment of <strong id="raise-amount-display">$500,000</strong> Seed Round
                    </div>

                    <div class="use-of-funds-grid">
                        <div class="fund-column">
                            <div class="fund-icon">ðŸ‘¥</div>
                            <div class="fund-category">Team Building</div>
                            <div class="fund-percentage">40%</div>
                            <div class="fund-amount">$200,000</div>
                            <ul class="fund-details">
                                <li>2 FT engineers ($160K)</li>
                                <li>1 designer ($60K)</li>
                                <li>Contractor pool ($30K)</li>
                            </ul>
                        </div>

                        <div class="fund-column">
                            <div class="fund-icon">ðŸ› ï¸</div>
                            <div class="fund-category">Product Development</div>
                            <div class="fund-percentage">25%</div>
                            <div class="fund-amount">$125,000</div>
                            <ul class="fund-details">
                                <li>Platform development ($70K)</li>
                                <li>XR prototypes ($35K)</li>
                                <li>Infrastructure/hosting ($20K)</li>
                            </ul>
                        </div>

                        <div class="fund-column">
                            <div class="fund-icon">ðŸ“¢</div>
                            <div class="fund-category">Marketing & Growth</div>
                            <div class="fund-percentage">20%</div>
                            <div class="fund-amount">$100,000</div>
                            <ul class="fund-details">
                                <li>Community building ($40K)</li>
                                <li>Content marketing ($35K)</li>
                                <li>Paid acquisition ($25K)</li>
                            </ul>
                        </div>

                        <div class="fund-column">
                            <div class="fund-icon">âš™ï¸</div>
                            <div class="fund-category">Operations</div>
                            <div class="fund-percentage">15%</div>
                            <div class="fund-amount">$75,000</div>
                            <ul class="fund-details">
                                <li>Legal & compliance ($30K)</li>
                                <li>Office/tools ($25K)</li>
                                <li>Events & travel ($20K)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="runway-projection">
                        ðŸ’¡ <strong>Extends runway to:</strong>
                        <span id="extended-runway">18 months</span> at current burn rate,
                        reaching <strong>break-even</strong> before next fundraise
                    </div>
                </div>
            </div>

            <div class="onepager-section" style="margin-top: 1.5rem;">
                <h4>ðŸ“‹ Investment Terms Summary</h4>

                <div class="terms-grid">
                    <div class="term-item">
                        <div class="term-label">
                            Raise Amount
                            <span class="help-icon" data-tooltip="Total capital being raised in this seed round"
                                style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                        </div>
                        <div class="term-value highlight-cyan">$500,000</div>
                    </div>

                    <div class="term-item">
                        <div class="term-label">
                            Valuation Cap
                            <span class="help-icon"
                                data-tooltip="Maximum company value for SAFE conversion. Lower cap = more equity for early investors"
                                style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                        </div>
                        <div class="term-value highlight-purple">$2,000,000</div>
                    </div>

                    <div class="term-item">
                        <div class="term-label">
                            Instrument
                            <span class="help-icon"
                                data-tooltip="SAFE (no immediate dilution) or Priced Equity Round (immediate dilution)"
                                style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                        </div>
                        <div class="term-value highlight-green">SAFE / Priced Equity</div>
                    </div>

                    <div class="term-item">
                        <div class="term-label">
                            Runway Extension
                            <span class="help-icon" data-tooltip="Additional months of operation this funding provides"
                                style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                        </div>
                        <div class="term-value highlight-orange">18 months</div>
                    </div>

                    <div class="term-item">
                        <div class="term-label">
                            Investor Dilution
                            <span class="help-icon"
                                data-tooltip="Percentage of company owned by investors after this round"
                                style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                        </div>
                        <div class="term-value">20%</div>
                        <div class="term-note">Within seed range (15-35%)</div>
                    </div>

                    <div class="term-item">
                        <div class="term-label">
                            Minimum Investment
                            <span class="help-icon" data-tooltip="Minimum check size to participate in this round"
                                style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                        </div>
                        <div class="term-value">$25,000</div>
                    </div>
                </div>

                <div class="investment-footnotes">
                    <p><strong>Key Terms:</strong></p>
                    <ul>
                        <li><strong>SAFE:</strong> Simple Agreement for Future Equity - no immediate dilution, converts
                            at next priced round</li>
                        <li><strong>Valuation Cap:</strong> Maximum valuation for SAFE conversion, protecting early
                            investors</li>
                        <li><strong>Pro Rata Rights:</strong> Investors can maintain ownership % in future rounds</li>
                        <li><strong>Board Seat:</strong> Lead investor ($100K+) eligible for observer seat</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- ==========================================
             CAPITAL RAISE SECTION
             ========================================== -->
        <section id="capital" class="section">
            <div class="section-header">
                <h1 class="section-title">Capital Raising Model</h1>
                <p class="section-subtitle">Calculate funding needs, dilution, and compare SAFE vs Equity</p>
            </div>

            <!-- Fundraising Intent Selector -->
            <div class="raise-intent-selector">
                <label>What's your fundraising intent?</label>
                <select id="raise-intent">
                    <option value="">Select your goal...</option>
                    <option value="survival">Survival: Reach break-even or prove minimum viability</option>
                    <option value="momentum">Momentum: Prove product-market fit and initial traction</option>
                    <option value="acceleration">Acceleration: Scale a proven model with clear unit economics</option>
                </select>
            </div>

            <div class="friction-notice">
                âš ï¸ <strong>Remember:</strong> Lower dilution does not mean lower risk.
                Raising too little often leads to bridge rounds at worse terms and higher total dilution.
                The goal is reaching milestones that unlock the next round, not minimizing dilution at all costs.
            </div>

            <div class="grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-title-icon">&#128176;</div>
                            Funding Requirements Calculator
                        </div>
                    </div>

                    <div
                        style="padding: 0.75rem 1rem; background: rgba(0, 212, 255, 0.05); border-left: 3px solid var(--accent-cyan); border-radius: 8px; margin-bottom: 1.5rem; font-size: 0.875rem; line-height: 1.5;">
                        <strong>How it works:</strong> Calculate runway based on your burn rate and available cash. This
                        tells you how much capital you need to reach key milestones.
                    </div>

                    <div class="input-group">
                        <label class="input-label">
                            Monthly Burn Rate
                            <span class="help-icon"
                                data-tooltip="Fixed costs + Variable costs per month. See Operations tab for breakdown."
                                style="display: inline-flex; width: 18px; height: 18px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 12px; align-items: center; justify-content: center; margin-left: 6px; font-weight: 700;">?</span>
                        </label>
                        <input type="number" class="input-field" id="monthly-burn" value="28000" placeholder="$28,000">
                    </div>

                    <div class="input-group">
                        <label class="input-label">
                            Current Cash
                            <span class="help-icon"
                                data-tooltip="Available funds in bank accounts. Synced with Operations tab."
                                style="display: inline-flex; width: 18px; height: 18px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 12px; align-items: center; justify-content: center; margin-left: 6px; font-weight: 700;">?</span>
                        </label>
                        <input type="number" class="input-field" id="current-cash" value="25000" placeholder="$25,000">
                    </div>

                    <div class="range-container">
                        <div class="range-header">
                            <span class="range-label">
                                Target Runway
                                <span class="help-icon"
                                    data-tooltip="Months of operation your funding will support. Aim for 18-24 months."
                                    style="display: inline-flex; width: 18px; height: 18px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 12px; align-items: center; justify-content: center; margin-left: 6px; font-weight: 700;">?</span>
                            </span>
                            <span class="range-value" id="runway-target-display">18 months</span>
                        </div>
                        <input type="range" class="range-slider" id="runway-target" min="6" max="36" value="18">
                    </div>

                    <div class="divider"></div>

                    <div class="summary-row">
                        <span class="summary-label">Current Runway</span>
                        <span class="summary-value" id="runway-months">13 months</span>
                    </div>

                    <div class="summary-row">
                        <span class="summary-label">Total Funding Needed</span>
                        <span class="summary-value" id="funding-needed"
                            style="color: var(--accent-cyan);">$479,000</span>
                    </div>

                    <div id="capital-warnings" style="margin-top: 1rem;"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-title-icon">&#128200;</div>
                            Equity Dilution Scenarios
                        </div>
                    </div>

                    <div
                        style="padding: 0.75rem 1rem; background: rgba(0, 212, 255, 0.05); border-left: 3px solid var(--accent-cyan); border-radius: 8px; margin-bottom: 1rem; font-size: 0.875rem; line-height: 1.5;">
                        <strong>Modeling ownership:</strong> These are hypothetical scenarios. Real investor terms
                        depend on traction, market conditions, and negotiationâ€”not just numbers.
                    </div>

                    <div
                        style="padding: 0.75rem 1rem; background: rgba(168, 85, 247, 0.1); border-left: 3px solid var(--accent-purple); border-radius: 8px; margin-bottom: 1.5rem; font-size: 0.875rem; line-height: 1.5;">
                        &#128200; <strong>Industry Benchmark:</strong> Seed rounds typically involve 15-35% founder
                        dilution
                    </div>

                    <div class="input-group">
                        <label class="input-label">
                            Pre-Money Valuation
                            <span class="help-icon"
                                data-tooltip="Company value BEFORE investment. Formula: Post-money - Investment"
                                style="display: inline-flex; width: 18px; height: 18px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 12px; align-items: center; justify-content: center; margin-left: 6px; font-weight: 700;">?</span>
                        </label>
                        <input type="number" class="input-field" id="pre-money" value="2000000"
                            placeholder="$2,000,000">
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>
                                    Raise Amount
                                    <span class="help-icon" data-tooltip="Total capital being raised from investors"
                                        style="display: inline-flex; width: 16px; height: 16px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 11px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700; vertical-align: middle;">?</span>
                                </th>
                                <th>
                                    Investor %
                                    <span class="help-icon"
                                        data-tooltip="Percentage of company owned by investors. Formula: Investment Ã· Post-money valuation"
                                        style="display: inline-flex; width: 16px; height: 16px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 11px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700; vertical-align: middle;">?</span>
                                </th>
                                <th>
                                    Founder %
                                    <span class="help-icon"
                                        data-tooltip="Your remaining ownership after dilution and option pool. Formula: 100% - Investor % - Option Pool %"
                                        style="display: inline-flex; width: 16px; height: 16px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 11px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700; vertical-align: middle;">?</span>
                                </th>
                                <th>
                                    @ $10M Exit
                                    <span class="help-icon"
                                        data-tooltip="Founder payout at $10M exit. Formula: Founder % Ã— $10,000,000"
                                        style="display: inline-flex; width: 16px; height: 16px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 11px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700; vertical-align: middle;">?</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="dilution-table"></tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#9878;</div>
                        SAFE vs Equity Comparison
                    </div>
                </div>

                <div class="grid-2" style="margin-bottom: 1.5rem;">
                    <div class="input-group">
                        <label class="input-label">
                            Investment Amount
                            <span class="help-icon" data-tooltip="Total amount investor is committing in this scenario"
                                style="display: inline-flex; width: 18px; height: 18px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 12px; align-items: center; justify-content: center; margin-left: 6px; font-weight: 700;">?</span>
                        </label>
                        <input type="number" class="input-field" id="investment-amount" value="500000"
                            placeholder="$500,000">
                    </div>
                    <div class="input-group">
                        <label class="input-label">
                            SAFE Valuation Cap
                            <span class="help-icon"
                                data-tooltip="Maximum valuation for SAFE conversion. Lower cap = more equity for investor"
                                style="display: inline-flex; width: 18px; height: 18px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 12px; align-items: center; justify-content: center; margin-left: 6px; font-weight: 700;">?</span>
                        </label>
                        <input type="number" class="input-field" id="safe-cap" value="2000000" placeholder="$2,000,000">
                    </div>
                </div>

                <div class="comparison-grid">
                    <div class="comparison-card safe">
                        <div
                            style="display: inline-block; background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple)); color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.5rem;">
                            âœ¨ Founder-Friendly</div>
                        <div class="comparison-header">
                            <span>&#9889;</span> SAFE Note
                        </div>

                        <div
                            style="padding: 0.75rem; background: rgba(16, 185, 129, 0.1); border-left: 3px solid var(--accent-green); border-radius: 6px; margin: 1rem 0; font-size: 0.875rem; line-height: 1.5;">
                            <strong>Key Feature:</strong> Dilution is <em>deferred</em> until a future priced round.
                            Your ownership stays at 100% until the SAFE converts.
                        </div>

                        <div class="safe-warning">
                            <strong>SAFE delays dilution, it does not remove it.</strong><br>
                            You will dilute at the next priced round, potentially at a worse valuation if you miss
                            milestones.
                            Multiple SAFE rounds can create complex cap tables and dilute you more than a single equity
                            round.
                        </div>

                        <div class="comparison-item">
                            <span class="comparison-label">
                                Immediate Dilution
                                <span class="help-icon"
                                    data-tooltip="No dilution until SAFE converts at next funding round"
                                    style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                            </span>
                            <span class="comparison-value" style="color: var(--accent-green);">0%</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">
                                Legal Costs
                                <span class="help-icon" data-tooltip="Standard SAFE template from Y Combinator"
                                    style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                            </span>
                            <span class="comparison-value">$500 - $2,000</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">
                                Time to Close
                                <span class="help-icon" data-tooltip="Minimal paperwork and negotiation"
                                    style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                            </span>
                            <span class="comparison-value">1-2 weeks</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">
                                Board Seat
                                <span class="help-icon" data-tooltip="Less investor control initially"
                                    style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                            </span>
                            <span class="comparison-value">Usually No</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">
                                Ownership at Conversion
                                <span class="help-icon"
                                    data-tooltip="Converts at cap or next round price, whichever is lower"
                                    style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                            </span>
                            <span class="comparison-value" id="safe-ownership">20.0%</span>
                        </div>
                    </div>
                    <div class="comparison-card equity">
                        <div class="comparison-header">
                            <span>&#128220;</span> Priced Equity
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">
                                Immediate Dilution
                                <span class="help-icon" data-tooltip="Ownership percentage set immediately"
                                    style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                            </span>
                            <span class="comparison-value" id="equity-dilution"
                                style="color: var(--accent-orange);">20.0%</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">
                                Legal Costs
                                <span class="help-icon"
                                    data-tooltip="Requires term sheet, stock purchase agreement, and more"
                                    style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                            </span>
                            <span class="comparison-value">$10,000 - $25,000</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">
                                Time to Close
                                <span class="help-icon"
                                    data-tooltip="Due diligence, term negotiation, legal documentation"
                                    style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                            </span>
                            <span class="comparison-value">4-8 weeks</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">
                                Board Seat
                                <span class="help-icon" data-tooltip="Investors often negotiate board representation"
                                    style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                            </span>
                            <span class="comparison-value">Often Yes</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">
                                Ownership
                                <span class="help-icon"
                                    data-tooltip="Fixed percentage determined by pre-money valuation"
                                    style="display: inline-flex; width: 14px; height: 14px; background: var(--accent-cyan); color: var(--bg-card); border-radius: 50%; cursor: help; font-size: 10px; align-items: center; justify-content: center; margin-left: 4px; font-weight: 700;">?</span>
                            </span>
                            <span class="comparison-value" id="equity-ownership">20.0%</span>
                        </div>
                    </div>
                </div>

                <div
                    style="margin-top: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 12px;">
                    <h4 style="margin-bottom: 1rem; color: var(--accent-purple);">ðŸ’¡ Example: $500K Investment with $2M
                        Cap</h4>
                    <div class="grid-2" style="gap: 1.5rem;">
                        <div>
                            <strong style="color: var(--accent-green);">SAFE Scenario:</strong>
                            <ul style="margin: 0.75rem 0; padding-left: 1.5rem; line-height: 1.8; font-size: 0.875rem;">
                                <li>No dilution today - founder owns 100%</li>
                                <li>If next round at $5M pre-money: Investor gets 10% (500K Ã· 5M)</li>
                                <li>If next round at $1M pre-money: Cap protects investor, gets 25% (500K Ã· 2M)</li>
                                <li>Founder maintains control until Series A</li>
                            </ul>
                        </div>
                        <div>
                            <strong style="color: var(--accent-orange);">Priced Equity Scenario:</strong>
                            <ul style="margin: 0.75rem 0; padding-left: 1.5rem; line-height: 1.8; font-size: 0.875rem;">
                                <li>20% dilution immediately (500K Ã· 2.5M post-money)</li>
                                <li>Post-money valuation: $2.5M</li>
                                <li>Founder ownership: 70% (after 10% option pool)</li>
                                <li>Board seat likely, protective provisions</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==========================================
             REVENUE SECTION
             ========================================== -->
        <section id="revenue" class="section">
            <div class="section-header">
                <h1 class="section-title">Revenue Projections</h1>
                <p class="section-subtitle">Model revenue by branch with CAC/LTV analysis</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#127760;</div>
                        Cyberdelic Society
                    </div>
                    <span class="status-badge success">Active</span>
                </div>

                <div class="grid-3">
                    <div class="input-group">
                        <label class="input-label">Cybernaut (Free)</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-cybernaut" value="0"
                                placeholder="$">
                            <input type="number" class="input-field qty society-member" data-tier="cybernaut"
                                data-price-id="price-cybernaut" value="500" placeholder="Members">
                        </div>
                        <div class="input-hint">Price /mo | Members</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Reality Hacker ($10/mo)</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-reality-hacker" value="10"
                                placeholder="$">
                            <input type="number" class="input-field qty society-member" data-tier="reality-hacker"
                                data-price-id="price-reality-hacker" value="300" placeholder="Members">
                        </div>
                        <div class="input-hint">Price /mo | Members</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Reality Weaver ($20/mo)</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-reality-weaver" value="20"
                                placeholder="$">
                            <input type="number" class="input-field qty society-member" data-tier="reality-weaver"
                                data-price-id="price-reality-weaver" value="100" placeholder="Members">
                        </div>
                        <div class="input-hint">Price /mo | Members</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Lifetime Membership ($99 one-time)</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-lifetime" value="99"
                                placeholder="$">
                            <input type="number" class="input-field qty" id="society-lifetime" value="25"
                                placeholder="Members">
                        </div>
                        <div class="input-hint">Price /mo | Members</div>
                    </div>
                    <div class="input-group" style="grid-column: 1 / -1;">
                        <label class="input-label">Events Tracking</label>
                        <div style="display: grid; gap: 0.5rem; margin-top: 0.5rem;">
                            <div
                                style="display: grid; grid-template-columns: 2fr 1fr 1fr 0.5fr; gap: 0.5rem; font-size: 0.75rem; color: var(--text-secondary); padding: 0 0.5rem;">
                                <div>Event Name</div>
                                <div style="text-align: center;">Estimated</div>
                                <div style="text-align: center;">Actual</div>
                                <div></div>
                            </div>
                            <div id="society-events-list">
                                <div class="event-item" data-event-id="1"
                                    style="display: grid; grid-template-columns: 2fr 1fr 1fr 0.5fr; gap: 0.5rem; align-items: center;">
                                    <input type="text" class="input-field event-name" value="Monthly Gathering"
                                        placeholder="Event name">
                                    <input type="number" class="input-field event-estimated" value="1500"
                                        placeholder="Estimated $">
                                    <input type="number" class="input-field event-actual" value="1500"
                                        placeholder="Actual $">
                                    <button class="btn-icon remove-event" title="Remove">&#10005;</button>
                                </div>
                            </div>
                            <div class="add-course-row">
                                <button class="btn-icon add" id="add-event" title="Add Event">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Merch Revenue/mo</label>
                        <input type="number" class="input-field" id="society-merch" value="850">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Customer Acquisition Cost (CAC)</label>
                        <input type="number" class="input-field" id="society-cac" value="25" min="0" step="1"
                            placeholder="$">
                        <div class="input-hint">Marketing spend per new member</div>
                    </div>
                </div>

                <div class="summary-row">
                    <span class="summary-label">Society Monthly Revenue</span>
                    <span class="summary-value" id="society-total">$0</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#129514;</div>
                        Cyberdelic Labs
                    </div>
                    <span class="status-badge warning">Building</span>
                </div>

                <div class="input-group">
                    <label class="input-label">Consulting Hours/mo</label>
                    <div class="dual-input">
                        <input type="number" class="input-field price" id="price-consulting" value="175"
                            placeholder="$/hr">
                        <input type="number" class="input-field qty" id="labs-consulting-hours" value="40"
                            placeholder="Hours">
                    </div>
                    <div class="input-hint">Rate /hr | Hours</div>
                </div>

                <div class="input-label" style="margin-top: 1.5rem; margin-bottom: 0.75rem;">R&D Projects & Client Work
                </div>
                <div
                    style="display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; padding: 0.5rem 0; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600;">
                    <span>Project/Client Name</span>
                    <span>Value</span>
                    <span>Type</span>
                    <span></span>
                </div>
                <div id="labs-project-list">
                    <div class="course-item" data-project-id="1"
                        style="display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; align-items: center;">
                        <input type="text" class="input-field project-name" value="XR Wellness Platform"
                            placeholder="Project name">
                        <input type="number" class="input-field project-value" value="5000" placeholder="$">
                        <select class="input-field project-type"
                            style="padding: 0.65rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                            <option value="monthly">Monthly</option>
                            <option value="project">Per Project</option>
                        </select>
                        <button class="btn-icon remove-project" title="Remove">&#10005;</button>
                    </div>
                    <div class="course-item" data-project-id="2"
                        style="display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; align-items: center;">
                        <input type="text" class="input-field project-name" value="Consciousness Tech Consulting"
                            placeholder="Project name">
                        <input type="number" class="input-field project-value" value="3000" placeholder="$">
                        <select class="input-field project-type"
                            style="padding: 0.65rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                            <option value="monthly">Monthly</option>
                            <option value="project">Per Project</option>
                        </select>
                        <button class="btn-icon remove-project" title="Remove">&#10005;</button>
                    </div>
                </div>
                <button class="btn-add" id="add-project">+ Add Project</button>

                <div class="input-label" style="margin-top: 1.5rem; margin-bottom: 0.75rem;">Grants & Partnerships</div>
                <div
                    style="display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; padding: 0.5rem 0; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600;">
                    <span>Grant/Partner Name</span>
                    <span>Value</span>
                    <span>Type</span>
                    <span></span>
                </div>
                <div id="labs-grant-list">
                    <div class="course-item" data-grant-id="1"
                        style="display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; align-items: center;">
                        <input type="text" class="input-field grant-name" value="Research Grant - Immersive Tech"
                            placeholder="Grant/partner name">
                        <input type="number" class="input-field grant-value" value="2000" placeholder="$">
                        <select class="input-field grant-type"
                            style="padding: 0.65rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                            <option value="monthly">Monthly</option>
                            <option value="project">Per Project</option>
                            <option value="annual">Annual (Ã·12)</option>
                        </select>
                        <button class="btn-icon remove-grant" title="Remove">&#10005;</button>
                    </div>
                    <div class="course-item" data-grant-id="2"
                        style="display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; align-items: center;">
                        <input type="text" class="input-field grant-name" value="Partnership - XR Foundation"
                            placeholder="Grant/partner name">
                        <input type="number" class="input-field grant-value" value="2000" placeholder="$">
                        <select class="input-field grant-type"
                            style="padding: 0.65rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                            <option value="monthly">Monthly</option>
                            <option value="project">Per Project</option>
                            <option value="annual">Annual (Ã·12)</option>
                        </select>
                        <button class="btn-icon remove-grant" title="Remove">&#10005;</button>
                    </div>
                </div>
                <button class="btn-add" id="add-grant">+ Add Grant/Partnership</button>

                <div class="input-group" style="margin-top: 1.5rem;">
                    <label class="input-label">Customer Acquisition Cost (CAC)</label>
                    <input type="number" class="input-field" id="labs-cac" value="500" min="0" step="10"
                        placeholder="$">
                    <div class="input-hint">Marketing/sales spend per new client</div>
                </div>

                <div class="summary-row" style="margin-top: 1.5rem;">
                    <span class="summary-label">Labs Monthly Revenue</span>
                    <span class="summary-value" id="labs-total">$0</span>
                </div>
                <div class="metric-row" style="margin-top: 0.5rem;">
                    <span class="metric-label">Active Projects</span>
                    <span class="metric-value" id="labs-projects-count">0</span>
                </div>
                <div class="metric-row" style="margin-top: 0.5rem;">
                    <span class="metric-label">Active Grants/Partnerships</span>
                    <span class="metric-value" id="labs-grants-count">0</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#127891;</div>
                        Cyberdelic Academy
                    </div>
                    <span class="status-badge success">Active</span>
                </div>

                <div class="input-label" style="margin-bottom: 0.75rem;">Individual Courses</div>
                <div class="course-header">
                    <span>Course Name</span>
                    <span>Price</span>
                    <span>Sales/mo</span>
                    <span></span>
                </div>
                <div class="course-list" id="course-list">
                    <div class="course-item" data-course-id="1">
                        <input type="text" class="input-field course-name" value="Foundations of Cyberdelics"
                            placeholder="Course name">
                        <input type="number" class="input-field course-price" value="99" placeholder="$">
                        <input type="number" class="input-field course-sales" value="15" placeholder="Qty">
                        <button class="btn-icon remove-course" title="Remove">&#10005;</button>
                    </div>
                    <div class="course-item" data-course-id="2">
                        <input type="text" class="input-field course-name" value="XR Experience Design"
                            placeholder="Course name">
                        <input type="number" class="input-field course-price" value="299" placeholder="$">
                        <input type="number" class="input-field course-sales" value="8" placeholder="Qty">
                        <button class="btn-icon remove-course" title="Remove">&#10005;</button>
                    </div>
                    <div class="course-item" data-course-id="3">
                        <input type="text" class="input-field course-name" value="Facilitator Certification"
                            placeholder="Course name">
                        <input type="number" class="input-field course-price" value="999" placeholder="$">
                        <input type="number" class="input-field course-sales" value="3" placeholder="Qty">
                        <button class="btn-icon remove-course" title="Remove">&#10005;</button>
                    </div>
                </div>
                <div class="add-course-row">
                    <button class="btn-icon add" id="add-course" title="Add Course">+</button>
                </div>

                <div class="divider"></div>

                <div class="grid-3">
                    <div class="input-group">
                        <label class="input-label">Masterclasses</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-cert" value="149" placeholder="$">
                            <input type="number" class="input-field qty" id="academy-certs" value="20"
                                placeholder="Attendees">
                        </div>
                        <div class="input-hint">Avg price | Attendees/mo</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Workshops</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-workshop" value="75"
                                placeholder="$">
                            <input type="number" class="input-field qty" id="academy-workshops" value="35"
                                placeholder="Attendees">
                        </div>
                        <div class="input-hint">Avg price | Attendees/mo</div>
                    </div>
                </div>

                <div class="divider"></div>

                <div class="card-subtitle" style="margin-bottom: 1rem;">Mentorship Program</div>

                <div class="grid-3">
                    <div class="input-group">
                        <label class="input-label">Price per Session</label>
                        <input type="number" class="input-field" id="mentorship-price" value="500" min="0"
                            placeholder="$">
                        <div class="input-hint">Price per mentorship session</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Sessions/Month</label>
                        <input type="number" class="input-field" id="mentorship-count" value="10" min="0"
                            placeholder="Sessions">
                        <div class="input-hint">Monthly mentorship sessions</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Platform Fee %</label>
                        <input type="number" class="input-field" id="mentorship-split" value="30" min="0" max="100"
                            placeholder="%">
                        <div class="input-hint"
                            style="margin-top: 0.5rem; display: flex; gap: 0.5rem; justify-content: space-between;">
                            <span>Platform: <strong id="platform-share">$150</strong></span>
                            <span>Mentor: <strong id="mentor-share">$350</strong></span>
                        </div>
                    </div>
                </div>

                <div class="input-group" style="margin-top: 1rem;">
                    <label class="input-label">Customer Acquisition Cost (CAC)</label>
                    <input type="number" class="input-field" id="academy-cac" value="75" min="0" step="5"
                        placeholder="$">
                    <div class="input-hint">Marketing spend per new student</div>
                </div>

                <div class="summary-row">
                    <span class="summary-label">Academy Monthly Revenue</span>
                    <span class="summary-value" id="academy-total">$0</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#129351;</div>
                        Cyberdelic Dojos
                    </div>
                    <span class="status-badge warning">Planning</span>
                </div>

                <div class="grid-3">
                    <div class="input-group">
                        <label class="input-label">Monthly Memberships</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-dojo-membership" value="150"
                                placeholder="$">
                            <input type="number" class="input-field qty" id="dojos-memberships" value="25"
                                placeholder="Members">
                        </div>
                        <div class="input-hint">Price /mo | Members</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">XR Sessions/mo</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-xr-session" value="35"
                                placeholder="$">
                            <input type="number" class="input-field qty" id="dojos-xr-sessions" value="100"
                                placeholder="Sessions">
                        </div>
                        <div class="input-hint">Avg price | Sessions</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Retreat Packages/mo</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-training" value="500"
                                placeholder="$">
                            <input type="number" class="input-field qty" id="dojos-training" value="8"
                                placeholder="Packages">
                        </div>
                        <div class="input-hint">Avg price | Packages</div>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label">Customer Acquisition Cost (CAC)</label>
                    <input type="number" class="input-field" id="dojos-cac" value="100" min="0" step="10"
                        placeholder="$">
                    <div class="input-hint">Marketing spend per new member</div>
                </div>

                <div class="summary-row">
                    <span class="summary-label">Dojos Monthly Revenue</span>
                    <span class="summary-value" id="dojos-total">$0</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128200;</div>
                        CAC & LTV Analysis
                    </div>
                </div>

                <table class="data-table unit-economics-table">
                    <thead>
                        <tr>
                            <th>Branch</th>
                            <th>CAC</th>
                            <th>LTV</th>
                            <th>LTV:CAC</th>
                            <th>Payback</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Society</td>
                            <td class="highlight" id="cac-society">$25</td>
                            <td id="ltv-society">$540</td>
                            <td id="ratio-society">21.6:1</td>
                            <td id="payback-society">0.6 mo</td>
                            <td id="status-society"><span class="status-badge success">Excellent</span></td>
                        </tr>
                        <tr>
                            <td>Labs</td>
                            <td class="highlight" id="cac-labs">$500</td>
                            <td id="ltv-labs">$15,000</td>
                            <td id="ratio-labs">30.0:1</td>
                            <td id="payback-labs">0.4 mo</td>
                            <td id="status-labs"><span class="status-badge success">Excellent</span></td>
                        </tr>
                        <tr>
                            <td>Academy</td>
                            <td class="highlight" id="cac-academy">$75</td>
                            <td id="ltv-academy">$450</td>
                            <td id="ratio-academy">6.0:1</td>
                            <td id="payback-academy">0.5 mo</td>
                            <td id="status-academy"><span class="status-badge success">Good</span></td>
                        </tr>
                        <tr>
                            <td>Dojos</td>
                            <td class="highlight" id="cac-dojos">$100</td>
                            <td id="ltv-dojos">$1,800</td>
                            <td id="ratio-dojos">18.0:1</td>
                            <td id="payback-dojos">0.7 mo</td>
                            <td id="status-dojos"><span class="status-badge success">Excellent</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- ==========================================
             OPERATIONS SECTION
             ========================================== -->
        <section id="operations" class="section">
            <div class="section-header">
                <h1 class="section-title">Operational Budget</h1>
                <p class="section-subtitle">Track fixed vs variable costs and monitor burn rate</p>
            </div>

            <div class="grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-title-icon">&#128274;</div>
                            Fixed Costs (Monthly)
                        </div>
                    </div>

                    <div style="display: grid; gap: 0.5rem;">
                        <div id="fixed-costs-list">
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Salaries & Contractors"
                                    placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="12000" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Office / Coworking"
                                    placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="1500" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Software & Tools"
                                    placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="1200" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Insurance"
                                    placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="400" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Legal & Accounting"
                                    placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="800" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Estonian OU Maintenance"
                                    placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="200" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="US LLC Costs"
                                    placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="100" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                        </div>
                        <div class="add-course-row">
                            <button class="btn-icon add" id="add-fixed-cost" title="Add Fixed Cost">+</button>
                        </div>
                    </div>

                    <div class="summary-row">
                        <span class="summary-label">Total Fixed Costs</span>
                        <span class="summary-value" id="total-fixed">$16,200</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-title-icon">&#128202;</div>
                            Variable Costs (Monthly)
                        </div>
                    </div>

                    <div style="display: grid; gap: 0.5rem;">
                        <div id="variable-costs-list">
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field variable-cost-name" value="Marketing & Ads"
                                    placeholder="Cost name">
                                <input type="number" class="input-field variable-cost-value" value="4000"
                                    placeholder="$">
                                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field variable-cost-name" value="Event Production"
                                    placeholder="Cost name">
                                <input type="number" class="input-field variable-cost-value" value="2500"
                                    placeholder="$">
                                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field variable-cost-name" value="Content Creation"
                                    placeholder="Cost name">
                                <input type="number" class="input-field variable-cost-value" value="1500"
                                    placeholder="$">
                                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field variable-cost-name" value="Travel"
                                    placeholder="Cost name">
                                <input type="number" class="input-field variable-cost-value" value="1500"
                                    placeholder="$">
                                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item"
                                style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field variable-cost-name" value="R&D / Prototyping"
                                    placeholder="Cost name">
                                <input type="number" class="input-field variable-cost-value" value="2300"
                                    placeholder="$">
                                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
                            </div>
                        </div>
                        <div class="add-course-row">
                            <button class="btn-icon add" id="add-variable-cost" title="Add Variable Cost">+</button>
                        </div>
                    </div>

                    <div class="summary-row">
                        <span class="summary-label">Total Variable Costs</span>
                        <span class="summary-value" id="total-variable">$11,800</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128293;</div>
                        Burn Rate & Runway
                    </div>
                </div>

                <div class="grid-4">
                    <div class="metric-card">
                        <div class="metric-label">Monthly Burn</div>
                        <div class="metric-value pink" id="ops-burn">$28,000</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Annual Burn</div>
                        <div class="metric-value orange" id="ops-annual">$336,000</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Current Runway</div>
                        <div class="metric-value cyan" id="ops-runway">0.9 mo</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">18-Month Need</div>
                        <div class="metric-value purple" id="ops-need">$504,000</div>
                    </div>
                </div>

                <div style="margin-top: 1.5rem;">
                    <div class="range-container">
                        <div class="range-header">
                            <span class="range-label">Cash on Hand</span>
                            <span class="range-value" id="cash-display">$25,000</span>
                        </div>
                        <input type="range" class="range-slider" id="cash-slider" min="0" max="500000" value="25000"
                            step="5000">
                        <div style="margin-top: 0.75rem;">
                            <input type="number" class="input-field" id="cash-input-ops" min="0" step="5000"
                                value="25000" placeholder="Enter cash amount">
                            <div class="input-hint"
                                style="margin-top: 0.25rem; font-size: 0.75rem; color: var(--text-muted);">
                                ðŸ’¡ Synced with Capital Raise tab
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 1rem;">
                        <div class="metric-label">Runway Progress to 18 Months</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="runway-progress" style="width: 5%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottleneck Analysis -->
            <div class="bottleneck-analysis">
                <h3>ðŸ” Execution Bottleneck Analysis</h3>
                <p style="color: var(--text-secondary); margin-bottom: 1rem; font-size: 0.9rem;">
                    Being honest about operational constraints helps prevent overpromising and identifies what needs to
                    scale first.
                </p>

                <div class="prompt-box">
                    <strong>What breaks if customer demand doubles next month?</strong>
                    <textarea id="bottleneck-demand"
                        placeholder="Identify your constraints (e.g., customer support capacity, fulfillment infrastructure, technical scalability)..."></textarea>
                </div>

                <div class="prompt-box">
                    <strong>What's your single biggest operational risk?</strong>
                    <textarea id="bottleneck-risk"
                        placeholder="Be honest about the one thing that keeps you up at night..."></textarea>
                </div>

                <div class="prompt-box">
                    <strong>What's your bus factor? (What happens if a key person is unavailable?)</strong>
                    <textarea id="bottleneck-people"
                        placeholder="Identify single points of failure in your team..."></textarea>
                </div>
            </div>
        </section>
    </main>

    <script>
        // ============================================
        // CYBERDELIC NEXUS FINANCIAL MATRIX
        // Interactive Calculator Engine
        // ============================================

        // CONSOLIDATED DOMContentLoaded Handler - All initialization in one place
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸš€ DOM loaded, initializing Financial Matrix...');

            // ============================================
            // STEP 1: Tab Navigation Listeners
            // ============================================
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    console.log('Tab clicked:', tab.dataset.section);
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.section).classList.add('active');

                    // FIX 3: Draw chart when switching to One-Pager tab
                    if (tab.dataset.section === 'onepager') {
                        console.log('ðŸ”„ Switched to One-Pager tab, will draw chart in 100ms...');
                        setTimeout(() => {
                            console.log('â° Timeout complete, drawing chart now...');
                            drawOnePagerRevenueChart();
                        }, 100);
                    }
                });
            });
            console.log('âœ… Navigation initialized, tabs:', document.querySelectorAll('.nav-tab').length);

            // ============================================
            // STEP 2: Scenario Pill Listeners
            // ============================================
            document.querySelectorAll('.scenario-pill').forEach(pill => {
                pill.addEventListener('click', () => {
                    document.querySelectorAll('.scenario-pill').forEach(p => p.classList.remove('active'));
                    pill.classList.add('active');
                    updateProjectionChart(pill.dataset.scenario);
                });
            });
            console.log('âœ… Scenario pills initialized');

            // ============================================
            // STEP 3: All Input Event Listeners
            // ============================================
            console.log('ðŸ”§ Attaching event listeners...');

            // Capital Raise inputs
            ['monthly-burn', 'current-cash', 'pre-money'].forEach(id => {
                document.getElementById(id).addEventListener('input', () => {
                    updateCapitalCalcs();
                    updateSafeEquityCalcs();
                    updateAllConnectedValues();
                });
            });

            // Cash on hand synchronization event listeners
            document.getElementById('cash-slider').addEventListener('input', function () {
                document.getElementById('cash-input-ops').value = this.value;
                document.getElementById('current-cash').value = this.value;
                document.getElementById('cash-display').textContent = formatCurrency(parseFloat(this.value));
                updateOperationsCalcs();
            });

            document.getElementById('cash-input-ops').addEventListener('input', function () {
                document.getElementById('cash-slider').value = this.value;
                document.getElementById('current-cash').value = this.value;
                document.getElementById('cash-display').textContent = formatCurrency(parseFloat(this.value) || 0);
                updateOperationsCalcs();
            });

            // Update Operations tab when Capital Raise cash is changed
            document.getElementById('current-cash').addEventListener('input', function () {
                const cashSlider = document.getElementById('cash-slider');
                const cashInputOps = document.getElementById('cash-input-ops');
                if (cashSlider && cashInputOps) {
                    cashSlider.value = this.value;
                    cashInputOps.value = this.value;
                    document.getElementById('cash-display').textContent = formatCurrency(parseFloat(this.value) || 0);
                }
            });

            document.getElementById('runway-target').addEventListener('input', () => {
                updateCapitalCalcs();
                updateAllConnectedValues();
            });

            ['investment-amount', 'safe-cap'].forEach(id => {
                document.getElementById(id).addEventListener('input', () => {
                    updateSafeEquityCalcs();
                    updateAllConnectedValues();
                });
            });

            // Attach revenue listeners
            attachRevenueListeners();

            // Fixed and variable cost listeners
            document.querySelectorAll('.fixed-cost, .variable-cost').forEach(input => {
                input.addEventListener('input', updateOperationsCalcs);
            });

            document.getElementById('cash-slider').addEventListener('input', updateOperationsCalcs);

            console.log('âœ… Event listeners attached successfully');

            // ============================================
            // STEP 4: Tooltip Initialization
            // ============================================
            console.log('Initializing tooltips...');
            const helpIcons = document.querySelectorAll('.help-icon[data-tooltip], .help-icon-inline[data-tooltip]');
            console.log('Found', helpIcons.length, 'help icons with tooltips');

            helpIcons.forEach((icon, index) => {
                const tooltipText = icon.getAttribute('data-tooltip');
                console.log(`Tooltip ${index}:`, tooltipText);

                icon.addEventListener('mouseenter', (e) => {
                    const tooltip = e.target.getAttribute('data-tooltip');
                    if (!tooltip) return;

                    // Remove any existing tooltips
                    document.querySelectorAll('.tooltip').forEach(t => t.remove());

                    // Create new tooltip
                    const tooltipEl = document.createElement('div');
                    tooltipEl.className = 'tooltip active';
                    tooltipEl.textContent = tooltip;

                    // Use fixed positioning for better visibility
                    tooltipEl.style.position = 'fixed';
                    tooltipEl.style.background = 'var(--bg-card)';
                    tooltipEl.style.border = '1px solid var(--accent-cyan)';
                    tooltipEl.style.borderRadius = '8px';
                    tooltipEl.style.padding = '0.75rem';
                    tooltipEl.style.minWidth = '200px';
                    tooltipEl.style.maxWidth = '320px';
                    tooltipEl.style.boxShadow = '0 4px 20px rgba(0, 212, 255, 0.3)';
                    tooltipEl.style.zIndex = '10000';
                    tooltipEl.style.fontSize = '0.875rem';
                    tooltipEl.style.lineHeight = '1.5';
                    tooltipEl.style.color = 'var(--text-primary)';
                    tooltipEl.style.display = 'block';
                    tooltipEl.style.pointerEvents = 'none';

                    // Add to body for better positioning
                    document.body.appendChild(tooltipEl);

                    // Position tooltip relative to icon
                    const rect = e.target.getBoundingClientRect();
                    const tooltipRect = tooltipEl.getBoundingClientRect();

                    // Position above icon, centered
                    let left = rect.left + rect.width / 2 - tooltipRect.width / 2;
                    let top = rect.top - tooltipRect.height - 8;

                    // Adjust if tooltip goes off screen
                    if (left < 10) left = 10;
                    if (left + tooltipRect.width > window.innerWidth - 10) {
                        left = window.innerWidth - tooltipRect.width - 10;
                    }
                    if (top < 10) {
                        // Show below instead
                        top = rect.bottom + 8;
                    }

                    tooltipEl.style.left = left + 'px';
                    tooltipEl.style.top = top + 'px';

                    // Store reference for cleanup
                    e.target._tooltip = tooltipEl;
                });

                icon.addEventListener('mouseleave', (e) => {
                    if (e.target._tooltip) {
                        e.target._tooltip.remove();
                        e.target._tooltip = null;
                    }
                });
            });

            // ============================================
            // STEP 5: MutationObserver for Chart Auto-Updates
            // ============================================
            console.log('ðŸ” Setting up MutationObserver for chart auto-updates...');
            // Watch for changes to revenue projection totals
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'childList' || mutation.type === 'characterData') {
                        console.log('ðŸ”„ Revenue values changed, redrawing chart...');
                        drawOnePagerRevenueChart();
                    }
                });
            });

            // Watch specific elements
            const targets = [
                document.getElementById('onepager-year1-revenue'),
                document.getElementById('onepager-year2-revenue'),
                document.getElementById('onepager-year3-revenue')
            ];

            targets.forEach(target => {
                if (target) {
                    observer.observe(target, { childList: true, characterData: true, subtree: true });
                }
            });

            // Resize listener
            window.addEventListener('resize', () => {
                const onepager = document.getElementById('onepager');
                if (onepager && (onepager.classList.contains('active') || onepager.style.display !== 'none')) {
                    drawOnePagerRevenueChart();
                }
            });

            // Initial check
            setTimeout(() => {
                const onepager = document.getElementById('onepager');
                if (onepager && onepager.classList.contains('active')) {
                    drawOnePagerRevenueChart();
                }
            }, 500);

            // Observe the revenue total elements
            const year1Total = document.getElementById('revenue-year1-total');
            const year2Total = document.getElementById('revenue-year2-total');
            const year3Total = document.getElementById('revenue-year3-total');

            if (year1Total) observer.observe(year1Total, { childList: true, characterData: true, subtree: true });
            if (year2Total) observer.observe(year2Total, { childList: true, characterData: true, subtree: true });
            if (year3Total) observer.observe(year3Total, { childList: true, characterData: true, subtree: true });

            // ============================================
            // STEP 6: Inline Editing Initialization
            // ============================================
            // Business Plan editable elements (only non-contenteditable ones)
            makeInlineEditable('#business-plan .feature-desc:not([contenteditable])');
            // Note: Most Business Plan content already uses contenteditable attribute
            // so we don't double-apply the inline editing system to those

            // ============================================
            // STEP 7: Run Initial Calculations (LAST)
            // ============================================
            console.log('ðŸš€ Running initial calculations...');

            // Small delay to ensure all event listeners are fully attached
            setTimeout(function() {
                // Run all calculation functions to populate initial values
                updateRevenueCalcs();
                updateOperationsCalcs();
                updateCapitalCalcs();

                console.log('âœ… Initial calculations complete');
                console.log('âœ… Financial Matrix fully initialized and ready!');
            }, 100);
        });

        // Utility Functions
        const formatCurrency = (num) => {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(num);
        };

        const formatPercent = (num, decimals = 1) => {
            return (num * 100).toFixed(decimals) + '%';
        };

        // ============================================
        // CAPITAL RAISE CALCULATIONS
        // ============================================

        /**
         * CAPITAL RAISE CALCULATIONS
         * ===========================
         *
         * Purpose:
         * Calculate funding requirements based on burn rate and runway goals, then model
         * dilution scenarios for different raise amounts.
         *
         * Key Formulas:
         * -------------
         * 1. Funding Needed = (Monthly Burn Ã— Target Runway) - Current Cash
         *    - Tells you how much capital to raise to reach runway target
         *
         * 2. Current Runway = Current Cash Ã· Monthly Burn
         *    - Months of operation remaining at current burn rate
         *
         * 3. Post-Money Valuation = Pre-Money Valuation + Investment Amount
         *    - Company value after investment closes
         *
         * 4. Investor Ownership % = Investment Amount Ã· Post-Money Valuation
         *    - Percentage of company owned by investors
         *
         * 5. Founder Ownership % = 100% - Investor % - Option Pool %
         *    - Remaining founder ownership (typically 10% reserved for options)
         *
         * 6. Exit Value = Founder % Ã— Exit Valuation
         *    - Founder payout at hypothetical exit
         *
         * Inputs (DOM Elements):
         * ----------------------
         * - #monthly-burn: Monthly operating costs (from Operations tab)
         * - #current-cash: Available funds (synced with Operations tab cash-slider)
         * - #runway-target: Desired months of runway (slider: 6-36 months)
         * - #pre-money: Pre-investment company valuation
         *
         * Outputs (Updated Elements):
         * ---------------------------
         * - #funding-needed: Total capital required
         * - #runway-months: Current months of runway
         * - Dilution table rows for $250K, $500K, $1M scenarios
         * - #capital-warnings: Validation messages
         *
         * Connected Components:
         * ---------------------
         * - Operations tab: monthly-burn, cash-slider
         * - Dashboard: funding-gap, runway-display
         *
         * @fires updateAllConnectedValues() - Would cascade to dashboard if connected
         */
        function updateCapitalCalcs() {
            const monthlyBurn = parseFloat(document.getElementById('monthly-burn').value) || 0;
            const currentCash = parseFloat(document.getElementById('current-cash').value) || 0;
            const runwayTarget = parseFloat(document.getElementById('runway-target').value) || 18;
            const preMoney = parseFloat(document.getElementById('pre-money').value) || 2000000;

            document.getElementById('runway-target-display').textContent = runwayTarget + ' months';

            const fundingNeeded = (monthlyBurn * runwayTarget) - currentCash;
            document.getElementById('funding-needed').textContent = formatCurrency(Math.max(0, fundingNeeded));

            const raises = [250000, 500000, 1000000];
            const optionPool = 0.10;
            let tableHTML = '';

            raises.forEach(raise => {
                const postMoney = preMoney + raise;
                const investorPct = raise / postMoney;
                const founderPct = 1 - investorPct - optionPool;
                const exitValue = founderPct * 10000000;

                tableHTML += `
                    <tr>
                        <td>${formatCurrency(raise)}</td>
                        <td class="highlight">${formatPercent(investorPct)}</td>
                        <td>${formatPercent(founderPct)}</td>
                        <td>${formatCurrency(exitValue)}</td>
                    </tr>
                `;
            });

            document.getElementById('dilution-table').innerHTML = tableHTML;

            const currentRunway = monthlyBurn > 0 ? currentCash / monthlyBurn : 0;
            document.getElementById('runway-months').textContent = currentRunway.toFixed(1) + ' mo';
            document.getElementById('funding-gap').textContent = formatCurrency(Math.max(0, fundingNeeded));

            // ============================================
            // VALIDATION LOGIC
            // ============================================
            const warnings = [];
            const minRaise = Math.min(...raises);
            const maxRaise = Math.max(...raises);

            // Check if raise scenarios are sufficient
            if (fundingNeeded > 0 && minRaise < fundingNeeded) {
                warnings.push({
                    type: 'warning',
                    message: `Smallest raise scenario (${formatCurrency(minRaise)}) may not cover your funding need (${formatCurrency(fundingNeeded)}). Consider adjusting scenarios.`
                });
            }

            // Check runway status - Critical if < 6 months
            if (currentRunway < 6) {
                warnings.push({
                    type: 'critical',
                    message: 'Critical: Current runway is below 6 months. Initiate fundraising immediately.'
                });
            } else if (currentRunway < 12) {
                warnings.push({
                    type: 'warning',
                    message: 'Advisory: Current runway is below 12 months. Begin preparing for fundraising.'
                });
            }

            // Check dilution levels - Info if > 35%
            raises.forEach((raise, i) => {
                const postMoney = preMoney + raise;
                const investorPct = raise / postMoney;
                const dilution = investorPct;

                if (dilution > 0.35) {
                    warnings.push({
                        type: 'info',
                        message: `Scenario ${i + 1} (${formatCurrency(raise)}) involves ${formatPercent(dilution)} investor ownership, which exceeds typical seed range (15-35%).`
                    });
                }
            });

            // Display warnings
            const warningContainer = document.getElementById('capital-warnings');
            if (warningContainer) {
                if (warnings.length > 0) {
                    const warningHTML = warnings.map(w => {
                        const icon = w.type === 'critical' ? 'ðŸš¨' : w.type === 'warning' ? 'âš ï¸' : 'â„¹ï¸';
                        return `<div class="alert alert-${w.type}">${icon} ${w.message}</div>`;
                    }).join('');

                    warningContainer.innerHTML = warningHTML;
                } else {
                    warningContainer.innerHTML = '';
                }
            }
        }

        // ============================================
        // SAFE VS EQUITY
        // ============================================

        function updateSafeEquityCalcs() {
            const investment = parseFloat(document.getElementById('investment-amount').value) || 0;
            const safeCap = parseFloat(document.getElementById('safe-cap').value) || 0;
            const preMoney = parseFloat(document.getElementById('pre-money').value) || 0;

            const postMoney = preMoney + investment;
            const equityOwnership = investment / postMoney;
            const safeOwnership = investment / safeCap;

            document.getElementById('safe-ownership').textContent = formatPercent(safeOwnership);
            document.getElementById('equity-dilution').textContent = formatPercent(equityOwnership);
            document.getElementById('equity-ownership').textContent = formatPercent(equityOwnership);
        }

        // ============================================
        // REVENUE CALCULATIONS
        // ============================================

        function updateRevenueCalcs() {
            // Society
            let societyMemberships = 0;
            let societyMembers = 0;
            document.querySelectorAll('.society-member').forEach(input => {
                const count = parseFloat(input.value) || 0;
                const priceId = input.dataset.priceId;
                const price = parseFloat(document.getElementById(priceId).value) || 0;
                societyMemberships += count * price;
                societyMembers += count;
            });

            const lifetimeMembers = parseFloat(document.getElementById('society-lifetime').value) || 0;
            const lifetimePrice = parseFloat(document.getElementById('price-lifetime').value) || 0;
            societyMemberships += lifetimeMembers * lifetimePrice;
            societyMembers += lifetimeMembers;

            // Calculate total events revenue (use actual if available, otherwise estimated)
            let societyEvents = 0;
            document.querySelectorAll('#society-events-list .event-item').forEach(item => {
                const actualInput = item.querySelector('.event-actual');
                const estimatedInput = item.querySelector('.event-estimated');
                if (actualInput && estimatedInput) {
                    const actual = parseFloat(actualInput.value) || 0;
                    const estimated = parseFloat(estimatedInput.value) || 0;
                    // Use actual if it's greater than 0, otherwise use estimated
                    societyEvents += actual > 0 ? actual : estimated;
                }
            });

            const societyMerch = parseFloat(document.getElementById('society-merch').value) || 0;
            const societyTotal = societyMemberships + societyEvents + societyMerch;

            document.getElementById('society-total').textContent = formatCurrency(societyTotal);
            document.getElementById('society-mrr').textContent = formatCurrency(societyTotal);
            document.getElementById('society-members').textContent = societyMembers.toLocaleString();

            // Labs
            const consultingRate = parseFloat(document.getElementById('price-consulting').value) || 0;
            const labsConsulting = (parseFloat(document.getElementById('labs-consulting-hours').value) || 0) * consultingRate;

            // Calculate total from all individual projects
            let labsProjects = 0;
            let projectCount = 0;
            document.querySelectorAll('.project-value').forEach(input => {
                const value = parseFloat(input.value) || 0;
                labsProjects += value;
                if (value > 0) projectCount++;
            });

            // Calculate total from all individual grants/partnerships
            let labsGrants = 0;
            let grantCount = 0;
            document.querySelectorAll('#labs-grant-list .course-item').forEach(item => {
                const value = parseFloat(item.querySelector('.grant-value')?.value) || 0;
                const type = item.querySelector('.grant-type')?.value || 'monthly';

                let monthlyValue = value;
                if (type === 'annual') {
                    monthlyValue = value / 12;
                } else if (type === 'project') {
                    // For per-project grants, amortize over 12 months
                    monthlyValue = value / 12;
                }

                labsGrants += monthlyValue;
                if (value > 0) grantCount++;
            });

            const labsTotal = labsConsulting + labsProjects + labsGrants;

            document.getElementById('labs-total').textContent = formatCurrency(labsTotal);
            document.getElementById('labs-mrr').textContent = formatCurrency(labsTotal);
            document.getElementById('labs-projects-count').textContent = projectCount;
            document.getElementById('labs-grants-count').textContent = grantCount;

            // Academy
            let academyCourses = 0;
            let totalCourseStudents = 0;
            document.querySelectorAll('#course-list .course-item').forEach(item => {
                const priceInput = item.querySelector('.course-price');
                const salesInput = item.querySelector('.course-sales');
                if (priceInput && salesInput) {
                    const price = parseFloat(priceInput.value) || 0;
                    const sales = parseFloat(salesInput.value) || 0;
                    academyCourses += price * sales;
                    totalCourseStudents += sales;
                }
            });
            const certPrice = parseFloat(document.getElementById('price-cert').value) || 0;
            const academyCerts = (parseFloat(document.getElementById('academy-certs').value) || 0) * certPrice;
            const workshopPrice = parseFloat(document.getElementById('price-workshop').value) || 0;
            const academyWorkshops = (parseFloat(document.getElementById('academy-workshops').value) || 0) * workshopPrice;

            // Mentorship revenue calculation
            const mentorshipPrice = parseFloat(document.getElementById('mentorship-price')?.value) || 0;
            const mentorshipCount = parseFloat(document.getElementById('mentorship-count')?.value) || 0;
            const platformFee = parseFloat(document.getElementById('mentorship-split')?.value) || 30;

            const mentorshipGross = mentorshipPrice * mentorshipCount;
            const mentorshipNet = (mentorshipGross * platformFee) / 100;

            // Update mentorship display
            if (document.getElementById('platform-share')) {
                document.getElementById('platform-share').textContent = formatCurrency(mentorshipNet);
            }
            if (document.getElementById('mentor-share')) {
                document.getElementById('mentor-share').textContent = formatCurrency(mentorshipGross - mentorshipNet);
            }

            const academyTotal = academyCourses + academyCerts + academyWorkshops + mentorshipNet;

            document.getElementById('academy-total').textContent = formatCurrency(academyTotal);
            document.getElementById('academy-mrr').textContent = formatCurrency(academyTotal);
            document.getElementById('academy-students').textContent = (
                totalCourseStudents +
                (parseFloat(document.getElementById('academy-certs').value) || 0) +
                (parseFloat(document.getElementById('academy-workshops').value) || 0)
            );

            // Dojos
            const dojoMemberPrice = parseFloat(document.getElementById('price-dojo-membership').value) || 0;
            const dojosMemberships = (parseFloat(document.getElementById('dojos-memberships').value) || 0) * dojoMemberPrice;
            const xrSessionPrice = parseFloat(document.getElementById('price-xr-session').value) || 0;
            const dojosXR = (parseFloat(document.getElementById('dojos-xr-sessions').value) || 0) * xrSessionPrice;
            const trainingPrice = parseFloat(document.getElementById('price-training').value) || 0;
            const dojosTraining = (parseFloat(document.getElementById('dojos-training').value) || 0) * trainingPrice;
            const dojosTotal = dojosMemberships + dojosXR + dojosTraining;

            document.getElementById('dojos-total').textContent = formatCurrency(dojosTotal);
            document.getElementById('dojos-mrr').textContent = formatCurrency(dojosTotal);
            document.getElementById('dojos-sessions').textContent = document.getElementById('dojos-xr-sessions').value;

            // Total MRR
            const totalMRR = societyTotal + labsTotal + academyTotal + dojosTotal;
            document.getElementById('total-mrr').textContent = formatCurrency(totalMRR);

            // Update CAC/LTV table
            updateCACLTVTable();

            // Sync CAC values to One-Pager
            if (typeof syncCACToOnePager === 'function') {
                syncCACToOnePager();
            }

            return totalMRR;
        }

        // ============================================
        // CAC/LTV ANALYSIS
        // ============================================

        /**
         * Calculates Lifetime Value for each revenue branch
         *
         * Formulas:
         * - Society: Avg monthly membership Ã— retention months
         * - Labs: Project value Ã— repeat client rate
         * - Academy: Course revenue Ã— student lifecycle
         * - Dojos: Membership price Ã— avg retention
         */
        function calculateLTV(branch) {
            switch (branch) {
                case 'society':
                    const avgMembership = 15; // Average across tiers
                    const retentionMonths = 36; // 3-year avg
                    return avgMembership * retentionMonths;

                case 'labs':
                    const avgProjectValue = 5000;
                    const repeatRate = 3; // 3 projects per client
                    return avgProjectValue * repeatRate;

                case 'academy':
                    const avgCourseValue = 150;
                    const coursesPerStudent = 3;
                    return avgCourseValue * coursesPerStudent;

                case 'dojos':
                    const avgDojo = 60;
                    const dojoRetention = 30; // months
                    return avgDojo * dojoRetention;

                default:
                    return 0;
            }
        }

        /**
         * Updates the CAC & LTV Analysis table with live calculations
         */
        function updateCACLTVTable() {
            const branches = ['society', 'labs', 'academy', 'dojos'];

            branches.forEach(branch => {
                const cacInput = document.getElementById(`${branch}-cac`);
                const cac = parseFloat(cacInput?.value) || 0;
                const ltv = calculateLTV(branch);
                const ratio = cac > 0 ? ltv / cac : 0;
                const paybackMonths = ltv > 0 ? cac / (ltv / 12) : 0;

                // Update table cells
                const cacCell = document.getElementById(`cac-${branch}`);
                const ltvCell = document.getElementById(`ltv-${branch}`);
                const ratioCell = document.getElementById(`ratio-${branch}`);
                const paybackCell = document.getElementById(`payback-${branch}`);
                const statusCell = document.getElementById(`status-${branch}`);

                if (cacCell) cacCell.textContent = formatCurrency(cac);
                if (ltvCell) ltvCell.textContent = formatCurrency(ltv);
                if (ratioCell) ratioCell.textContent = ratio.toFixed(1) + ':1';
                if (paybackCell) paybackCell.textContent = paybackMonths.toFixed(1) + ' mo';

                // Status badge logic
                if (statusCell) {
                    if (ratio >= 6) {
                        statusCell.innerHTML = '<span class="status-badge success">Excellent</span>';
                    } else if (ratio >= 3) {
                        statusCell.innerHTML = '<span class="status-badge success">Good</span>';
                    } else if (ratio > 0) {
                        statusCell.innerHTML = '<span class="status-badge warning">Review</span>';
                    } else {
                        statusCell.innerHTML = '<span class="status-badge">N/A</span>';
                    }
                }
            });

            // Update dashboard LTV:CAC ratio with blended average
            const blendedRatio = calculateBlendedLTVCAC();
            if (document.getElementById('ltv-cac-ratio')) {
                document.getElementById('ltv-cac-ratio').textContent = blendedRatio.toFixed(1) + ':1';
            }
            if (document.getElementById('ltv-cac-status')) {
                if (blendedRatio >= 6) {
                    document.getElementById('ltv-cac-status').className = 'metric-change positive';
                    document.getElementById('ltv-cac-status').textContent = 'Excellent';
                } else if (blendedRatio >= 3) {
                    document.getElementById('ltv-cac-status').className = 'metric-change positive';
                    document.getElementById('ltv-cac-status').textContent = 'Good';
                } else {
                    document.getElementById('ltv-cac-status').className = 'metric-change negative';
                    document.getElementById('ltv-cac-status').textContent = 'Needs improvement';
                }
            }
        }

        /**
         * Calculates blended LTV:CAC ratio across all branches
         */
        function calculateBlendedLTVCAC() {
            const branches = ['society', 'labs', 'academy', 'dojos'];
            let totalLTV = 0;
            let totalCAC = 0;
            let count = 0;

            branches.forEach(branch => {
                const cacInput = document.getElementById(`${branch}-cac`);
                const cac = parseFloat(cacInput?.value) || 0;
                const ltv = calculateLTV(branch);

                if (cac > 0 && ltv > 0) {
                    totalLTV += ltv;
                    totalCAC += cac;
                    count++;
                }
            });

            return count > 0 ? totalLTV / totalCAC : 0;
        }

        // ============================================
        // CASH ON HAND SYNCHRONIZATION
        // ============================================

        /**
         * CASH ON HAND SYNCHRONIZATION
         * =============================
         * Ensures cash value is consistent across Operations and Capital Raise tabs
         *
         * Connected Elements:
         * - cash-slider (Operations): Range input
         * - cash-input-ops (Operations): Number input
         * - current-cash (Capital Raise): Number input
         */
        function syncCashOnHand() {
            const slider = document.getElementById('cash-slider');
            const opsInput = document.getElementById('cash-input-ops');
            const capitalInput = document.getElementById('current-cash');

            if (!slider || !opsInput || !capitalInput) return;

            // Sync all three elements
            const value = parseFloat(slider.value) || 0;
            opsInput.value = value;
            capitalInput.value = value;

            // Update display
            document.getElementById('cash-display').textContent = formatCurrency(value);

            // Trigger dependent calculations
            updateOperationsCalcs();
            updateCapitalCalcs();
        }

        // ============================================
        // OPERATIONS CALCULATIONS
        // ============================================

        function updateOperationsCalcs() {
            let fixedTotal = 0;
            document.querySelectorAll('.fixed-cost-value').forEach(input => {
                fixedTotal += parseFloat(input.value) || 0;
            });

            let variableTotal = 0;
            document.querySelectorAll('.variable-cost-value').forEach(input => {
                variableTotal += parseFloat(input.value) || 0;
            });

            const monthlyBurn = fixedTotal + variableTotal;
            const currentCash = parseFloat(document.getElementById('cash-slider').value) || 0;
            const runway = monthlyBurn > 0 ? currentCash / monthlyBurn : 0;
            const need18mo = monthlyBurn * 18;

            document.getElementById('total-fixed').textContent = formatCurrency(fixedTotal);
            document.getElementById('total-variable').textContent = formatCurrency(variableTotal);
            document.getElementById('ops-burn').textContent = formatCurrency(monthlyBurn);
            document.getElementById('ops-annual').textContent = formatCurrency(monthlyBurn * 12);
            document.getElementById('ops-runway').textContent = runway.toFixed(1) + ' mo';
            document.getElementById('ops-need').textContent = formatCurrency(need18mo);
            document.getElementById('cash-display').textContent = formatCurrency(currentCash);

            const progress = Math.min((runway / 18) * 100, 100);
            document.getElementById('runway-progress').style.width = progress + '%';

            document.getElementById('monthly-burn').value = monthlyBurn;
            document.getElementById('current-cash').value = currentCash;

            // Update connected values (but don't call updateCapitalCalcs to avoid infinite loop)
            updateAllConnectedValues();
        }

        // ============================================
        // PROJECTION CHART
        // ============================================

        function updateProjectionChart(scenario) {
            const growthRates = {
                conservative: 0.08,
                moderate: 0.12,
                aggressive: 0.20
            };

            const rateLabels = {
                conservative: '8%',
                moderate: '12%',
                aggressive: '20%'
            };

            const rate = growthRates[scenario];
            const startMRR = updateRevenueCalcs();

            const quarters = ['Q1 Y1', 'Q2 Y1', 'Q3 Y1', 'Q4 Y1', 'Q1 Y2', 'Q2 Y2', 'Q3 Y2', 'Q4 Y2', 'Q1 Y3', 'Q2 Y3', 'Q3 Y3', 'Q4 Y3'];

            let chartHTML = '';
            let maxRevenue = 0;
            const revenues = [];

            // Calculate revenues
            quarters.forEach((q, i) => {
                const monthsElapsed = (i + 1) * 3;
                const quarterlyGrowth = Math.pow(1 + rate, monthsElapsed / 12);
                const revenue = startMRR * 3 * quarterlyGrowth;
                revenues.push(revenue);
                if (revenue > maxRevenue) maxRevenue = revenue;
            });

            // Update summary metrics
            const endMRR = revenues[revenues.length - 1] / 3;
            const totalARR = endMRR * 12;
            document.getElementById('projection-start-mrr').textContent = formatCurrencyShort(startMRR);
            document.getElementById('projection-end-mrr').textContent = formatCurrencyShort(endMRR);
            document.getElementById('projection-total-arr').textContent = formatCurrencyShort(totalARR);
            document.getElementById('projection-growth-rate').textContent = rateLabels[scenario] + ' MoM';

            // Generate Y-axis values
            const yAxisSteps = 5;
            let yAxisHTML = '';
            for (let i = yAxisSteps; i >= 0; i--) {
                const value = (maxRevenue / yAxisSteps) * i;
                yAxisHTML += `<div>${formatCurrencyShort(value)}</div>`;
            }
            document.getElementById('y-axis-values').innerHTML = yAxisHTML;

            // Generate chart bars with value labels
            quarters.forEach((q, i) => {
                const height = (revenues[i] / maxRevenue) * 200;
                chartHTML += `
                    <div class="chart-bar-group">
                        <div class="chart-bar" style="height: ${height}px;" title="${formatCurrencyShort(revenues[i])}">
                            <div style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 0.65rem; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; white-space: nowrap;">${formatCurrencyShort(revenues[i])}</div>
                        </div>
                        <div class="chart-bar-label">${q}</div>
                    </div>
                `;
            });

            document.getElementById('projection-chart').innerHTML = chartHTML;

            // Generate quarterly breakdown table
            let tableHTML = '';
            quarters.forEach((q, i) => {
                const year = Math.ceil((i + 1) / 4);
                tableHTML += `
                    <div style="padding: 1rem; background: var(--bg-card); border-radius: 8px; border: 1px solid var(--border);">
                        <div style="font-size: 0.7rem; color: var(--text-muted); margin-bottom: 0.5rem;">${q}</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; color: var(--accent-cyan); margin-bottom: 0.25rem;">${formatCurrencyShort(revenues[i])}</div>
                        <div style="font-size: 0.65rem; color: var(--text-secondary);">Revenue</div>
                    </div>
                `;
            });
            document.getElementById('projection-table-view').innerHTML = tableHTML;
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================
        // NOTE: All event listeners have been moved to the consolidated DOMContentLoaded handler above

        function handleRevenueInput() {
            updateRevenueCalcs();
            updateProjectionChart(document.querySelector('.scenario-pill.active').dataset.scenario);
        }

        function attachRevenueListeners() {
            document.querySelectorAll('.society-member, #society-lifetime, #society-merch').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('.event-name, .event-estimated, .event-actual').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('#price-cybernaut, #price-reality-hacker, #price-reality-weaver, #price-lifetime').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('#price-consulting, #labs-consulting-hours').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('.project-name, .project-value, .project-type, .grant-name, .grant-value, .grant-type').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
                input.removeEventListener('change', handleRevenueInput);
                input.addEventListener('change', handleRevenueInput);
            });
            document.querySelectorAll('#price-cert, #academy-certs, #price-workshop, #academy-workshops').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('#mentorship-price, #mentorship-count, #mentorship-split').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('.course-price, .course-sales').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('#price-dojo-membership, #dojos-memberships, #price-xr-session, #dojos-xr-sessions, #price-training, #dojos-training').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('#society-cac, #labs-cac, #academy-cac, #dojos-cac').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
                // Also sync CAC values to One-Pager when changed
                input.addEventListener('input', function () {
                    if (typeof syncCACToOnePager === 'function') {
                        syncCACToOnePager();
                    }
                });
            });
        }

        // Event management (for Society)
        let eventIdCounter = 2;

        function addEvent() {
            const eventList = document.getElementById('society-events-list');
            const newEvent = document.createElement('div');
            newEvent.className = 'event-item';
            newEvent.dataset.eventId = eventIdCounter++;
            newEvent.style.cssText = 'display: grid; grid-template-columns: 2fr 1fr 1fr 0.5fr; gap: 0.5rem; align-items: center;';
            newEvent.innerHTML = `
                <input type="text" class="input-field event-name" value="New Event" placeholder="Event name">
                <input type="number" class="input-field event-estimated" value="0" placeholder="Estimated $">
                <input type="number" class="input-field event-actual" value="0" placeholder="Actual $">
                <button class="btn-icon remove-event" title="Remove">&#10005;</button>
            `;
            eventList.appendChild(newEvent);
            attachRevenueListeners();
            attachEventRemoveListeners();
            handleRevenueInput();
        }

        function removeEvent(e) {
            const eventItem = e.target.closest('.event-item');
            if (document.querySelectorAll('#society-events-list .event-item').length > 1) {
                eventItem.remove();
                handleRevenueInput();
            }
        }

        function attachEventRemoveListeners() {
            document.querySelectorAll('.remove-event').forEach(btn => {
                btn.removeEventListener('click', removeEvent);
                btn.addEventListener('click', removeEvent);
            });
        }

        document.getElementById('add-event').addEventListener('click', addEvent);
        attachEventRemoveListeners();

        // Fixed Cost management
        let fixedCostIdCounter = 8;

        function addFixedCost() {
            const costList = document.getElementById('fixed-costs-list');
            const newCost = document.createElement('div');
            newCost.className = 'cost-item';
            newCost.dataset.costId = fixedCostIdCounter++;
            newCost.style.cssText = 'display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;';
            newCost.innerHTML = `
                <input type="text" class="input-field fixed-cost-name" value="New Cost" placeholder="Cost name">
                <input type="number" class="input-field fixed-cost-value" value="0" placeholder="$">
                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
            `;
            costList.appendChild(newCost);
            attachFixedCostListeners();
            attachFixedCostRemoveListeners();
            updateOperationsCalcs();
        }

        function removeFixedCost(e) {
            const costItem = e.target.closest('.cost-item');
            if (document.querySelectorAll('#fixed-costs-list .cost-item').length > 1) {
                costItem.remove();
                updateOperationsCalcs();
            }
        }

        function attachFixedCostListeners() {
            document.querySelectorAll('.fixed-cost-name, .fixed-cost-value').forEach(input => {
                input.removeEventListener('input', updateOperationsCalcs);
                input.addEventListener('input', updateOperationsCalcs);
            });
        }

        function attachFixedCostRemoveListeners() {
            document.querySelectorAll('.remove-fixed-cost').forEach(btn => {
                btn.removeEventListener('click', removeFixedCost);
                btn.addEventListener('click', removeFixedCost);
            });
        }

        document.getElementById('add-fixed-cost').addEventListener('click', addFixedCost);
        attachFixedCostListeners();
        attachFixedCostRemoveListeners();

        // Variable Cost management
        let variableCostIdCounter = 6;

        function addVariableCost() {
            const costList = document.getElementById('variable-costs-list');
            const newCost = document.createElement('div');
            newCost.className = 'cost-item';
            newCost.dataset.costId = variableCostIdCounter++;
            newCost.style.cssText = 'display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;';
            newCost.innerHTML = `
                <input type="text" class="input-field variable-cost-name" value="New Cost" placeholder="Cost name">
                <input type="number" class="input-field variable-cost-value" value="0" placeholder="$">
                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
            `;
            costList.appendChild(newCost);
            attachVariableCostListeners();
            attachVariableCostRemoveListeners();
            updateOperationsCalcs();
        }

        function removeVariableCost(e) {
            const costItem = e.target.closest('.cost-item');
            if (document.querySelectorAll('#variable-costs-list .cost-item').length > 1) {
                costItem.remove();
                updateOperationsCalcs();
            }
        }

        function attachVariableCostListeners() {
            document.querySelectorAll('.variable-cost-name, .variable-cost-value').forEach(input => {
                input.removeEventListener('input', updateOperationsCalcs);
                input.addEventListener('input', updateOperationsCalcs);
            });
        }

        function attachVariableCostRemoveListeners() {
            document.querySelectorAll('.remove-variable-cost').forEach(btn => {
                btn.removeEventListener('click', removeVariableCost);
                btn.addEventListener('click', removeVariableCost);
            });
        }

        document.getElementById('add-variable-cost').addEventListener('click', addVariableCost);
        attachVariableCostListeners();
        attachVariableCostRemoveListeners();

        // Course management
        let courseIdCounter = 4;

        function addCourse() {
            const courseList = document.getElementById('course-list');
            const newCourse = document.createElement('div');
            newCourse.className = 'course-item';
            newCourse.dataset.courseId = courseIdCounter++;
            newCourse.innerHTML = `
                <input type="text" class="input-field course-name" value="New Course" placeholder="Course name">
                <input type="number" class="input-field course-price" value="199" placeholder="$">
                <input type="number" class="input-field course-sales" value="0" placeholder="Qty">
                <button class="btn-icon remove-course" title="Remove">&#10005;</button>
            `;
            courseList.appendChild(newCourse);
            attachRevenueListeners();
            attachCourseRemoveListeners();
            handleRevenueInput();
        }

        function removeCourse(e) {
            const courseItem = e.target.closest('.course-item');
            if (document.querySelectorAll('#course-list .course-item').length > 1) {
                courseItem.remove();
                handleRevenueInput();
            }
        }

        function attachCourseRemoveListeners() {
            document.querySelectorAll('.remove-course').forEach(btn => {
                btn.removeEventListener('click', removeCourse);
                btn.addEventListener('click', removeCourse);
            });
        }

        document.getElementById('add-course').addEventListener('click', addCourse);

        // Project management (for Labs)
        let projectIdCounter = 3;

        function addProject() {
            const projectList = document.getElementById('labs-project-list');
            const newProject = document.createElement('div');
            newProject.className = 'course-item';
            newProject.dataset.projectId = projectIdCounter++;
            newProject.style.cssText = 'display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; align-items: center;';
            newProject.innerHTML = `
                <input type="text" class="input-field project-name" value="New Project" placeholder="Project name">
                <input type="number" class="input-field project-value" value="0" placeholder="$">
                <select class="input-field project-type" style="padding: 0.65rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                    <option value="monthly">Monthly</option>
                    <option value="project">Per Project</option>
                </select>
                <button class="btn-icon remove-project" title="Remove">&#10005;</button>
            `;
            projectList.appendChild(newProject);
            attachRevenueListeners();
            attachProjectRemoveListeners();
            handleRevenueInput();
        }

        function removeProject(e) {
            const projectItem = e.target.closest('.course-item');
            if (document.querySelectorAll('#labs-project-list .course-item').length > 1) {
                projectItem.remove();
                handleRevenueInput();
            }
        }

        function attachProjectRemoveListeners() {
            document.querySelectorAll('.remove-project').forEach(btn => {
                btn.removeEventListener('click', removeProject);
                btn.addEventListener('click', removeProject);
            });
        }

        document.getElementById('add-project').addEventListener('click', addProject);
        attachProjectRemoveListeners();

        // Grant management (for Labs)
        let grantIdCounter = 3;

        function addGrant() {
            const grantList = document.getElementById('labs-grant-list');
            const newGrant = document.createElement('div');
            newGrant.className = 'course-item';
            newGrant.dataset.grantId = grantIdCounter++;
            newGrant.style.cssText = 'display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; align-items: center;';
            newGrant.innerHTML = `
                <input type="text" class="input-field grant-name" value="New Grant/Partnership" placeholder="Grant/partner name">
                <input type="number" class="input-field grant-value" value="0" placeholder="$">
                <select class="input-field grant-type" style="padding: 0.65rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                    <option value="monthly">Monthly</option>
                    <option value="project">Per Project</option>
                    <option value="annual">Annual (Ã·12)</option>
                </select>
                <button class="btn-icon remove-grant" title="Remove">&#10005;</button>
            `;
            grantList.appendChild(newGrant);
            attachRevenueListeners();
            attachGrantRemoveListeners();
            handleRevenueInput();
        }

        function removeGrant(e) {
            const grantItem = e.target.closest('.course-item');
            if (document.querySelectorAll('#labs-grant-list .course-item').length > 1) {
                grantItem.remove();
                handleRevenueInput();
            }
        }

        function attachGrantRemoveListeners() {
            document.querySelectorAll('.remove-grant').forEach(btn => {
                btn.removeEventListener('click', removeGrant);
                btn.addEventListener('click', removeGrant);
            });
        }

        document.getElementById('add-grant').addEventListener('click', addGrant);
        attachGrantRemoveListeners();


        // ============================================
        // HELPER FUNCTIONS
        // ============================================

        function parseCurrencyValue(text) {
            if (!text) return 0;
            text = text.trim();
            const multiplier = text.includes('M') ? 1000000 : text.includes('K') ? 1000 : 1;
            const value = parseFloat(text.replace(/[$,KM]/g, '')) || 0;
            return value * multiplier;
        }

        // ============================================
        // TOOLTIP & HELP ICON SYSTEM
        // ============================================

        /**
         * Creates a help icon element with tooltip functionality
         * @param {string} tooltipText - The help text to display
         * @param {string} position - Tooltip position: 'top' or 'bottom' (default: 'top')
         * @returns {HTMLElement} The tooltip container element
         */
        function createHelpIcon(tooltipText, position = 'top') {
            const container = document.createElement('span');
            container.className = 'tooltip-container';

            const icon = document.createElement('span');
            icon.className = 'help-icon';
            icon.innerHTML = '?';
            icon.setAttribute('data-tooltip', tooltipText);

            const tooltip = document.createElement('div');
            tooltip.className = `tooltip ${position}`;
            tooltip.textContent = tooltipText;

            // Show/hide tooltip on hover
            icon.addEventListener('mouseenter', () => tooltip.classList.add('active'));
            icon.addEventListener('mouseleave', () => tooltip.classList.remove('active'));

            // Mobile: show on click
            icon.addEventListener('click', (e) => {
                e.stopPropagation();
                tooltip.classList.toggle('active');
            });

            container.appendChild(icon);
            container.appendChild(tooltip);
            return container;
        }

        /**
         * Adds tooltips to existing help icons with data-tooltip attributes
         * Call this after DOM is loaded or after dynamically adding help icons
         */
        function initializeTooltips() {
            document.querySelectorAll('[data-tooltip]').forEach(element => {
                if (element.classList.contains('help-icon') || element.classList.contains('help-icon-inline')) {
                    // Already has tooltip setup, skip
                    if (element.parentElement.classList.contains('tooltip-container')) return;

                    const tooltipText = element.getAttribute('data-tooltip');
                    const position = element.getAttribute('data-tooltip-position') || 'top';

                    // Wrap in container if not already
                    const container = document.createElement('span');
                    container.className = 'tooltip-container';

                    element.parentNode.insertBefore(container, element);
                    container.appendChild(element);

                    // Create tooltip div
                    const tooltip = document.createElement('div');
                    tooltip.className = `tooltip ${position}`;
                    tooltip.textContent = tooltipText;

                    // Show/hide on hover
                    element.addEventListener('mouseenter', () => tooltip.classList.add('active'));
                    element.addEventListener('mouseleave', () => tooltip.classList.remove('active'));

                    // Mobile: toggle on click
                    element.addEventListener('click', (e) => {
                        e.stopPropagation();
                        tooltip.classList.toggle('active');
                    });

                    container.appendChild(tooltip);
                }
            });

            // Close tooltips when clicking outside
            document.addEventListener('click', () => {
                document.querySelectorAll('.tooltip.active').forEach(tooltip => {
                    tooltip.classList.remove('active');
                });
            });
        }

        // ============================================
        // LOCALSTORAGE SAVE/LOAD MECHANISM
        // ============================================

        function saveAllData() {
            const data = {
                // Revenue tab inputs
                revenueInputs: {},
                // Capital tab inputs
                capitalInputs: {},
                // Operations tab inputs
                operationsInputs: {},
                // Business Plan 3-Year Revenue Projections (editable cells)
                revenueProjections: {},
                // All contenteditable fields
                editableText: {},
                // Timestamp
                lastSaved: new Date().toISOString()
            };

            // Save all input fields by ID
            document.querySelectorAll('input[type="number"], input[type="text"], input[type="range"]').forEach(input => {
                if (input.id) {
                    data.revenueInputs[input.id] = input.value;
                }
            });

            // Save editable revenue input fields
            document.querySelectorAll('.editable-revenue').forEach(input => {
                const year = input.dataset.year;
                const stream = input.dataset.stream;
                if (year && stream) {
                    data.revenueProjections[`${stream}-year${year}`] = input.value;
                }
            });

            // Save all contenteditable text fields
            document.querySelectorAll('[contenteditable="true"]').forEach(element => {
                if (element.id) {
                    data.editableText[element.id] = element.textContent || element.innerHTML;
                } else {
                    // Create a unique identifier for elements without IDs
                    const identifier = element.className + '-' + Array.from(element.parentNode.children).indexOf(element);
                    data.editableText[identifier] = element.textContent || element.innerHTML;
                }
            });

            // Save courses
            const courses = [];
            document.querySelectorAll('#course-list .course-item').forEach(courseItem => {
                courses.push({
                    name: courseItem.querySelector('.course-name')?.value || '',
                    price: courseItem.querySelector('.course-price')?.value || '',
                    sales: courseItem.querySelector('.course-sales')?.value || ''
                });
            });
            data.courses = courses;

            // Save labs projects
            const projects = [];
            document.querySelectorAll('#labs-project-list .course-item').forEach(projectItem => {
                projects.push({
                    name: projectItem.querySelector('.project-name')?.value || '',
                    value: projectItem.querySelector('.project-value')?.value || '',
                    type: projectItem.querySelector('.project-type')?.value || 'monthly'
                });
            });
            data.projects = projects;

            // Save labs grants/partnerships
            const grants = [];
            document.querySelectorAll('#labs-grant-list .course-item').forEach(grantItem => {
                grants.push({
                    name: grantItem.querySelector('.grant-name')?.value || '',
                    value: grantItem.querySelector('.grant-value')?.value || ''
                });
            });
            data.grants = grants;

            // Save society events
            const events = [];
            document.querySelectorAll('#society-events-list .event-item').forEach(eventItem => {
                events.push({
                    name: eventItem.querySelector('.event-name').value,
                    estimated: eventItem.querySelector('.event-estimated').value,
                    actual: eventItem.querySelector('.event-actual').value
                });
            });
            data.events = events;

            // Save fixed costs
            const fixedCosts = [];
            document.querySelectorAll('#fixed-costs-list .cost-item').forEach(costItem => {
                fixedCosts.push({
                    name: costItem.querySelector('.fixed-cost-name').value,
                    value: costItem.querySelector('.fixed-cost-value').value
                });
            });
            data.fixedCosts = fixedCosts;

            // Save variable costs
            const variableCosts = [];
            document.querySelectorAll('#variable-costs-list .cost-item').forEach(costItem => {
                variableCosts.push({
                    name: costItem.querySelector('.variable-cost-name').value,
                    value: costItem.querySelector('.variable-cost-value').value
                });
            });
            data.variableCosts = variableCosts;

            localStorage.setItem('cyberdelicCFOData', JSON.stringify(data));
            console.log('Data saved at', data.lastSaved);
        }

        function loadAllData() {
            const savedData = localStorage.getItem('cyberdelicCFOData');
            if (!savedData) return false;

            try {
                const data = JSON.parse(savedData);

                // Restore all input fields
                Object.keys(data.revenueInputs || {}).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.value = data.revenueInputs[id];
                    }
                });

                // Restore editable revenue input fields
                Object.keys(data.revenueProjections || {}).forEach(key => {
                    const [stream, yearPart] = key.split('-year');
                    const input = document.querySelector(`.editable-revenue[data-year="${yearPart}"][data-stream="${stream}"]`);
                    if (input) {
                        input.value = data.revenueProjections[key];
                    }
                });

                // Restore contenteditable text fields
                Object.keys(data.editableText || {}).forEach(identifier => {
                    const element = document.getElementById(identifier);
                    if (element) {
                        element.textContent = data.editableText[identifier];
                    }
                });

                // Restore courses
                if (data.courses && data.courses.length > 0) {
                    const courseList = document.getElementById('course-list');
                    // Clear existing courses except the first template
                    const courseItems = courseList.querySelectorAll('.course-item');
                    for (let i = 1; i < courseItems.length; i++) {
                        courseItems[i].remove();
                    }

                    // Add saved courses
                    data.courses.forEach((course, index) => {
                        if (index === 0) {
                            // Update first course
                            const firstCourse = courseList.querySelector('.course-item');
                            if (firstCourse) {
                                firstCourse.querySelector('.course-name').value = course.name;
                                firstCourse.querySelector('.course-price').value = course.price;
                                firstCourse.querySelector('.course-sales').value = course.sales;
                            }
                        } else {
                            // Add new courses
                            addCourse();
                            const lastCourse = courseList.querySelector('.course-item:last-child');
                            if (lastCourse) {
                                lastCourse.querySelector('.course-name').value = course.name;
                                lastCourse.querySelector('.course-price').value = course.price;
                                lastCourse.querySelector('.course-sales').value = course.sales;
                            }
                        }
                    });
                }

                // Restore labs projects
                if (data.projects && data.projects.length > 0) {
                    const projectList = document.getElementById('labs-project-list');
                    // Clear existing projects except the first template
                    const projectItems = projectList.querySelectorAll('.course-item');
                    for (let i = 1; i < projectItems.length; i++) {
                        projectItems[i].remove();
                    }

                    // Add saved projects
                    data.projects.forEach((project, index) => {
                        if (index === 0) {
                            // Update first project
                            const firstProject = projectList.querySelector('.course-item');
                            if (firstProject) {
                                firstProject.querySelector('.project-name').value = project.name;
                                firstProject.querySelector('.project-value').value = project.value;
                                if (firstProject.querySelector('.project-type')) {
                                    firstProject.querySelector('.project-type').value = project.type || 'monthly';
                                }
                            }
                        } else {
                            // Add new projects
                            addProject();
                            const lastProject = projectList.querySelector('.course-item:last-child');
                            if (lastProject) {
                                lastProject.querySelector('.project-name').value = project.name;
                                lastProject.querySelector('.project-value').value = project.value;
                                if (lastProject.querySelector('.project-type')) {
                                    lastProject.querySelector('.project-type').value = project.type || 'monthly';
                                }
                            }
                        }
                    });
                }

                // Restore labs grants/partnerships
                if (data.grants && data.grants.length > 0) {
                    const grantList = document.getElementById('labs-grant-list');
                    // Clear existing grants except the first template
                    const grantItems = grantList.querySelectorAll('.course-item');
                    for (let i = 1; i < grantItems.length; i++) {
                        grantItems[i].remove();
                    }

                    // Add saved grants
                    data.grants.forEach((grant, index) => {
                        if (index === 0) {
                            // Update first grant
                            const firstGrant = grantList.querySelector('.course-item');
                            if (firstGrant) {
                                firstGrant.querySelector('.grant-name').value = grant.name;
                                firstGrant.querySelector('.grant-value').value = grant.value;
                            }
                        } else {
                            // Add new grants
                            addGrant();
                            const lastGrant = grantList.querySelector('.course-item:last-child');
                            if (lastGrant) {
                                lastGrant.querySelector('.grant-name').value = grant.name;
                                lastGrant.querySelector('.grant-value').value = grant.value;
                            }
                        }
                    });
                }

                // Restore society events
                if (data.events && data.events.length > 0) {
                    const eventList = document.getElementById('society-events-list');
                    const eventItems = eventList.querySelectorAll('.event-item');
                    for (let i = 1; i < eventItems.length; i++) {
                        eventItems[i].remove();
                    }

                    data.events.forEach((event, index) => {
                        if (index === 0) {
                            const firstEvent = eventList.querySelector('.event-item');
                            if (firstEvent) {
                                firstEvent.querySelector('.event-name').value = event.name;
                                firstEvent.querySelector('.event-estimated').value = event.estimated;
                                firstEvent.querySelector('.event-actual').value = event.actual;
                            }
                        } else {
                            addEvent();
                            const lastEvent = eventList.querySelector('.event-item:last-child');
                            if (lastEvent) {
                                lastEvent.querySelector('.event-name').value = event.name;
                                lastEvent.querySelector('.event-estimated').value = event.estimated;
                                lastEvent.querySelector('.event-actual').value = event.actual;
                            }
                        }
                    });
                }

                // Restore fixed costs
                if (data.fixedCosts && data.fixedCosts.length > 0) {
                    const fixedCostsList = document.getElementById('fixed-costs-list');
                    fixedCostsList.innerHTML = '';
                    data.fixedCosts.forEach(cost => {
                        addFixedCost();
                        const lastCost = fixedCostsList.querySelector('.cost-item:last-child');
                        if (lastCost) {
                            lastCost.querySelector('.fixed-cost-name').value = cost.name;
                            lastCost.querySelector('.fixed-cost-value').value = cost.value;
                        }
                    });
                }

                // Restore variable costs
                if (data.variableCosts && data.variableCosts.length > 0) {
                    const variableCostsList = document.getElementById('variable-costs-list');
                    variableCostsList.innerHTML = '';
                    data.variableCosts.forEach(cost => {
                        addVariableCost();
                        const lastCost = variableCostsList.querySelector('.cost-item:last-child');
                        if (lastCost) {
                            lastCost.querySelector('.variable-cost-name').value = cost.name;
                            lastCost.querySelector('.variable-cost-value').value = cost.value;
                        }
                    });
                }

                // Recalculate all values after loading
                attachRevenueListeners();
                attachEventRemoveListeners();
                attachFixedCostListeners();
                attachFixedCostRemoveListeners();
                attachVariableCostListeners();
                attachVariableCostRemoveListeners();
                handleRevenueInput();
                updateCapitalCalcs();
                updateSafeEquityCalcs();
                updateOperationsCalcs();
                updateRevenueProjectionTotals();

                console.log('Data loaded from', data.lastSaved);
                return true;
            } catch (error) {
                console.error('Error loading saved data:', error);
                return false;
            }
        }

        // Auto-save every 5 seconds when there are changes
        let autoSaveTimer;
        function scheduleAutoSave() {
            clearTimeout(autoSaveTimer);
            autoSaveTimer = setTimeout(() => {
                saveAllData();
            }, 5000);
        }

        // Add save listener to all inputs
        function attachAutoSaveListeners() {
            document.querySelectorAll('input, [contenteditable="true"]').forEach(element => {
                element.addEventListener('input', scheduleAutoSave);
                element.addEventListener('blur', saveAllData); // Save immediately on blur
            });
        }

        // Manual save button functionality (we'll add a button for this)
        function createSaveButton() {
            const saveBtn = document.createElement('button');
            saveBtn.id = 'save-progress-btn';
            saveBtn.textContent = 'ðŸ’¾ Save Progress';
            saveBtn.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: linear-gradient(135deg, #00d4ff 0%, #a855f7 100%);
                color: #0a0a0f;
                border: none;
                padding: 12px 24px;
                border-radius: 12px;
                font-weight: 600;
                cursor: pointer;
                box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
                z-index: 10000;
                font-family: inherit;
                font-size: 0.9rem;
                transition: all 0.2s ease;
            `;
            saveBtn.addEventListener('click', () => {
                saveAllData();
                saveBtn.textContent = 'âœ“ Saved!';
                saveBtn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                setTimeout(() => {
                    saveBtn.textContent = 'ðŸ’¾ Save Progress';
                    saveBtn.style.background = 'linear-gradient(135deg, #00d4ff 0%, #a855f7 100%)';
                }, 2000);
            });
            saveBtn.addEventListener('mouseenter', () => {
                saveBtn.style.transform = 'scale(1.05)';
            });
            saveBtn.addEventListener('mouseleave', () => {
                saveBtn.style.transform = 'scale(1)';
            });
            document.body.appendChild(saveBtn);
            console.log('âœ… Save button created and added to page');
        }

        // ============================================
        // REVENUE PROJECTIONS TABLE SYNC
        // ============================================

        function updateRevenueProjectionTotals() {
            try {
                // Calculate totals for each year from the editable revenue input fields
                const years = [1, 2, 3];
                years.forEach(year => {
                    let total = 0;
                    document.querySelectorAll(`.editable-revenue[data-year="${year}"]`).forEach(input => {
                        const value = parseCurrencyValue(input.value) || 0;
                        total += value;
                    });
                    const totalElement = document.getElementById(`revenue-year${year}-total`);
                    if (totalElement) {
                        totalElement.textContent = formatCurrencyShort(total);
                    }
                });

                // Update all connected displays
                updateAllConnectedValues();
            } catch (error) {
                console.error('Error in updateRevenueProjectionTotals:', error);
            }
        }

        function attachRevenueProjectionListeners() {
            document.querySelectorAll('.editable-revenue').forEach(input => {
                input.addEventListener('input', function () {
                    updateRevenueProjectionTotals();
                });

                input.addEventListener('blur', function () {
                    // Clean up the value on blur
                    const value = parseCurrencyValue(this.value) || 0;
                    this.value = formatCurrencyShort(value);
                    updateRevenueProjectionTotals();
                });

                input.addEventListener('keydown', function (e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        this.blur();
                    }
                });
            });
        }

        // ============================================
        // MASTER UPDATE FUNCTION - SYNC ALL VALUES
        // ============================================

        function updateAllConnectedValues() {
            try {
                // Get values from 3-Year Revenue Projections table (Business Plan tab)
                const year1Revenue = parseCurrencyValue(document.getElementById('revenue-year1-total')?.textContent) || 175000;
                const year2Revenue = parseCurrencyValue(document.getElementById('revenue-year2-total')?.textContent) || 600000;
                const year3Revenue = parseCurrencyValue(document.getElementById('revenue-year3-total')?.textContent) || 1500000;

                // Get MRR from Revenue tab (if available, use MRR * 12 for Year 1)
                const totalMRRElement = document.getElementById('total-mrr');
                if (totalMRRElement) {
                    const totalMRR = parseCurrencyValue(totalMRRElement.textContent) || 0;
                    // Optionally sync Year 1 with Revenue tab MRR * 12
                    // Uncomment the line below if you want Revenue tab to override Business Plan Year 1
                    // if (totalMRR > 0) year1Revenue = totalMRR * 12;
                }

                // Get values from Capital tab
                const investmentAmount = parseFloat(document.getElementById('investment-amount')?.value) || 500000;
                const safeCap = parseFloat(document.getElementById('safe-cap')?.value) || 2000000;

                // Calculate runway
                const monthlyBurn = parseFloat(document.getElementById('monthly-burn')?.value) || 27778;
                const currentCash = parseFloat(document.getElementById('current-cash')?.value) || 0;
                const runwayTarget = parseFloat(document.getElementById('runway-target')?.value) || 18;
                const currentRunway = monthlyBurn > 0 ? currentCash / monthlyBurn : 0;
                const runway = currentRunway > 0 ? currentRunway : runwayTarget;

                // Update One-Pager Financial Projections
                if (document.getElementById('onepager-year1-revenue')) {
                    document.getElementById('onepager-year1-revenue').textContent = formatCurrencyShort(year1Revenue);
                }
                if (document.getElementById('onepager-year2-revenue')) {
                    document.getElementById('onepager-year2-revenue').textContent = formatCurrencyShort(year2Revenue);
                }
                if (document.getElementById('onepager-year3-revenue')) {
                    document.getElementById('onepager-year3-revenue').textContent = formatCurrencyShort(year3Revenue);
                }

                // Update Elevator Pitch stats
                if (document.getElementById('pitch-seed-round')) {
                    document.getElementById('pitch-seed-round').textContent = formatCurrencyShort(investmentAmount);
                }
                if (document.getElementById('pitch-runway')) {
                    document.getElementById('pitch-runway').textContent = Math.round(runway) + ' mo';
                }

                // Update Elevator Pitch "The Ask" section
                if (document.getElementById('pitch-ask-amount')) {
                    document.getElementById('pitch-ask-amount').textContent = formatCurrencyShort(investmentAmount);
                }
                if (document.getElementById('pitch-safe-cap')) {
                    document.getElementById('pitch-safe-cap').textContent = formatCurrencyShort(safeCap);
                }
                if (document.getElementById('pitch-ask-runway')) {
                    document.getElementById('pitch-ask-runway').textContent = Math.round(runway) + ' months';
                }
                if (document.getElementById('pitch-year3-revenue')) {
                    document.getElementById('pitch-year3-revenue').textContent = formatCurrencyShort(year3Revenue);
                }
            } catch (error) {
                console.error('Error in updateAllConnectedValues:', error);
            }
        }

        // ============================================
        // ATTACH LISTENERS TO CAPITAL TAB INPUTS
        // ============================================

        function attachCapitalTabListeners() {
            const capitalInputs = ['investment-amount', 'safe-cap', 'monthly-burn', 'current-cash', 'runway-target'];
            capitalInputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', updateAllConnectedValues);
                }
            });
        }

        // ============================================
        // INITIALIZE
        // ============================================

        // Load saved data first
        const dataLoaded = loadAllData();

        attachRevenueListeners();
        attachCourseRemoveListeners();

        // Only run initial calculations if no data was loaded
        if (!dataLoaded) {
            updateCapitalCalcs();
            updateSafeEquityCalcs();
            updateRevenueCalcs();
            updateOperationsCalcs();
            updateProjectionChart('moderate');
        } else {
            // If data was loaded, recalculate everything with loaded values
            setTimeout(() => {
                updateCapitalCalcs();
                updateSafeEquityCalcs();
                updateRevenueCalcs();
                updateOperationsCalcs();
                updateProjectionChart('moderate');
            }, 50);
        }

        // Attach these listeners and update after initial calculations
        attachRevenueProjectionListeners();
        attachCapitalTabListeners();
        attachAutoSaveListeners();

        // Normalize all revenue cell formatting on load
        function normalizeRevenueCellFormatting() {
            document.querySelectorAll('.editable-revenue').forEach(cell => {
                const value = parseCurrencyValue(cell.textContent) || 0;
                cell.textContent = formatCurrencyShort(value);
            });
        }

        // ============================================
        // SAVE/LOAD BUTTON FUNCTIONALITY
        // ============================================

        const headerSaveBtn = document.getElementById('header-save-btn');
        const headerLoadBtn = document.getElementById('header-load-btn');
        const loadDropdown = document.getElementById('load-dropdown');
        const savedStatesList = document.getElementById('saved-states-list');

        // Save button - saves with timestamp
        if (headerSaveBtn) {
            headerSaveBtn.addEventListener('click', () => {
                console.log('ðŸ’¾ Save button clicked');
                saveTimestampedState();
            });
            console.log('âœ… Save button listener attached');
        } else {
            console.error('âŒ Save button not found!');
        }

        // Load button - toggles dropdown
        if (headerLoadBtn && loadDropdown) {
            headerLoadBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                console.log('ðŸ“‚ Load button clicked');
                const isVisible = loadDropdown.style.display === 'block';
                loadDropdown.style.display = isVisible ? 'none' : 'block';
                console.log('Dropdown display set to:', loadDropdown.style.display);
                if (!isVisible) {
                    refreshSavedStatesList();
                }
            });
            console.log('âœ… Load button listener attached');
        } else {
            console.error('âŒ Load button or dropdown not found!', { headerLoadBtn, loadDropdown });
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (headerLoadBtn && loadDropdown && !headerLoadBtn.contains(e.target) && !loadDropdown.contains(e.target)) {
                loadDropdown.style.display = 'none';
            }
        });

        function saveTimestampedState() {
            console.log('ðŸ“ Starting save process...');
            const timestamp = new Date().toISOString();
            const data = {
                revenueInputs: {},
                capitalInputs: {},
                operationsInputs: {},
                revenueProjections: {},
                editableText: {},
                courses: [],
                projects: [],
                grants: [],
                events: [],
                timestamp: timestamp
            };
            console.log('Created data structure with timestamp:', timestamp);

            // Save all input fields
            document.querySelectorAll('input[type="number"], input[type="text"], input[type="range"]').forEach(input => {
                if (input.id) {
                    data.revenueInputs[input.id] = input.value;
                }
            });

            // Save editable revenue projections
            document.querySelectorAll('.editable-revenue').forEach(input => {
                const year = input.dataset.year;
                const stream = input.dataset.stream;
                if (year && stream) {
                    data.revenueProjections[`${stream}-year${year}`] = input.value;
                }
            });

            // Save contenteditable fields
            document.querySelectorAll('[contenteditable="true"]').forEach(element => {
                if (element.id) {
                    data.editableText[element.id] = element.textContent || element.innerHTML;
                }
            });

            // Save courses
            document.querySelectorAll('#course-list .course-item').forEach(item => {
                data.courses.push({
                    name: item.querySelector('.course-name').value,
                    price: item.querySelector('.course-price').value,
                    sales: item.querySelector('.course-sales').value
                });
            });

            // Save projects
            document.querySelectorAll('#labs-project-list .course-item').forEach(item => {
                const typeSelect = item.querySelector('.project-type');
                data.projects.push({
                    name: item.querySelector('.project-name').value,
                    value: item.querySelector('.project-value').value,
                    type: typeSelect ? typeSelect.value : 'monthly'
                });
            });

            // Save grants
            document.querySelectorAll('#labs-grant-list .course-item').forEach(item => {
                data.grants.push({
                    name: item.querySelector('.grant-name').value,
                    value: item.querySelector('.grant-value').value
                });
            });

            // Save events
            document.querySelectorAll('#society-events-list .event-item').forEach(item => {
                data.events.push({
                    name: item.querySelector('.event-name').value,
                    estimated: item.querySelector('.event-estimated').value,
                    actual: item.querySelector('.event-actual').value
                });
            });

            // Get existing saved states
            const savedStates = JSON.parse(localStorage.getItem('cyberdelicCFOSavedStates') || '[]');

            // Add new state
            savedStates.push(data);

            // Keep only last 20 saves
            if (savedStates.length > 20) {
                savedStates.shift();
            }

            // Save to localStorage
            localStorage.setItem('cyberdelicCFOSavedStates', JSON.stringify(savedStates));
            console.log('âœ… Saved to localStorage. Total saves:', savedStates.length);
            console.log('Saved data preview:', {
                inputsCount: Object.keys(data.revenueInputs).length,
                coursesCount: data.courses.length,
                projectsCount: data.projects.length,
                grantsCount: data.grants.length
            });

            // Also save as current state (for auto-save compatibility)
            saveAllData();

            // Show success message on Save button
            const originalText = headerSaveBtn.innerHTML;
            const originalBg = headerSaveBtn.style.background;
            headerSaveBtn.innerHTML = 'âœ“ Saved!';
            headerSaveBtn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
            setTimeout(() => {
                headerSaveBtn.innerHTML = originalText;
                headerSaveBtn.style.background = originalBg;
            }, 2000);

            refreshSavedStatesList();
        }

        function loadTimestampedState(timestamp) {
            console.log('ðŸ“‚ Loading state with timestamp:', timestamp);
            const savedStates = JSON.parse(localStorage.getItem('cyberdelicCFOSavedStates') || '[]');
            console.log('Found', savedStates.length, 'saved states');
            const state = savedStates.find(s => s.timestamp === timestamp);

            if (!state) {
                console.error('âŒ State not found for timestamp:', timestamp);
                alert('State not found!');
                return;
            }
            console.log('âœ… State found, restoring data...');

            // Restore all input fields
            Object.keys(state.revenueInputs || {}).forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.value = state.revenueInputs[id];
                }
            });

            // Restore editable revenue projections
            Object.keys(state.revenueProjections || {}).forEach(key => {
                const [stream, yearPart] = key.split('-year');
                const input = document.querySelector(`.editable-revenue[data-year="${yearPart}"][data-stream="${stream}"]`);
                if (input) {
                    input.value = state.revenueProjections[key];
                }
            });

            // Restore contenteditable fields
            Object.keys(state.editableText || {}).forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = state.editableText[id];
                }
            });

            // Restore courses
            if (state.courses && state.courses.length > 0) {
                const courseList = document.getElementById('course-list');
                courseList.innerHTML = '';
                state.courses.forEach(course => {
                    addCourse();
                    const lastCourse = courseList.querySelector('.course-item:last-child');
                    if (lastCourse) {
                        lastCourse.querySelector('.course-name').value = course.name;
                        lastCourse.querySelector('.course-price').value = course.price;
                        lastCourse.querySelector('.course-sales').value = course.sales;
                    }
                });
            }

            // Restore projects
            if (state.projects && state.projects.length > 0) {
                const projectList = document.getElementById('labs-project-list');
                projectList.innerHTML = '';
                state.projects.forEach(project => {
                    addProject();
                    const lastProject = projectList.querySelector('.course-item:last-child');
                    if (lastProject) {
                        lastProject.querySelector('.project-name').value = project.name;
                        lastProject.querySelector('.project-value').value = project.value;
                        if (lastProject.querySelector('.project-type')) {
                            lastProject.querySelector('.project-type').value = project.type || 'monthly';
                        }
                    }
                });
            }

            // Restore grants
            if (state.grants && state.grants.length > 0) {
                const grantList = document.getElementById('labs-grant-list');
                grantList.innerHTML = '';
                state.grants.forEach(grant => {
                    addGrant();
                    const lastGrant = grantList.querySelector('.course-item:last-child');
                    if (lastGrant) {
                        lastGrant.querySelector('.grant-name').value = grant.name;
                        lastGrant.querySelector('.grant-value').value = grant.value;
                    }
                });
            }

            // Restore events
            if (state.events && state.events.length > 0) {
                const eventList = document.getElementById('society-events-list');
                eventList.innerHTML = '';
                state.events.forEach(event => {
                    addEvent();
                    const lastEvent = eventList.querySelector('.event-item:last-child');
                    if (lastEvent) {
                        lastEvent.querySelector('.event-name').value = event.name;
                        lastEvent.querySelector('.event-estimated').value = event.estimated;
                        lastEvent.querySelector('.event-actual').value = event.actual;
                    }
                });
            }

            // Recalculate everything
            console.log('ðŸ”„ Recalculating all values...');
            handleRevenueInput();
            updateCapitalCalcs();
            updateSafeEquityCalcs();
            updateOperationsCalcs();
            updateRevenueProjectionTotals();

            loadDropdown.style.display = 'none';
            console.log('âœ… State loaded and calculations complete!');
            alert('State loaded successfully!');
        }

        function deleteTimestampedState(timestamp, event) {
            event.stopPropagation();

            if (!confirm('Are you sure you want to delete this saved state?')) {
                return;
            }

            const savedStates = JSON.parse(localStorage.getItem('cyberdelicCFOSavedStates') || '[]');
            const filteredStates = savedStates.filter(s => s.timestamp !== timestamp);
            localStorage.setItem('cyberdelicCFOSavedStates', JSON.stringify(filteredStates));
            refreshSavedStatesList();
        }

        function formatTimestamp(isoString) {
            const date = new Date(isoString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);

            let timeAgo;
            if (diffMins < 1) {
                timeAgo = 'Just now';
            } else if (diffMins < 60) {
                timeAgo = `${diffMins}m ago`;
            } else if (diffHours < 24) {
                timeAgo = `${diffHours}h ago`;
            } else if (diffDays === 1) {
                timeAgo = 'Yesterday';
            } else if (diffDays < 7) {
                timeAgo = `${diffDays}d ago`;
            } else {
                timeAgo = date.toLocaleDateString();
            }

            const timeStr = date.toLocaleString('en-US', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            return { timeStr, timeAgo };
        }

        function refreshSavedStatesList() {
            const savedStates = JSON.parse(localStorage.getItem('cyberdelicCFOSavedStates') || '[]');

            if (savedStates.length === 0) {
                savedStatesList.innerHTML = '<div style="padding: 1rem; text-align: center; color: var(--text-secondary); font-size: 0.85rem;">No saved states yet</div>';
                return;
            }

            // Sort by timestamp (newest first)
            savedStates.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

            savedStatesList.innerHTML = savedStates.map(state => {
                const { timeStr, timeAgo } = formatTimestamp(state.timestamp);
                return `
                    <button class="saved-state-item" onclick="loadTimestampedState('${state.timestamp}')">
                        <div style="flex: 1;">
                            <div style="font-weight: 500; margin-bottom: 0.25rem;">${timeStr}</div>
                            <div class="saved-state-time">${timeAgo}</div>
                        </div>
                        <button class="delete-state-btn" onclick="deleteTimestampedState('${state.timestamp}', event)">Delete</button>
                    </button>
                `;
            }).join('');
        }

        // Make functions global so they can be called from onclick attributes
        window.loadTimestampedState = loadTimestampedState;
        window.deleteTimestampedState = deleteTimestampedState;

        console.log('âœ… Save/Load buttons connected');

        // ============================================
        // MOBILE HAMBURGER MENU
        // ============================================

        const hamburgerBtn = document.getElementById('hamburger-btn');
        const hamburgerIcon = document.getElementById('hamburger-icon');
        const navTabs = document.getElementById('nav-tabs');

        console.log('Hamburger elements:', { hamburgerBtn, hamburgerIcon, navTabs });

        if (hamburgerBtn && navTabs) {
            hamburgerBtn.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                console.log('ðŸ” Hamburger clicked! Current state:', navTabs.classList.contains('mobile-open'));
                navTabs.classList.toggle('mobile-open');
                hamburgerIcon.classList.toggle('active');
                console.log('New state:', navTabs.classList.contains('mobile-open'));
            });

            // Also listen on the icon itself
            if (hamburgerIcon) {
                hamburgerIcon.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('ðŸ” Icon clicked!');
                    navTabs.classList.toggle('mobile-open');
                    hamburgerIcon.classList.toggle('active');
                });
            }

            // Close menu when a tab is clicked
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    if (window.innerWidth <= 768) {
                        navTabs.classList.remove('mobile-open');
                        hamburgerIcon.classList.remove('active');
                    }
                });
            });

            console.log('âœ… Mobile hamburger menu connected');
        } else {
            console.error('âŒ Hamburger menu elements not found!', { hamburgerBtn, navTabs });
        }

        // ============================================
        // THEME TOGGLE
        // ============================================

        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const html = document.documentElement;

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'light') {
            html.setAttribute('data-theme', 'light');
            themeIcon.textContent = 'â˜€ï¸';
        }

        if (themeToggle) {
            themeToggle.addEventListener('click', () => {
                const currentTheme = html.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';

                html.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);

                themeIcon.textContent = newTheme === 'light' ? 'â˜€ï¸' : 'ðŸŒ™';

                console.log('ðŸŽ¨ Theme switched to:', newTheme);
            });
            console.log('âœ… Theme toggle connected');
        }

        // ============================================
        // ELEVATOR PITCH LINKS
        // ============================================

        const pitchDeckLinkInput = document.getElementById('pitch-deck-link');
        const meetingLinkInput = document.getElementById('meeting-link');
        const pitchDeckButton = document.getElementById('pitch-deck-button');
        const meetingButton = document.getElementById('meeting-button');

        // Update button hrefs when inputs change
        if (pitchDeckLinkInput && pitchDeckButton) {
            pitchDeckLinkInput.addEventListener('input', () => {
                const url = pitchDeckLinkInput.value;
                pitchDeckButton.href = url || '#';
                if (url) {
                    pitchDeckButton.setAttribute('target', '_blank');
                    pitchDeckButton.setAttribute('rel', 'noopener noreferrer');
                } else {
                    pitchDeckButton.removeAttribute('target');
                    pitchDeckButton.removeAttribute('rel');
                }
            });
        }

        if (meetingLinkInput && meetingButton) {
            meetingLinkInput.addEventListener('input', () => {
                const url = meetingLinkInput.value;
                meetingButton.href = url || '#';
                if (url) {
                    meetingButton.setAttribute('target', '_blank');
                    meetingButton.setAttribute('rel', 'noopener noreferrer');
                } else {
                    meetingButton.removeAttribute('target');
                    meetingButton.removeAttribute('rel');
                }
            });
        }

        // Normalize all revenue cell formatting on load
        function normalizeRevenueCellFormatting() {
            document.querySelectorAll('.editable-revenue').forEach(input => {
                const value = parseCurrencyValue(input.value) || 0;
                input.value = formatCurrencyShort(value);
            });
        }

        // Small delay to ensure DOM is fully ready, then normalize and update
        setTimeout(() => {
            console.log('ðŸš€ Initial page load: normalizing and updating values...');
            // Normalize formatting and update values
            normalizeRevenueCellFormatting();
            updateRevenueProjectionTotals();
            updateAllConnectedValues();

            // Draw revenue chart after values are loaded
            console.log('ðŸ“Š Initial page load: drawing revenue chart...');
            drawOnePagerRevenueChart();

            // Sync CAC values to One-Pager on initial load
            if (typeof syncCACToOnePager === 'function') {
                console.log('ðŸ”„ Initial page load: syncing CAC values...');
                syncCACToOnePager();
            }
        }, 200);

        // ============================================
        // ONE-PAGER ENHANCEMENTS
        // ============================================

        /**
         * Draws a simple bar/trend chart for revenue projections on the One-Pager
         * Uses native Canvas API to avoid external dependencies
         */
        function drawOnePagerRevenueChart() {
            try {
                console.log('ðŸ“Š Drawing One-Pager revenue chart...');
                const canvas = document.getElementById('onepager-revenue-chart');
                if (!canvas) {
                    console.error('âŒ Canvas element "onepager-revenue-chart" not found!');
                    return;
                }

                // Local helper to ensure parsing works
                const parseVal = (text) => {
                    if (!text) return 0;
                    text = text.trim();
                    const multi = text.toUpperCase().includes('M') ? 1000000 : text.toUpperCase().includes('K') ? 1000 : 1;
                    const val = parseFloat(text.replace(/[^0-9.]/g, '')) || 0;
                    return val * multi;
                };

                // Local helper for formatting to avoid any dependency issues
                const formatVal = (val) => {
                    if (val >= 1000000) return '$' + (val / 1000000).toFixed(1) + 'M';
                    if (val >= 1000) return '$' + (val / 1000).toFixed(0) + 'K';
                    return '$' + val.toFixed(0);
                };

                // Get Data
                const y1El = document.getElementById('onepager-year1-revenue');
                const y2El = document.getElementById('onepager-year2-revenue');
                const y3El = document.getElementById('onepager-year3-revenue');

                // Fallback values matching request details
                let v1 = 175000, v2 = 600000, v3 = 1500000;

                if (y1El) v1 = parseVal(y1El.textContent) || v1;
                if (y2El) v2 = parseVal(y2El.textContent) || v2;
                if (y3El) v3 = parseVal(y3El.textContent) || v3;

                console.log('Values:', v1, v2, v3);

                // High DPI setup
                const dpr = window.devicePixelRatio || 1;
                let rect = canvas.getBoundingClientRect();

                // Fallback for hidden/zero-size state
                if (rect.width === 0 || rect.height === 0) {
                    const parent = canvas.parentElement;
                    const parentW = parent ? parent.offsetWidth : 600;
                    const w = parentW || 600;
                    const h = 300;
                    rect = { width: w, height: h };
                    // Force style to match logic
                    canvas.style.width = w + 'px';
                    canvas.style.height = h + 'px';
                }

                canvas.width = rect.width * dpr;
                canvas.height = rect.height * dpr;

                const ctx = canvas.getContext('2d');
                ctx.scale(dpr, dpr);

                const width = rect.width;
                const height = rect.height;

                // Safety clear
                ctx.clearRect(0, 0, width, height);
                // Background debug (remove later if unwanted, but good for proving it works)
                // ctx.fillStyle = 'rgba(255,255,255,0.02)';
                // ctx.fillRect(0,0,width,height);

                const values = [v1, v2, v3];
                const maxVal = Math.max(...values) * 1.2; // 20% headroom

                // Layout
                const padding = 30;
                const chartW = width - (padding * 2);
                const chartH = height - (padding * 2);
                const barWidth = chartW / 4;
                const gap = barWidth * 0.5;

                // Draw Bars
                values.forEach((val, i) => {
                    if (maxVal === 0) return;
                    const h = (val / maxVal) * chartH;
                    const x = padding + (i * (barWidth + gap));
                    const y = height - padding - h;

                    // Glow
                    ctx.shadowBlur = 15;
                    ctx.shadowColor = i === 0 ? 'rgba(0, 212, 255, 0.4)' : i === 1 ? 'rgba(168, 85, 247, 0.4)' : 'rgba(236, 72, 153, 0.4)';

                    // Gradient
                    const gr = ctx.createLinearGradient(x, y, x, height - padding);
                    if (i === 0) { // Year 1 - Cyan
                        gr.addColorStop(0, '#00d4ff'); gr.addColorStop(1, 'rgba(0, 212, 255, 0.2)');
                    } else if (i === 1) { // Year 2 - Purple
                        gr.addColorStop(0, '#a855f7'); gr.addColorStop(1, 'rgba(168, 85, 247, 0.2)');
                    } else { // Year 3 - Pink
                        gr.addColorStop(0, '#ec4899'); gr.addColorStop(1, 'rgba(236, 72, 153, 0.2)');
                    }

                    ctx.fillStyle = gr;

                    // Rounded top bars: use roundRect if supported, else rect
                    ctx.beginPath();
                    if (ctx.roundRect) {
                        ctx.roundRect(x, y, barWidth, h, [8, 8, 0, 0]);
                    } else {
                        ctx.rect(x, y, barWidth, h);
                    }
                    ctx.fill();

                    // Reset Shadow for text
                    ctx.shadowBlur = 0;

                    // Label Year
                    ctx.fillStyle = '#a0a0b0';
                    ctx.font = '500 12px Inter, sans-serif';
                    ctx.textAlign = 'center';
                    ctx.fillText(`Year ${i + 1}`, x + barWidth / 2, height - padding + 16);

                    // Label Value (on top of bar)
                    ctx.fillStyle = '#fff';
                    ctx.font = '700 12px JetBrains Mono, monospace';
                    ctx.fillText(formatVal(val), x + barWidth / 2, y - 8);
                });

                // Trend Line
                ctx.beginPath();
                ctx.shadowBlur = 10;
                ctx.shadowColor = 'rgba(16, 185, 129, 0.5)';
                ctx.strokeStyle = '#10b981';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]); // Dotted

                values.forEach((val, i) => {
                    const h = (val / maxVal) * chartH;
                    const x = padding + (i * (barWidth + gap)) + barWidth / 2;
                    const y = height - padding - h;

                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                });
                ctx.stroke();
                ctx.setLineDash([]);
                ctx.shadowBlur = 0;

                // CAGR Calc Update
                if (v1 > 0 && v3 > 0) {
                    const cagr = (Math.pow(v3 / v1, 0.5) - 1) * 100;
                    const cagrEl = document.getElementById('revenue-cagr');
                    if (cagrEl) cagrEl.textContent = cagr.toFixed(0) + '%';
                }

                console.log('âœ… Chart drawn successfully!');
            } catch (e) {
                console.error('CRITICAL ERROR drawing chart:', e);
            }
        }

        /**
         * Sync CAC values from Revenue tab inputs to One-Pager Business Model display
         */
        function syncCACToOnePager() {
            console.log('ðŸ”„ Syncing CAC values to One-Pager...');

            const branches = ['society', 'labs', 'academy', 'dojos'];

            branches.forEach(branch => {
                const cacInput = document.getElementById(`${branch}-cac`);
                const onepagerCacDisplay = document.getElementById(`onepager-${branch}-cac`);
                const onepagerLtvDisplay = document.getElementById(`onepager-${branch}-ltv`);
                const onepagerRatioDisplay = document.getElementById(`onepager-${branch}-ratio`);

                if (cacInput && onepagerCacDisplay) {
                    const cac = parseFloat(cacInput.value) || 0;
                    onepagerCacDisplay.textContent = cac;
                    console.log(`âœ… ${branch} CAC synced: $${cac}`);

                    // Also update ratio if LTV exists
                    if (onepagerLtvDisplay && onepagerRatioDisplay) {
                        const ltv = parseFloat(onepagerLtvDisplay.textContent) || 0;
                        const ratio = cac > 0 ? (ltv / cac).toFixed(1) : 0;
                        onepagerRatioDisplay.textContent = ratio;
                        console.log(`âœ… ${branch} Ratio updated: ${ratio}:1`);
                    }
                } else {
                    console.warn(`âš ï¸ ${branch} CAC elements not found`, {
                        cacInput: !!cacInput,
                        onepagerCacDisplay: !!onepagerCacDisplay
                    });
                }
            });
        }

        /**
         * Copy shareable link to clipboard
         */
        function copyOnePagerLink() {
            const url = window.location.href.split('#')[0] + '#onepager';

            navigator.clipboard.writeText(url).then(() => {
                // Show success feedback
                const button = event.target;
                const originalText = button.innerHTML;
                button.innerHTML = 'âœ“ Copied!';
                button.style.background = 'var(--accent-green)';

                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.style.background = '';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                alert('Failed to copy link. Please copy manually: ' + url);
            });
        }

        /**
         * Helper function to parse currency values
         */
        function parseCurrencyValue(text) {
            if (!text) return 0;
            // Remove currency symbols and letters, keep numbers and decimals
            const cleaned = text.replace(/[^0-9.]/g, '');
            const value = parseFloat(cleaned);

            // Handle K and M suffixes
            if (text.includes('K') || text.includes('k')) {
                return value * 1000;
            }
            if (text.includes('M') || text.includes('m')) {
                return value * 1000000;
            }

            return value || 0;
        }

        /**
         * Helper function to format currency with K/M suffix
         */
        function formatCurrencyShort(value) {
            if (value >= 1000000) {
                return '$' + (value / 1000000).toFixed(1) + 'M';
            }
            if (value >= 1000) {
                return '$' + (value / 1000).toFixed(0) + 'K';
            }
            return '$' + value.toFixed(0);
        }

        // BUG 5 FIX: Enhanced tooltip functionality for help icons
        // NOTE: Tooltip initialization has been moved to the consolidated DOMContentLoaded handler above

        // Update revenue chart when revenue projection values change
        // NOTE: MutationObserver setup has been moved to the consolidated DOMContentLoaded handler above

        // ============================================
        // EMERGENCY CHART FALLBACK
        // ============================================

        /**
         * Emergency fallback to ensure chart renders even if other triggers fail
         * Checks every 2 seconds if One-Pager is visible and chart canvas is blank
         */
        let chartCheckInterval = setInterval(function () {
            const onepagerSection = document.getElementById('onepager');
            if (!onepagerSection) {
                console.log('â³ Emergency fallback: One-Pager section not found yet');
                return;
            }

            // Check if One-Pager tab is currently visible
            const isVisible = onepagerSection.style.display !== 'none';
            if (!isVisible) return;

            const canvas = document.getElementById('onepager-revenue-chart');
            if (!canvas) {
                console.warn('âš ï¸ Emergency fallback: Canvas element not found');
                return;
            }

            const ctx = canvas.getContext('2d');
            if (!ctx) return;

            // Check if canvas is blank by sampling a pixel
            try {
                const imageData = ctx.getImageData(0, 0, 1, 1);
                const isBlank = imageData.data[3] === 0; // Alpha channel = 0 means transparent/blank

                if (isBlank) {
                    console.log('âš¡ Emergency chart redraw triggered - canvas was blank');
                    drawOnePagerRevenueChart();
                }
            } catch (e) {
                // Canvas might not be ready yet, ignore
            }
        }, 2000);

        // ============================================
        // NEW FEATURES - INLINE EDITING SYSTEM
        // ============================================

        /**
         * Makes specified elements editable inline with click-to-edit functionality
         * WHY: Allows founders to customize text without needing to find separate input fields
         * Improves UX by making content feel more direct and editable
         */
        function makeInlineEditable(selector) {
            document.querySelectorAll(selector).forEach(element => {
                // Skip if already editable via contenteditable attribute
                if (element.hasAttribute('contenteditable')) return;

                element.classList.add('editable-inline');
                element.addEventListener('click', function (e) {
                    if (this.classList.contains('editing')) return;

                    const original = this.textContent;
                    const isMultiline = this.offsetHeight > 60 || original.length > 100;

                    const input = document.createElement(isMultiline ? 'textarea' : 'input');
                    input.value = original;
                    input.className = 'inline-edit-input';

                    this.textContent = '';
                    this.appendChild(input);
                    this.classList.add('editing');
                    input.focus();
                    input.select();

                    const save = () => {
                        const newValue = input.value || original;
                        this.textContent = newValue;
                        this.classList.remove('editing');
                        saveAllData(); // Persist changes
                    };

                    input.addEventListener('blur', save);
                    input.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' && (!isMultiline || e.ctrlKey)) {
                            e.preventDefault();
                            save();
                        }
                        if (e.key === 'Escape') {
                            this.textContent = original;
                            this.classList.remove('editing');
                        }
                    });
                });
            });
        }

        // Apply inline editing to appropriate elements on load
        // WHY: These are descriptive text fields that benefit from inline editing
        // We avoid applying to numerical inputs or calculated fields
        // NOTE: Inline editing initialization has been moved to the consolidated DOMContentLoaded handler above

        // ============================================
        // DASHBOARD DECISION STATUS UPDATES
        // ============================================

        /**
         * Updates the decision status strip and next action hints
         * WHY: Provides founders with actionable guidance based on their current state
         * Prevents analysis paralysis by suggesting the next concrete step
         */
        function updateDashboardStatus() {
            // Get current runway
            const runwayMonths = parseFloat(document.getElementById('runway-months')?.textContent || '0');
            const runwayStatus = document.getElementById('runway-health-status');

            // Update runway health status
            if (runwayMonths < 3) {
                runwayStatus.textContent = `Critical (${runwayMonths} mo)`;
                runwayStatus.className = 'status-value critical';
            } else if (runwayMonths < 6) {
                runwayStatus.textContent = `Urgent (${runwayMonths} mo)`;
                runwayStatus.className = 'status-value warning';
            } else if (runwayMonths < 12) {
                runwayStatus.textContent = `Adequate (${runwayMonths} mo)`;
                runwayStatus.className = 'status-value';
            } else {
                runwayStatus.textContent = `Healthy (${runwayMonths} mo)`;
                runwayStatus.className = 'status-value success';
            }

            // Check LTV:CAC ratio
            const ltvCacText = document.getElementById('ltv-cac-ratio')?.textContent || '0:1';
            const revenueStatus = document.getElementById('revenue-model-status');

            if (ltvCacText === '0:1' || ltvCacText === 'N/A') {
                revenueStatus.textContent = 'Needs validation';
                revenueStatus.className = 'status-value warning';
            } else {
                const ratio = parseFloat(ltvCacText.split(':')[0]);
                if (ratio >= 3) {
                    revenueStatus.textContent = `Strong (${ltvCacText})`;
                    revenueStatus.className = 'status-value success';
                } else if (ratio >= 2) {
                    revenueStatus.textContent = `Moderate (${ltvCacText})`;
                    revenueStatus.className = 'status-value';
                } else {
                    revenueStatus.textContent = `Weak (${ltvCacText})`;
                    revenueStatus.className = 'status-value warning';
                }
            }

            // Determine raise readiness
            const raiseStatus = document.getElementById('raise-readiness-status');
            const hasRevenue = ltvCacText !== '0:1' && ltvCacText !== 'N/A';
            const hasRunway = runwayMonths > 3;

            if (hasRevenue && hasRunway && runwayMonths >= 12) {
                raiseStatus.textContent = 'Ready to raise';
                raiseStatus.className = 'status-value success';
            } else if (hasRevenue && hasRunway) {
                raiseStatus.textContent = 'Nearly ready';
                raiseStatus.className = 'status-value';
            } else {
                raiseStatus.textContent = 'Not ready';
                raiseStatus.className = 'status-value warning';
            }

            // Update next action hint
            const nextActionEl = document.getElementById('next-action-text');
            if (runwayMonths < 3) {
                nextActionEl.textContent = 'URGENT: Your runway is critical. Review Operations tab and consider immediate fundraising.';
            } else if (ltvCacText === '0:1' || ltvCacText === 'N/A') {
                nextActionEl.textContent = 'Calculate your customer economics in the Revenue tab to validate your business model.';
            } else if (runwayMonths < 6) {
                nextActionEl.textContent = 'Review Capital Raise tab to model funding scenarios and extend your runway.';
            } else if (!hasRevenue) {
                nextActionEl.textContent = 'Document your assumptions in the Business Plan tab to identify validation needs.';
            } else {
                nextActionEl.textContent = 'Your fundamentals look solid. Focus on execution and tracking actual vs. projected metrics.';
            }
        }

        // Update dashboard status whenever relevant values change
        // WHY: Keep guidance current as founder updates their numbers
        const dashboardUpdateInterval = setInterval(updateDashboardStatus, 2000);
        updateDashboardStatus(); // Initial update

        // ============================================
        // BUSINESS PLAN COHERENCE CHECKING
        // ============================================

        /**
         * Checks for potential inconsistencies in business plan
         * WHY: Helps founders spot red flags that investors will notice
         * Soft warnings, not blocking - encourages reflection without being prescriptive
         */
        function checkBusinessPlanCoherence() {
            const warnings = [];
            const warningsEl = document.getElementById('business-plan-warnings');
            if (!warningsEl) return;

            // Check: High revenue growth without explaining team scaling
            const year1Rev = parseCurrencyValue(document.getElementById('revenue-year1-total')?.textContent || '$0');
            const year3Rev = parseCurrencyValue(document.getElementById('revenue-year3-total')?.textContent || '$0');

            if (year1Rev > 0 && year3Rev / year1Rev > 8) {
                warnings.push('âš ï¸ You\'re projecting >8x revenue growth over 3 years. Consider documenting how you\'ll scale operations in your assumptions.');
            }

            // Check: Very high burn rate relative to year 1 revenue
            const burnRate = parseFloat(document.getElementById('monthly-burn')?.value || '0');
            const monthlyBurnVsRevenue = (burnRate * 12) / year1Rev;

            if (year1Rev > 0 && monthlyBurnVsRevenue > 5) {
                warnings.push('âš ï¸ Your annual burn rate is >5x your Year 1 revenue. This may raise questions about path to profitability.');
            }

            // Display warnings
            warningsEl.innerHTML = warnings.map(w =>
                `<div class="coherence-warning">${w}</div>`
            ).join('');
        }

        // Run coherence check when user switches to Business Plan tab
        // WHY: Only check when relevant, avoid constant interruptions
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                if (tab.dataset.section === 'business-plan') {
                    setTimeout(checkBusinessPlanCoherence, 500);
                }
            });
        });

        // ============================================
        // CAPITAL RAISE INTENT GUIDANCE
        // ============================================

        /**
         * Updates fundraising guidance based on selected intent
         * WHY: Different fundraising goals require different amounts and strategies
         * Helps founders think about milestones, not just minimizing dilution
         */
        const raiseIntentSelect = document.getElementById('raise-intent');
        if (raiseIntentSelect) {
            raiseIntentSelect.addEventListener('change', (e) => {
                const intent = e.target.value;
                const runwayTarget = document.getElementById('runway-target');
                const capitalWarnings = document.getElementById('capital-warnings');

                if (!runwayTarget || !capitalWarnings) return;

                let suggestion = '';
                let targetMonths = 18;

                switch (intent) {
                    case 'survival':
                        targetMonths = 12;
                        suggestion = '<div class="alert-info"><strong>Survival Mode:</strong> You\'re raising enough to prove your core hypothesis or reach break-even. Keep burn low and focus on one key metric. Typical range: 12-15 months runway.</div>';
                        break;
                    case 'momentum':
                        targetMonths = 18;
                        suggestion = '<div class="alert-info"><strong>Momentum Building:</strong> You need time to validate product-market fit and show repeatable customer acquisition. Typical range: 18-24 months runway to hit Series A milestones.</div>';
                        break;
                    case 'acceleration':
                        targetMonths = 24;
                        suggestion = '<div class="alert-info"><strong>Scaling Mode:</strong> You have proven unit economics and need capital to scale GTM. Focus on maintaining healthy CAC payback while growing. Typical range: 24-36 months runway.</div>';
                        break;
                }

                if (suggestion) {
                    runwayTarget.value = targetMonths;
                    runwayTarget.dispatchEvent(new Event('input'));
                    capitalWarnings.innerHTML = suggestion;
                }
            });
        }

        // ============================================
        // SAVE/LOAD WITH NAMING SYSTEM
        // ============================================

        /**
         * Enhanced save system with multiple named saves
         * WHY: Founders need to model different scenarios (conservative, aggressive, etc.)
         * without losing their work. Named saves prevent accidental overwrites.
         */

        // Get or initialize saves object from localStorage
        function getAllSaves() {
            const savesJson = localStorage.getItem('cfo-saves');
            return savesJson ? JSON.parse(savesJson) : {};
        }

        /**
         * CRITICAL FIX: Collect all data from the form
         * This function was missing and causing saveWithName() to fail
         */
        function collectAllData() {
            console.log('ðŸ“¦ Collecting all data...');
            const data = {
                revenueInputs: {},
                capitalInputs: {},
                operationsInputs: {},
                revenueProjections: {},
                editableText: {},
                courses: [],
                projects: [],
                grants: [],
                events: [],
                fixedCosts: [],
                variableCosts: [],
                timestamp: new Date().toISOString()
            };

            // Save all input fields by ID
            document.querySelectorAll('input[type="number"], input[type="text"], input[type="range"]').forEach(input => {
                if (input.id) {
                    data.revenueInputs[input.id] = input.value;
                }
            });

            // Save editable revenue input fields
            document.querySelectorAll('.editable-revenue').forEach(input => {
                const year = input.dataset.year;
                const stream = input.dataset.stream;
                if (year && stream) {
                    data.revenueProjections[`${stream}-year${year}`] = input.value;
                }
            });

            // Save all contenteditable text fields
            document.querySelectorAll('[contenteditable="true"]').forEach(element => {
                if (element.id) {
                    data.editableText[element.id] = element.textContent || element.innerHTML;
                }
            });

            // Save courses
            document.querySelectorAll('#course-list .course-item').forEach(item => {
                data.courses.push({
                    name: item.querySelector('.course-name').value,
                    price: item.querySelector('.course-price').value,
                    sales: item.querySelector('.course-sales').value
                });
            });

            // Save labs projects
            document.querySelectorAll('#labs-project-list .course-item').forEach(item => {
                const typeSelect = item.querySelector('.project-type');
                data.projects.push({
                    name: item.querySelector('.project-name').value,
                    value: item.querySelector('.project-value').value,
                    type: typeSelect ? typeSelect.value : 'monthly'
                });
            });

            // Save labs grants/partnerships
            document.querySelectorAll('#labs-grant-list .course-item').forEach(item => {
                data.grants.push({
                    name: item.querySelector('.grant-name').value,
                    value: item.querySelector('.grant-value').value
                });
            });

            // Save society events
            document.querySelectorAll('#society-events-list .event-item').forEach(item => {
                data.events.push({
                    name: item.querySelector('.event-name').value,
                    estimated: item.querySelector('.event-estimated').value,
                    actual: item.querySelector('.event-actual').value
                });
            });

            // Save fixed costs
            const fixedCosts = [];
            document.querySelectorAll('#fixed-costs-list .fixed-cost-item').forEach(costItem => {
                fixedCosts.push({
                    name: costItem.querySelector('.fixed-cost-name').value,
                    value: costItem.querySelector('.fixed-cost-value').value
                });
            });
            data.fixedCosts = fixedCosts;

            // Save variable costs
            const variableCosts = [];
            document.querySelectorAll('#variable-costs-list .variable-cost-item').forEach(costItem => {
                variableCosts.push({
                    name: costItem.querySelector('.variable-cost-name').value,
                    value: costItem.querySelector('.variable-cost-value').value
                });
            });
            data.variableCosts = variableCosts;

            console.log('âœ… Data collection complete:', {
                inputsCount: Object.keys(data.revenueInputs).length,
                coursesCount: data.courses.length,
                projectsCount: data.projects.length,
                grantsCount: data.grants.length,
                eventsCount: data.events.length,
                fixedCostsCount: data.fixedCosts.length,
                variableCostsCount: data.variableCosts.length
            });

            return data;
        }

        /**
         * CRITICAL FIX: Restore all data to the form
         * This function was missing and causing loadSave() to fail
         */
        function restoreAllData(data) {
            if (!data) {
                console.error('âŒ No data to restore');
                return false;
            }

            console.log('ðŸ“‚ Restoring all data...');

            try {
                // Restore all input fields
                Object.keys(data.revenueInputs || {}).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.value = data.revenueInputs[id];
                    }
                });

                // Restore editable revenue input fields
                Object.keys(data.revenueProjections || {}).forEach(key => {
                    const [stream, yearPart] = key.split('-year');
                    const input = document.querySelector(`.editable-revenue[data-year="${yearPart}"][data-stream="${stream}"]`);
                    if (input) {
                        input.value = data.revenueProjections[key];
                    }
                });

                // Restore contenteditable text fields
                Object.keys(data.editableText || {}).forEach(identifier => {
                    const element = document.getElementById(identifier);
                    if (element) {
                        element.textContent = data.editableText[identifier];
                    }
                });

                // Restore courses - clear existing and add saved
                const courseList = document.getElementById('course-list');
                if (courseList && data.courses) {
                    courseList.innerHTML = '';
                    data.courses.forEach(course => {
                        addCourse(course.name, course.price, course.sales);
                    });
                }

                // Restore labs projects
                const projectList = document.getElementById('labs-project-list');
                if (projectList && data.projects) {
                    projectList.innerHTML = '';
                    data.projects.forEach(project => {
                        addLabsProject(project.name, project.value, project.type);
                    });
                }

                // Restore labs grants
                const grantList = document.getElementById('labs-grant-list');
                if (grantList && data.grants) {
                    grantList.innerHTML = '';
                    data.grants.forEach(grant => {
                        addLabsGrant(grant.name, grant.value);
                    });
                }

                // Restore society events
                const eventsList = document.getElementById('society-events-list');
                if (eventsList && data.events) {
                    eventsList.innerHTML = '';
                    data.events.forEach(event => {
                        addSocietyEvent(event.name, event.estimated, event.actual);
                    });
                }

                // Restore fixed costs
                const fixedCostsList = document.getElementById('fixed-costs-list');
                if (fixedCostsList && data.fixedCosts) {
                    fixedCostsList.innerHTML = '';
                    data.fixedCosts.forEach(cost => {
                        addFixedCost(cost.name, cost.value);
                    });
                }

                // Restore variable costs
                const variableCostsList = document.getElementById('variable-costs-list');
                if (variableCostsList && data.variableCosts) {
                    variableCostsList.innerHTML = '';
                    data.variableCosts.forEach(cost => {
                        addVariableCost(cost.name, cost.value);
                    });
                }

                // Recalculate all values after loading
                if (typeof updateRevenueCalcs === 'function') updateRevenueCalcs();
                if (typeof updateOperationsCalcs === 'function') updateOperationsCalcs();
                if (typeof updateCapitalCalcs === 'function') updateCapitalCalcs();
                if (typeof updateRevenueProjectionTotals === 'function') updateRevenueProjectionTotals();
                if (typeof updateAllConnectedValues === 'function') updateAllConnectedValues();
                if (typeof drawOnePagerRevenueChart === 'function') drawOnePagerRevenueChart();

                console.log('âœ… Data restored successfully');
                return true;

            } catch (error) {
                console.error('âŒ Error restoring data:', error);
                return false;
            }
        }

        function saveWithName(name) {
            if (!name || name.trim().length === 0) {
                alert('Please enter a name for this save');
                return;
            }

            // Validate name
            const cleanName = name.trim().substring(0, 50);
            if (!/^[a-zA-Z0-9\s\-_]+$/.test(cleanName)) {
                alert('Save name can only contain letters, numbers, spaces, hyphens, and underscores');
                return;
            }

            console.log('ðŸ’¾ Saving with name:', cleanName);
            const allSaves = getAllSaves();
            const data = collectAllData(); // Use existing data collection function

            allSaves[cleanName] = {
                data: data,
                timestamp: new Date().toISOString(),
                version: '1.0'
            };

            localStorage.setItem('cfo-saves', JSON.stringify(allSaves));
            console.log('âœ… Saved to localStorage with name:', cleanName);

            // Also update default save for backwards compatibility
            localStorage.setItem('cyberdelicCFOData', JSON.stringify(data));
            console.log('âœ… Also saved to default storage for backwards compatibility');

            updateSavedStatesList();
            console.log('âœ… Save complete! Total saves:', Object.keys(allSaves).length);
            return cleanName;
        }

        function loadSave(name) {
            console.log('ðŸ“‚ Loading save:', name);
            const allSaves = getAllSaves();
            const saveData = allSaves[name];

            if (!saveData) {
                console.error('âŒ Save not found:', name);
                alert(`Save "${name}" not found`);
                return;
            }

            console.log('âœ… Save data found, restoring...');
            // Use existing load functionality
            const success = restoreAllData(saveData.data);

            if (success) {
                console.log('âœ… Save loaded successfully!');
                alert(`Loaded "${name}" successfully!`);
            } else {
                console.error('âŒ Failed to restore data');
                alert('Failed to load save data. Check console for details.');
            }
        }

        function deleteSave(name) {
            if (!confirm(`Delete save "${name}"? This cannot be undone.`)) {
                return;
            }

            const allSaves = getAllSaves();
            delete allSaves[name];
            localStorage.setItem('cfo-saves', JSON.stringify(allSaves));
            updateSavedStatesList();
        }

        function renameSave(oldName) {
            const newName = prompt(`Rename "${oldName}" to:`, oldName);
            if (!newName || newName === oldName) return;

            const cleanName = newName.trim().substring(0, 50);
            if (!/^[a-zA-Z0-9\s\-_]+$/.test(cleanName)) {
                alert('Save name can only contain letters, numbers, spaces, hyphens, and underscores');
                return;
            }

            const allSaves = getAllSaves();
            if (allSaves[cleanName]) {
                alert('A save with that name already exists');
                return;
            }

            allSaves[cleanName] = allSaves[oldName];
            delete allSaves[oldName];
            localStorage.setItem('cfo-saves', JSON.stringify(allSaves));
            updateSavedStatesList();
        }

        function updateSavedStatesList() {
            const listEl = document.getElementById('saved-states-list');
            if (!listEl) return;

            const allSaves = getAllSaves();
            const saveNames = Object.keys(allSaves).sort();

            if (saveNames.length === 0) {
                listEl.innerHTML = '<div style="padding: 1.5rem; text-align: center; color: var(--text-secondary); font-size: 0.85rem;">No saved states yet</div>';
                return;
            }

            listEl.innerHTML = saveNames.map(name => {
                const save = allSaves[name];
                const date = new Date(save.timestamp).toLocaleDateString();

                return `
                    <div class="saved-item">
                        <div>
                            <div class="saved-item-name">${name}</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">${date}</div>
                        </div>
                        <div class="saved-item-actions">
                            <button class="btn-rename" onclick="renameSave('${name}')">Rename</button>
                            <button class="btn-load-item" onclick="loadSave('${name}'); document.getElementById('load-dropdown').style.display='none';">Load</button>
                            <button class="btn-delete-item" onclick="deleteSave('${name}')">Delete</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Override existing save button to prompt for name
        const saveBtn = document.getElementById('header-save-btn');
        if (saveBtn) {
            // Remove existing click listeners by cloning
            const newSaveBtn = saveBtn.cloneNode(true);
            saveBtn.parentNode.replaceChild(newSaveBtn, saveBtn);

            newSaveBtn.addEventListener('click', () => {
                const name = prompt('Name this save:', 'Financial Model ' + new Date().toLocaleDateString());
                if (name) {
                    saveWithName(name);
                    alert(`Saved as "${name}"`);
                }
            });
        }

        // Update saved states list when load dropdown opens
        const loadBtn = document.getElementById('header-load-btn');
        if (loadBtn) {
            loadBtn.addEventListener('click', updateSavedStatesList);
        }

        // Initial population
        updateSavedStatesList();

        // Make functions globally available
        window.renameSave = renameSave;
        window.loadSave = loadSave;
        window.deleteSave = deleteSave;

        // ============================================
        // PERSIST BOTTLENECK ANALYSIS
        // ============================================

        /**
         * Save and restore bottleneck analysis text
         * WHY: These reflections are valuable for pitch prep and shouldn't be lost
         */
        const bottleneckInputs = ['bottleneck-demand', 'bottleneck-risk', 'bottleneck-people'];

        bottleneckInputs.forEach(id => {
            const el = document.getElementById(id);
            if (el) {
                // Load saved value
                const saved = localStorage.getItem(id);
                if (saved) el.value = saved;

                // Save on change
                el.addEventListener('input', () => {
                    localStorage.setItem(id, el.value);
                });
            }
        });

        // ============================================
        // PERSIST BUSINESS PLAN STRUCTURED SECTIONS
        // ============================================

        /**
         * Save and restore assumptions, risks, and questions
         * WHY: Critical for tracking what founders know vs. what they need to validate
         */
        const structuredInputs = ['business-assumptions', 'business-risks', 'business-questions'];

        structuredInputs.forEach(id => {
            const el = document.getElementById(id);
            if (el) {
                // Load saved value
                const saved = localStorage.getItem(id);
                if (saved) el.textContent = saved;

                // Save on change (contenteditable uses textContent)
                el.addEventListener('input', () => {
                    localStorage.setItem(id, el.textContent);
                });
            }
        });

        // ============================================
        // BUG 3 FIX: Update bottom button links dynamically
        // ============================================
        const pitchDeckLinkBottom = document.getElementById('pitch-deck-link-bottom');
        const pitchDeckButtonBottom = document.getElementById('pitch-deck-button-bottom');
        const meetingLinkBottom = document.getElementById('meeting-link-bottom');
        const meetingButtonBottom = document.getElementById('meeting-button-bottom');

        if (pitchDeckLinkBottom && pitchDeckButtonBottom) {
            pitchDeckLinkBottom.addEventListener('input', () => {
                const url = pitchDeckLinkBottom.value;
                pitchDeckButtonBottom.href = url || '#';
                if (url) {
                    pitchDeckButtonBottom.setAttribute('target', '_blank');
                    pitchDeckButtonBottom.setAttribute('rel', 'noopener noreferrer');
                }
            });
        }

        if (meetingLinkBottom && meetingButtonBottom) {
            meetingLinkBottom.addEventListener('input', () => {
                const url = meetingLinkBottom.value;
                meetingButtonBottom.href = url || '#';
                if (url) {
                    meetingButtonBottom.setAttribute('target', '_blank');
                    meetingButtonBottom.setAttribute('rel', 'noopener noreferrer');
                }
            });
        }

        // ============================================
        // BUG 4 FIX: Editable Roadmap Milestones
        // ============================================
        let roadmapMilestones = [
            { month: 0, title: 'Foundation', description: 'XD Canvas framework published, 500+ newsletter subscribers', status: 'achieved', icon: 'âœ“' },
            { month: 3, title: 'Society Launch', description: '500 members, $30K MRR, first Dojo pop-up', status: 'current', icon: 'â†’' },
            { month: 6, title: 'Academy Goes Live', description: '5 courses launched, 200 enrolled students, 2 certifications', status: 'future', icon: '' },
            { month: 12, title: 'Labs Scaling', description: '5 consulting clients, 2 R&D grants, $75K MRR', status: 'future', icon: '' },
            { month: 18, title: 'Break-Even', description: '$100K MRR, 2,000+ members, Series A readiness', status: 'milestone', icon: 'ðŸŽ‰' }
        ];

        function saveRoadmapMilestones() {
            localStorage.setItem('roadmapMilestones', JSON.stringify(roadmapMilestones));
            console.log('Roadmap milestones saved');
        }

        function loadRoadmapMilestones() {
            const saved = localStorage.getItem('roadmapMilestones');
            if (saved) {
                try {
                    roadmapMilestones = JSON.parse(saved);
                    console.log('Roadmap milestones loaded');
                } catch (e) {
                    console.error('Error loading roadmap milestones:', e);
                }
            }
        }

        function renderRoadmapMilestones() {
            const container = document.getElementById('roadmap-milestones-container');
            if (!container) return;

            container.innerHTML = '';
            container.className = 'roadmap-container'; // FIX 4: Use grid layout

            roadmapMilestones.forEach((milestone, index) => {
                // Create milestone card
                const card = document.createElement('div');
                card.className = 'milestone-card';

                // Remove button
                const removeBtn = document.createElement('button');
                removeBtn.className = 'remove-milestone';
                removeBtn.innerHTML = 'Ã—';
                removeBtn.onclick = () => removeMilestone(index);
                card.appendChild(removeBtn);

                // Month header
                const header = document.createElement('div');
                header.className = 'milestone-header';
                header.innerHTML = `
                    <span class="milestone-month-label">Month</span>
                    <input type="number" class="milestone-month-input" value="${milestone.month}" min="0" max="36" data-index="${index}">
                `;
                card.appendChild(header);

                // Title input
                const titleInput = document.createElement('input');
                titleInput.type = 'text';
                titleInput.className = 'milestone-title-input';
                titleInput.value = milestone.title;
                titleInput.placeholder = 'Milestone title';
                titleInput.dataset.index = index;
                card.appendChild(titleInput);

                // Description textarea
                const descTextarea = document.createElement('textarea');
                descTextarea.className = 'milestone-desc-input';
                descTextarea.value = milestone.description;
                descTextarea.placeholder = 'Description...';
                descTextarea.dataset.index = index;
                card.appendChild(descTextarea);

                // Status select
                const statusSelect = document.createElement('select');
                statusSelect.className = 'milestone-status-select';
                statusSelect.innerHTML = `
                    <option value="achieved" ${milestone.status === 'achieved' ? 'selected' : ''}>âœ“ Achieved</option>
                    <option value="current" ${milestone.status === 'current' ? 'selected' : ''}>â†’ Current</option>
                    <option value="future" ${milestone.status === 'future' ? 'selected' : ''}>â—‹ Future</option>
                    <option value="milestone" ${milestone.status === 'milestone' ? 'selected' : ''}>ðŸŽ‰ Milestone</option>
                `;
                statusSelect.dataset.index = index;
                card.appendChild(statusSelect);

                container.appendChild(card);
            });

            // Attach event listeners
            container.querySelectorAll('.milestone-month-input').forEach(input => {
                input.addEventListener('change', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    roadmapMilestones[index].month = parseInt(e.target.value);
                    saveRoadmapMilestones();
                });
            });

            container.querySelectorAll('.milestone-status-select').forEach(select => {
                select.addEventListener('change', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    const status = e.target.value;
                    roadmapMilestones[index].status = status;

                    // Update icon based on status
                    if (status === 'achieved') roadmapMilestones[index].icon = 'âœ“';
                    else if (status === 'current') roadmapMilestones[index].icon = 'â†’';
                    else if (status === 'milestone') roadmapMilestones[index].icon = 'ðŸŽ‰';
                    else roadmapMilestones[index].icon = '';

                    saveRoadmapMilestones();
                });
            });

            container.querySelectorAll('.milestone-title-input').forEach(input => {
                input.addEventListener('blur', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    roadmapMilestones[index].title = e.target.value;
                    saveRoadmapMilestones();
                });
            });

            container.querySelectorAll('.milestone-desc-input').forEach(textarea => {
                textarea.addEventListener('blur', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    roadmapMilestones[index].description = e.target.value;
                    saveRoadmapMilestones();
                });
            });
        }

        function addRoadmapMilestone() {
            roadmapMilestones.push({
                month: Math.max(...roadmapMilestones.map(m => m.month)) + 3,
                title: 'New Milestone',
                description: 'Describe the milestone achievements here',
                status: 'future',
                icon: ''
            });
            saveRoadmapMilestones();
            renderRoadmapMilestones();
        }

        function removeMilestone(index) {
            if (roadmapMilestones.length <= 1) {
                alert('You must have at least one milestone');
                return;
            }
            if (confirm('Remove this milestone?')) {
                roadmapMilestones.splice(index, 1);
                saveRoadmapMilestones();
                renderRoadmapMilestones();
            }
        }

        // Initialize roadmap
        loadRoadmapMilestones();
        renderRoadmapMilestones();

        // ============================================
        // BUG 1 FIX: Enhanced Save/Load with Debug Logs
        // ============================================
        console.log('Financial Matrix initialized');
        console.log('LocalStorage available:', typeof (Storage) !== "undefined");
        console.log('Saved data exists:', localStorage.getItem('cyberdelicCFOData') !== null);

        // ============================================
        // CHART EMERGENCY FIX: Simple Backup Chart Function
        // ============================================
        function drawOnePagerRevenueChartSimple() {
            console.log('ðŸ“Š SIMPLE chart draw started');
            const canvas = document.getElementById('onepager-revenue-chart');
            if (!canvas) {
                console.error('âŒ NO CANVAS FOUND');
                return;
            }

            const ctx = canvas.getContext('2d');
            canvas.width = 800;
            canvas.height = 300;

            // Clear canvas
            ctx.clearRect(0, 0, 800, 300);

            // Draw simple test pattern
            ctx.fillStyle = '#00d4ff';
            ctx.fillRect(50, 50, 100, 200);
            ctx.fillStyle = '#a855f7';
            ctx.fillRect(200, 100, 100, 150);
            ctx.fillStyle = '#ec4899';
            ctx.fillRect(350, 25, 100, 225);

            ctx.fillStyle = '#fff';
            ctx.font = '16px Arial';
            ctx.fillText('Year 1', 75, 270);
            ctx.fillText('Year 2', 225, 270);
            ctx.fillText('Year 3', 375, 270);

            ctx.fillText('$175K', 75, 40);
            ctx.fillText('$600K', 225, 90);
            ctx.fillText('$1.5M', 375, 15);

            console.log('âœ… SIMPLE chart drawn');
        }

        // ============================================
        // CHART EMERGENCY FIX: Window Load Initialization
        // ============================================
        window.addEventListener('load', function() {
            console.log('ðŸš€ Window loaded, initializing chart system...');

            // Wait for everything to be ready
            setTimeout(function() {
                // Check if One-Pager is the active tab
                const onepagerTab = document.querySelector('[data-section="onepager"]');
                const onepagerSection = document.getElementById('onepager');

                if (onepagerTab && onepagerTab.classList.contains('active')) {
                    console.log('ðŸ“Š One-Pager is active on load, drawing chart...');
                    drawOnePagerRevenueChart();
                }

                // Also try drawing it anyway if the canvas exists
                const canvas = document.getElementById('onepager-revenue-chart');
                if (canvas) {
                    console.log('ðŸ“Š Force-drawing chart to ensure it appears...');
                    drawOnePagerRevenueChart();
                }
            }, 1000);
        });

        // ============================================
        // CHART EMERGENCY FIX: Emergency Fallback Interval
        // ============================================
        // Force chart to draw every 3 seconds if One-Pager is visible and canvas is blank
        setInterval(function() {
            const section = document.getElementById('onepager');
            if (section && section.classList.contains('active')) {
                const canvas = document.getElementById('onepager-revenue-chart');
                if (canvas) {
                    const ctx = canvas.getContext('2d');
                    // Check if canvas is blank
                    try {
                        const imageData = ctx.getImageData(0, 0, 1, 1);
                        if (imageData.data[3] === 0) {
                            console.log('âš¡ EMERGENCY: Redrawing blank chart...');
                            drawOnePagerRevenueChart();
                        }
                    } catch (e) {
                        // If we can't check, just try drawing
                        console.log('âš¡ EMERGENCY: Attempting chart redraw...');
                        drawOnePagerRevenueChart();
                    }
                }
            }
        }, 3000);

        // ============================================
        // INITIALIZATION: Run all calculations on page load
        // ============================================
        // NOTE: Initial calculations have been moved to the consolidated DOMContentLoaded handler above

    </script>
</body>

</html>