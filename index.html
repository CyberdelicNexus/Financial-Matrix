<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyberdelic Nexus | Financial Matrix</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a25;
            --bg-card: #16161f;
            --border: #2a2a3a;
            --border-subtle: #1f1f2a;
            --text-primary: #f0f0f5;
            --text-secondary: #a0a0b0;
            --text-muted: #606070;
            --accent-cyan: #00d4ff;
            --accent-purple: #a855f7;
            --accent-pink: #ec4899;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --accent-blue: #3b82f6;
            --gradient-cyber: linear-gradient(135deg, #00d4ff 0%, #a855f7 50%, #ec4899 100%);
            --gradient-card: linear-gradient(180deg, rgba(168, 85, 247, 0.05) 0%, transparent 100%);
            --shadow-glow: 0 0 40px rgba(0, 212, 255, 0.15);
            --shadow-purple: 0 0 40px rgba(168, 85, 247, 0.15);
        }

        [data-theme="light"] {
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f1f3f5;
            --bg-card: #ffffff;
            --border: #dee2e6;
            --border-subtle: #e9ecef;
            --text-primary: #212529;
            --text-secondary: #495057;
            --text-muted: #6c757d;
            --accent-cyan: #0891b2;
            --accent-purple: #9333ea;
            --accent-pink: #db2777;
            --accent-green: #059669;
            --accent-orange: #ea580c;
            --accent-red: #dc2626;
            --accent-blue: #2563eb;
            --gradient-cyber: linear-gradient(135deg, #0891b2 0%, #9333ea 50%, #db2777 100%);
            --gradient-card: linear-gradient(180deg, rgba(147, 51, 234, 0.05) 0%, transparent 100%);
            --shadow-glow: 0 0 40px rgba(8, 145, 178, 0.1);
            --shadow-purple: 0 0 40px rgba(147, 51, 234, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated background */
        .bg-grid {
            position: fixed;
            inset: 0;
            background-image:
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 0;
        }

        .bg-gradient {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 30%, rgba(168, 85, 247, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 70% 70%, rgba(0, 212, 255, 0.08) 0%, transparent 50%);
            animation: bgPulse 20s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes bgPulse {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-5%, -5%) rotate(5deg); }
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-cyber);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
        }

        .logo-text {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-cyber);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-subtitle {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.15em;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 0.25rem;
            background: var(--bg-tertiary);
            padding: 0.25rem;
            border-radius: 12px;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 0.6rem 1rem;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.8rem;
            font-weight: 500;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .nav-tab:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-tab.active {
            background: var(--gradient-cyber);
            color: var(--bg-primary);
        }

        /* Main Content */
        .main {
            position: relative;
            z-index: 1;
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--gradient-cyber);
            opacity: 0.5;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-title-icon {
            width: 32px;
            height: 32px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        /* Grid Layouts */
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1.5rem; }

        @media (max-width: 1200px) {
            .grid-4 { grid-template-columns: repeat(2, 1fr); }
            .grid-3 { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 768px) {
            .grid-4, .grid-3, .grid-2 { grid-template-columns: 1fr; }
            .header-content { flex-direction: column; }
            .nav-tabs { justify-content: center; }
        }

        /* Metric Cards */
        .metric-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            position: relative;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            border-color: var(--accent-cyan);
            box-shadow: var(--shadow-glow);
            transform: translateY(-2px);
        }

        .metric-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .metric-value.cyan { color: var(--accent-cyan); }
        .metric-value.purple { color: var(--accent-purple); }
        .metric-value.green { color: var(--accent-green); }
        .metric-value.orange { color: var(--accent-orange); }
        .metric-value.pink { color: var(--accent-pink); }
        .metric-value.blue { color: var(--accent-blue); }

        .metric-change {
            font-size: 0.75rem;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .metric-change.positive { color: var(--accent-green); }
        .metric-change.negative { color: var(--accent-red); }

        /* Input Groups */
        .input-group { margin-bottom: 1rem; }

        .input-label {
            display: block;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .input-field {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        }

        .input-field::placeholder { color: var(--text-muted); }

        .dual-input { display: flex; gap: 0.5rem; }
        .dual-input .input-field { flex: 1; }
        .dual-input .input-field.price { flex: 0 0 80px; text-align: center; }

        .input-hint {
            font-size: 0.65rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        /* Course list styling */
        .course-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .course-item {
            display: grid;
            grid-template-columns: 1fr 80px 80px 32px;
            gap: 0.5rem;
            align-items: center;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
        }

        .course-item .input-field {
            margin: 0;
            padding: 0.5rem 0.75rem;
            font-size: 0.8rem;
        }

        .btn-icon {
            width: 32px;
            height: 32px;
            border: none;
            background: rgba(239, 68, 68, 0.15);
            color: var(--accent-red);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .btn-icon:hover { background: rgba(239, 68, 68, 0.3); }
        .btn-icon.add { background: rgba(16, 185, 129, 0.15); color: var(--accent-green); }
        .btn-icon.add:hover { background: rgba(16, 185, 129, 0.3); }

        .course-header {
            display: grid;
            grid-template-columns: 1fr 80px 80px 32px;
            gap: 0.5rem;
            padding: 0 0.75rem;
            margin-bottom: 0.5rem;
        }

        .course-header span {
            font-size: 0.65rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .add-course-row {
            display: flex;
            justify-content: flex-end;
            margin-top: 0.5rem;
        }

        /* Range Slider */
        .range-container { margin-bottom: 1rem; }

        .range-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .range-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .range-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            color: var(--accent-cyan);
        }

        .range-slider {
            width: 100%;
            height: 6px;
            background: var(--bg-secondary);
            border-radius: 3px;
            appearance: none;
            cursor: pointer;
        }

        .range-slider::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            background: var(--gradient-cyber);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .range-slider::-webkit-slider-thumb:hover { transform: scale(1.2); }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            text-align: left;
            padding: 0.75rem 1rem;
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border);
        }

        .data-table td {
            padding: 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            border-bottom: 1px solid var(--border);
        }

        .data-table tr:hover { background: rgba(0, 212, 255, 0.03); }
        .data-table .highlight { color: var(--accent-cyan); font-weight: 500; }

        /* Fix column widths for revenue projections table */
        .data-table {
            table-layout: fixed;
            width: 100%;
        }
        .data-table th:first-child,
        .data-table td:first-child {
            width: 35%;
            text-align: left;
        }
        .data-table th:nth-child(2),
        .data-table td:nth-child(2) {
            width: 21.66%;
            text-align: right;
            padding-right: 1.5rem;
        }
        .data-table th:nth-child(3),
        .data-table td:nth-child(3) {
            width: 21.66%;
            text-align: right;
            padding-right: 1.5rem;
        }
        .data-table th:nth-child(4),
        .data-table td:nth-child(4) {
            width: 21.66%;
            text-align: right;
            padding-right: 1.5rem;
        }

        /* Specific styling for revenue projections table */
        .revenue-projections-table {
            table-layout: fixed !important;
        }

        .revenue-projections-table th:first-child,
        .revenue-projections-table td:first-child {
            width: 30% !important;
            text-align: left !important;
        }

        .revenue-projections-table th:nth-child(2),
        .revenue-projections-table td:nth-child(2) {
            width: 23.33% !important;
            text-align: center !important;
        }

        .revenue-projections-table th:nth-child(3),
        .revenue-projections-table td:nth-child(3) {
            width: 23.33% !important;
            text-align: center !important;
        }

        .revenue-projections-table th:nth-child(4),
        .revenue-projections-table td:nth-child(4) {
            width: 23.33% !important;
            text-align: center !important;
        }

        /* Ensure editable revenue cells align properly */
        .revenue-projections-table .editable-revenue {
            display: inline-block;
            min-width: 80px;
            text-align: center;
        }

        /* Unit economics table specific styling */
        .unit-economics-table {
            table-layout: fixed !important;
        }

        .unit-economics-table th:nth-child(1),
        .unit-economics-table td:nth-child(1) {
            width: 20%;
            text-align: left;
        }

        .unit-economics-table th:nth-child(2),
        .unit-economics-table td:nth-child(2),
        .unit-economics-table th:nth-child(3),
        .unit-economics-table td:nth-child(3) {
            width: 15%;
            text-align: right;
        }

        .unit-economics-table th:nth-child(4),
        .unit-economics-table td:nth-child(4),
        .unit-economics-table th:nth-child(5),
        .unit-economics-table td:nth-child(5) {
            width: 15%;
            text-align: center;
        }

        .unit-economics-table th:nth-child(6),
        .unit-economics-table td:nth-child(6) {
            width: 20%;
            text-align: center;
        }

        /* Scenario Pills */
        .scenario-pills {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .scenario-pill {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.8rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .scenario-pill:hover {
            border-color: var(--accent-purple);
            color: var(--text-primary);
        }

        .scenario-pill.active {
            background: var(--accent-purple);
            border-color: var(--accent-purple);
            color: white;
        }

        /* Progress Bar */
        .progress-bar {
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-cyber);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Comparison Cards */
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .comparison-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .comparison-card.safe { border-color: var(--accent-cyan); }
        .comparison-card.equity { border-color: var(--accent-purple); }

        .comparison-header {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .comparison-card.safe .comparison-header { color: var(--accent-cyan); }
        .comparison-card.equity .comparison-header { color: var(--accent-purple); }

        .comparison-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border);
        }

        .comparison-item:last-child { border-bottom: none; }
        .comparison-label { color: var(--text-secondary); font-size: 0.85rem; }
        .comparison-value { font-family: 'JetBrains Mono', monospace; font-weight: 500; }

        /* Branch Cards */
        .branch-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .branch-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-glow);
        }

        .branch-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .branch-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .branch-icon.society { background: linear-gradient(135deg, #00d4ff33, #00d4ff11); }
        .branch-icon.labs { background: linear-gradient(135deg, #a855f733, #a855f711); }
        .branch-icon.academy { background: linear-gradient(135deg, #10b98133, #10b98111); }
        .branch-icon.dojos { background: linear-gradient(135deg, #f59e0b33, #f59e0b11); }

        .branch-name { font-size: 1rem; font-weight: 600; }
        .branch-desc { font-size: 0.75rem; color: var(--text-muted); }

        .branch-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .branch-metric {
            text-align: center;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .branch-metric-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .branch-metric-label {
            font-size: 0.65rem;
            color: var(--text-muted);
            text-transform: uppercase;
            margin-top: 0.25rem;
        }

        /* Charts */
        .chart-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            min-height: 300px;
            display: flex;
            flex-direction: column;
        }

        .chart-title {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .chart-bars {
            flex: 1;
            display: flex;
            align-items: flex-end;
            gap: 1rem;
            padding: 1rem 0;
        }

        .chart-bar-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .chart-bar {
            width: 100%;
            max-width: 60px;
            background: var(--gradient-cyber);
            border-radius: 4px 4px 0 0;
            transition: height 0.5s ease;
        }

        .chart-bar-label { font-size: 0.7rem; color: var(--text-muted); }

        /* Status Badge */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 500;
            text-transform: uppercase;
        }

        .status-badge.success { background: rgba(16, 185, 129, 0.15); color: var(--accent-green); }
        .status-badge.warning { background: rgba(245, 158, 11, 0.15); color: var(--accent-orange); }
        .status-badge.danger { background: rgba(239, 68, 68, 0.15); color: var(--accent-red); }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: var(--gradient-cyber);
            color: var(--bg-primary);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover { border-color: var(--accent-cyan); }

        /* Section Headers */
        .section-header { margin-bottom: 2rem; }
        .section-title { font-size: 1.5rem; font-weight: 600; margin-bottom: 0.5rem; }
        .section-subtitle { color: var(--text-secondary); font-size: 0.9rem; }

        /* Divider */
        .divider { height: 1px; background: var(--border); margin: 2rem 0; }

        /* Summary Row */
        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(0, 212, 255, 0.05);
            border: 1px solid var(--accent-cyan);
            border-radius: 8px;
            margin-top: 1rem;
        }

        .summary-label { font-weight: 600; }

        .summary-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.25rem;
            color: var(--accent-cyan);
        }

        /* ==========================================
           BUSINESS PLAN SECTION STYLES
           ========================================== */

        .hero-section {
            text-align: center;
            padding: 3rem 2rem;
            background: linear-gradient(180deg, rgba(168, 85, 247, 0.1) 0%, transparent 100%);
            border-radius: 20px;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-cyber);
        }

        .hero-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--gradient-cyber);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .hero-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto 2rem;
            line-height: 1.6;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            flex-wrap: wrap;
        }

        .hero-stat {
            text-align: center;
        }

        .hero-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-cyan);
        }

        .hero-stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Vision Cards */
        .vision-card {
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        .vision-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient-cyber);
        }

        .vision-card h3 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: var(--accent-cyan);
        }

        .vision-card p {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, var(--accent-cyan), var(--accent-purple), var(--accent-pink));
        }

        .timeline-item {
            position: relative;
            padding-bottom: 2rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2rem;
            top: 0.25rem;
            width: 12px;
            height: 12px;
            background: var(--accent-cyan);
            border-radius: 50%;
            transform: translateX(-5px);
        }

        .timeline-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .timeline-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Feature Grid */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .feature-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            border-color: var(--accent-purple);
            box-shadow: var(--shadow-purple);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-cyber);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .feature-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* Market Size Bars */
        .market-bar {
            margin-bottom: 1.5rem;
        }

        .market-bar-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .market-bar-label {
            font-weight: 500;
        }

        .market-bar-value {
            font-family: 'JetBrains Mono', monospace;
            color: var(--accent-cyan);
        }

        .market-bar-track {
            height: 24px;
            background: var(--bg-secondary);
            border-radius: 12px;
            overflow: hidden;
        }

        .market-bar-fill {
            height: 100%;
            background: var(--gradient-cyber);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--bg-primary);
        }

        /* ==========================================
           ELEVATOR PITCH STYLES
           ========================================== */

        .pitch-hero {
            text-align: center;
            padding: 4rem 2rem;
            background: radial-gradient(ellipse at center, rgba(168, 85, 247, 0.15) 0%, transparent 70%);
            border-radius: 24px;
            margin-bottom: 2rem;
        }

        .pitch-tagline {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            max-width: 800px;
            margin: 0 auto 2rem;
            line-height: 1.3;
        }

        .pitch-tagline span {
            background: var(--gradient-cyber);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .pitch-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .pitch-section h3 {
            font-size: 1rem;
            color: var(--accent-cyan);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .pitch-section p, .pitch-section ul {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .pitch-section ul {
            list-style: none;
            padding: 0;
        }

        .pitch-section li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .pitch-section li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 1rem;
            width: 8px;
            height: 8px;
            background: var(--gradient-cyber);
            border-radius: 50%;
        }

        .ask-box {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%);
            border: 2px solid var(--accent-cyan);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
        }

        .ask-amount {
            font-family: 'JetBrains Mono', monospace;
            font-size: 3rem;
            font-weight: 700;
            background: var(--gradient-cyber);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .ask-label {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* ==========================================
           ONE-PAGER STYLES
           ========================================== */

        .onepager-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem;
            background: var(--bg-card);
            border-radius: 16px;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .onepager-logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .onepager-logo-icon {
            width: 56px;
            height: 56px;
            background: var(--gradient-cyber);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .onepager-company {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.75rem;
            font-weight: 700;
        }

        .onepager-tagline {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .onepager-contact {
            text-align: right;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .onepager-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        @media (max-width: 900px) {
            .onepager-grid { grid-template-columns: 1fr; }
        }

        .onepager-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .onepager-section h4 {
            font-size: 0.75rem;
            color: var(--accent-cyan);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .onepager-section p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .onepager-list {
            list-style: none;
            padding: 0;
        }

        .onepager-list li {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.9rem;
        }

        .onepager-list li:last-child { border-bottom: none; }

        .onepager-list .label { color: var(--text-secondary); }

        .onepager-list .value {
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Team Section */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .team-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
        }

        .team-avatar {
            width: 64px;
            height: 64px;
            background: var(--gradient-cyber);
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .team-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .team-role {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Use of Funds */
        .funds-chart {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .funds-item {
            flex: 1;
            text-align: center;
        }

        .funds-bar {
            height: 120px;
            background: var(--bg-secondary);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .funds-fill {
            background: var(--gradient-cyber);
            border-radius: 8px 8px 0 0;
            transition: height 0.5s ease;
        }

        .funds-label {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .funds-percent {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--accent-cyan);
        }

        /* Editable content styles */
        [contenteditable="true"] {
            cursor: text;
            border-radius: 4px;
            padding: 2px 4px;
            transition: background 0.2s ease;
        }

        [contenteditable="true"]:hover {
            background: rgba(0, 212, 255, 0.1);
            outline: 1px solid rgba(0, 212, 255, 0.3);
        }

        [contenteditable="true"]:focus {
            background: rgba(0, 212, 255, 0.15);
            outline: 2px solid var(--accent-cyan);
            outline-offset: 1px;
        }

        .editable-revenue {
            min-width: 80px;
            display: inline-block;
        }

        /* Save/Load dropdown styles */
        #header-load-btn:hover {
            background: var(--bg-tertiary);
        }

        .saved-state-item:hover {
            background: var(--bg-tertiary) !important;
        }

        .saved-state-item {
            width: 100%;
            padding: 0.75rem 1rem;
            background: transparent;
            border: none;
            color: var(--text-primary);
            text-align: left;
            cursor: pointer;
            font-size: 0.85rem;
            transition: background 0.2s;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .saved-state-item:last-child {
            border-bottom: none;
        }

        .saved-state-time {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .delete-state-btn {
            padding: 0.25rem 0.5rem;
            background: rgba(255, 68, 68, 0.1);
            border: 1px solid rgba(255, 68, 68, 0.3);
            color: #ff4444;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.7rem;
            margin-left: 0.5rem;
            transition: all 0.2s;
        }

        .delete-state-btn:hover {
            background: rgba(255, 68, 68, 0.2);
            border-color: rgba(255, 68, 68, 0.5);
        }

        /* Mobile hamburger menu */
        .hamburger-btn {
            display: none;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            margin-left: auto;
        }

        .hamburger-icon {
            width: 24px;
            height: 20px;
            position: relative;
            transform: rotate(0deg);
            transition: .5s ease-in-out;
            cursor: pointer;
        }

        .hamburger-icon span {
            display: block;
            position: absolute;
            height: 3px;
            width: 100%;
            background: var(--text-primary);
            border-radius: 3px;
            opacity: 1;
            left: 0;
            transform: rotate(0deg);
            transition: .25s ease-in-out;
        }

        .hamburger-icon span:nth-child(1) {
            top: 0px;
        }

        .hamburger-icon span:nth-child(2) {
            top: 8px;
        }

        .hamburger-icon span:nth-child(3) {
            top: 16px;
        }

        .hamburger-icon.active span:nth-child(1) {
            top: 8px;
            transform: rotate(135deg);
        }

        .hamburger-icon.active span:nth-child(2) {
            opacity: 0;
            left: -60px;
        }

        .hamburger-icon.active span:nth-child(3) {
            top: 8px;
            transform: rotate(-135deg);
        }

        /* Mobile responsive styles */
        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
            }

            .hamburger-btn {
                display: block;
                order: 2;
            }

            .logo {
                order: 1;
            }

            .nav-tabs {
                order: 3;
                width: 100%;
                flex-direction: column;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease-in-out;
                margin-top: 0;
            }

            .nav-tabs.mobile-open {
                max-height: 800px;
                margin-top: 1rem;
                padding-top: 1rem;
                border-top: 1px solid var(--border);
            }

            .nav-tab {
                width: 100%;
                text-align: left;
                padding: 1rem;
                border-bottom: 1px solid var(--border-subtle);
            }

            .nav-tab:last-of-type {
                border-bottom: none;
            }

            #header-save-btn,
            #header-load-btn {
                width: 100%;
                justify-content: center;
                margin-top: 0.5rem;
            }

            #load-dropdown {
                right: auto;
                left: 0;
                width: calc(100% - 2rem);
                margin: 0 1rem;
            }

            /* Mobile table responsiveness */
            .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr !important;
            }

            table {
                display: block;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .card {
                overflow-x: auto;
            }

            /* Make projection chart scrollable */
            canvas {
                max-width: 100%;
                height: auto !important;
            }

            /* Adjust input groups for mobile */
            .dual-input {
                flex-direction: column;
            }

            .dual-input input {
                width: 100% !important;
            }

            /* Course/project/event items */
            .course-item,
            .event-item,
            [style*="grid-template-columns"] {
                grid-template-columns: 1fr !important;
                gap: 0.5rem !important;
            }

            .course-item input,
            .event-item input,
            .course-item select,
            .event-item select {
                width: 100% !important;
            }

            /* Stack metrics cards */
            .metric-card, .branch-card {
                min-width: 100%;
            }

            /* Adjust font sizes for mobile */
            .section-title {
                font-size: 1.5rem;
            }

            .metric-value {
                font-size: 1.8rem;
            }

            /* Pitch and one-pager adjustments */
            .pitch-hero {
                padding: 2rem 1rem;
            }

            .pitch-tagline {
                font-size: 1.25rem;
            }

            .ask-amount {
                font-size: 2rem;
            }
        }

        /* Print styles */
        @media print {
            body { background: white; color: black; }
            .header, .nav-tabs { display: none; }
            .card, .section { page-break-inside: avoid; }
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <div class="bg-gradient"></div>

    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon" style="background: linear-gradient(135deg, #00d4ff 0%, #a855f7 50%, #ec4899 100%); box-shadow: 0 0 20px rgba(168, 85, 247, 0.6);">CN</div>
                <div>
                    <div class="logo-text">Cyberdelic Nexus</div>
                    <div class="logo-subtitle">Financial Matrix</div>
                </div>
            </div>
            <button id="theme-toggle" style="background: var(--bg-card); border: 1px solid var(--border); color: var(--text-primary); padding: 0.5rem 0.75rem; border-radius: 8px; cursor: pointer; font-size: 1.2rem; display: flex; align-items: center; gap: 0.5rem; transition: all 0.2s;" title="Toggle theme">
                <span id="theme-icon">ðŸŒ™</span>
            </button>
            <button class="hamburger-btn" id="hamburger-btn" aria-label="Toggle menu">
                <div class="hamburger-icon" id="hamburger-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
            <nav class="nav-tabs" id="nav-tabs">
                <button class="nav-tab active" data-section="dashboard">Dashboard</button>
                <button class="nav-tab" data-section="business-plan">Business Plan</button>
                <button class="nav-tab" data-section="pitch">Elevator Pitch</button>
                <button class="nav-tab" data-section="onepager">One-Pager</button>
                <button class="nav-tab" data-section="capital">Capital Raise</button>
                <button class="nav-tab" data-section="revenue">Revenue</button>
                <button class="nav-tab" data-section="operations">Operations</button>
                <div style="margin-left: auto; display: flex; gap: 0.5rem; align-items: center;">
                    <button id="header-save-btn" style="background: linear-gradient(135deg, #00d4ff 0%, #a855f7 100%); color: #0a0a0f; font-weight: 700; padding: 0.75rem 1.5rem; border-radius: 8px; border: none; cursor: pointer; font-size: 0.9rem; transition: all 0.2s ease;">
                        ðŸ’¾ Save
                    </button>
                    <div style="position: relative;">
                        <button id="header-load-btn" style="background: var(--bg-card); border: 1px solid var(--border); color: var(--text-primary); font-weight: 600; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-size: 0.9rem; transition: all 0.2s ease;">
                            ðŸ“‚ Load
                        </button>
                        <div id="load-dropdown" style="display: none; position: absolute; right: 0; top: calc(100% + 0.5rem); background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; min-width: 280px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4); z-index: 1000; overflow: hidden;">
                            <div style="padding: 0.75rem 1rem; background: var(--bg-tertiary); font-size: 0.75rem; color: var(--text-secondary); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; border-bottom: 1px solid var(--border);">Saved States</div>
                            <div id="saved-states-list" style="max-height: 350px; overflow-y: auto;">
                                <div style="padding: 1.5rem; text-align: center; color: var(--text-secondary); font-size: 0.85rem;">No saved states yet</div>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="main">
        <!-- ==========================================
             DASHBOARD SECTION
             ========================================== -->
        <section id="dashboard" class="section active">
            <div class="section-header">
                <h1 class="section-title">Financial Overview</h1>
                <p class="section-subtitle">Real-time metrics across all branches</p>
            </div>

            <div class="grid-4">
                <div class="metric-card">
                    <div class="metric-label">Total MRR</div>
                    <div class="metric-value cyan" id="total-mrr">$0</div>
                    <div class="metric-change positive">Calculated live</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Runway</div>
                    <div class="metric-value purple" id="runway-months">0 mo</div>
                    <div class="metric-change" id="runway-status">Based on burn rate</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Funding Gap</div>
                    <div class="metric-value orange" id="funding-gap">$0</div>
                    <div class="metric-change">18-month target</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">LTV:CAC Ratio</div>
                    <div class="metric-value green" id="ltv-cac-ratio">0:1</div>
                    <div class="metric-change" id="ltv-cac-status">Target: 3:1</div>
                </div>
            </div>

            <div class="grid-4" style="margin-top: 1rem;">
                <div class="branch-card">
                    <div class="branch-header">
                        <div class="branch-icon society">&#127760;</div>
                        <div>
                            <div class="branch-name">Society</div>
                            <div class="branch-desc">Memberships & Events</div>
                        </div>
                    </div>
                    <div class="branch-metrics">
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="society-mrr">$0</div>
                            <div class="branch-metric-label">MRR</div>
                        </div>
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="society-members">0</div>
                            <div class="branch-metric-label">Members</div>
                        </div>
                    </div>
                </div>
                <div class="branch-card">
                    <div class="branch-header">
                        <div class="branch-icon labs">&#129514;</div>
                        <div>
                            <div class="branch-name">Labs</div>
                            <div class="branch-desc">Consulting & R&D</div>
                        </div>
                    </div>
                    <div class="branch-metrics">
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="labs-mrr">$0</div>
                            <div class="branch-metric-label">MRR</div>
                        </div>
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="labs-projects">0</div>
                            <div class="branch-metric-label">Projects</div>
                        </div>
                    </div>
                </div>
                <div class="branch-card">
                    <div class="branch-header">
                        <div class="branch-icon academy">&#127891;</div>
                        <div>
                            <div class="branch-name">Academy</div>
                            <div class="branch-desc">Courses & Certs</div>
                        </div>
                    </div>
                    <div class="branch-metrics">
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="academy-mrr">$0</div>
                            <div class="branch-metric-label">MRR</div>
                        </div>
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="academy-students">0</div>
                            <div class="branch-metric-label">Students</div>
                        </div>
                    </div>
                </div>
                <div class="branch-card">
                    <div class="branch-header">
                        <div class="branch-icon dojos">&#129351;</div>
                        <div>
                            <div class="branch-name">Dojos</div>
                            <div class="branch-desc">Spaces & XR</div>
                        </div>
                    </div>
                    <div class="branch-metrics">
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="dojos-mrr">$0</div>
                            <div class="branch-metric-label">MRR</div>
                        </div>
                        <div class="branch-metric">
                            <div class="branch-metric-value" id="dojos-sessions">0</div>
                            <div class="branch-metric-label">Sessions/mo</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 1.5rem;">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128200;</div>
                        3-Year Revenue Projection
                    </div>
                    <div class="scenario-pills">
                        <button class="scenario-pill" data-scenario="conservative">Conservative</button>
                        <button class="scenario-pill active" data-scenario="moderate">Moderate</button>
                        <button class="scenario-pill" data-scenario="aggressive">Aggressive</button>
                    </div>
                </div>

                <!-- Summary Metrics Row -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px; margin: 0 1.5rem 1.5rem 1.5rem;">
                    <div style="text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">Starting MRR</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-cyan);" id="projection-start-mrr">$0</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">Year 3 MRR</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-purple);" id="projection-end-mrr">$0</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">Total ARR (Y3)</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-green);" id="projection-total-arr">$0</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">Growth Rate</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-orange);" id="projection-growth-rate">0%</div>
                    </div>
                </div>

                <!-- Chart with Axis Labels -->
                <div class="chart-container" style="position: relative; padding: 2rem 1.5rem 1.5rem 1.5rem;">
                    <!-- Y-Axis Label -->
                    <div style="position: absolute; left: 0; top: 50%; transform: translateY(-50%) rotate(-90deg); transform-origin: center; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; white-space: nowrap;">Quarterly Revenue ($)</div>

                    <!-- Y-Axis Values -->
                    <div id="y-axis-values" style="position: absolute; left: 45px; top: 2rem; bottom: 3rem; display: flex; flex-direction: column; justify-content: space-between; font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--text-muted);"></div>

                    <!-- Chart Bars -->
                    <div style="margin-left: 80px;">
                        <div class="chart-bars" id="projection-chart"></div>
                    </div>

                    <!-- X-Axis Label -->
                    <div style="text-align: center; margin-top: 1rem; margin-left: 80px; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Time (Quarters)</div>
                </div>

                <!-- Data Table View -->
                <div style="margin: 1.5rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px;">
                    <h4 style="font-size: 0.85rem; color: var(--text-primary); margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 0.05em;">Quarterly Breakdown</h4>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;" id="projection-table-view"></div>
                </div>
            </div>
        </section>

        <!-- ==========================================
             BUSINESS PLAN SECTION
             ========================================== -->
        <section id="business-plan" class="section">
            <div class="hero-section">
                <div class="hero-title">Cyberdelic Nexus</div>
                <div class="hero-subtitle" contenteditable="true" id="business-hero-subtitle">
                    A global ecosystem designing humane technology, immersive experiences, and cultural frameworks
                    that help people turn expanded states of consciousness into lasting clarity, creativity, and deeper ways of living.
                </div>
                <div class="hero-stats">
                    <div class="hero-stat">
                        <div class="hero-stat-value">$55B+</div>
                        <div class="hero-stat-label">Digital Therapeutics TAM by 2032</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value">$1.7T</div>
                        <div class="hero-stat-label">XR Market by 2032</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value">27%</div>
                        <div class="hero-stat-label">CAGR Growth Rate</div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="vision-card">
                    <h3>&#127919; Vision</h3>
                    <p contenteditable="true" id="business-vision-text">To become a global hub redefining human-technology relationships by providing a coherent, ethically designed environment where creators, technologists, researchers, and seekers can collaborate, prototype, and deepen their understanding of how humane technology can support human flourishing.</p>
                </div>
                <div class="vision-card">
                    <h3>&#127919; Mission</h3>
                    <p contenteditable="true" id="business-mission-text">Design humane technologies, practices, and frameworks that help individuals and communities learn to turn states of consciousness into lasting cognitive, emotional, and creative traits. We build ecosystems where immersive technology is used deliberately, ethically, and skillfully.</p>
                </div>
            </div>

            <div class="card" style="margin-top: 1.5rem;">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128640;</div>
                        The Four Branches
                    </div>
                </div>
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">&#129514;</div>
                        <div class="feature-title">Cyberdelic Labs</div>
                        <div class="feature-desc" contenteditable="true" id="business-labs-desc">R&D, consulting, and prototyping for immersive technologies, cognitive tools, and transformation-focused applications. Works with partners in arts, culture, digital therapeutics, and emerging tech.</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">&#127891;</div>
                        <div class="feature-title">Cyberdelic Academy</div>
                        <div class="feature-desc" contenteditable="true" id="business-academy-desc">Courses, certifications, and training programs that teach people how to design, facilitate, and integrate transformative experiences. Supports both personal learning and professional development.</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">&#129351;</div>
                        <div class="feature-title">Cyberdelic Dojos</div>
                        <div class="feature-desc" contenteditable="true" id="business-dojos-desc">Physical and virtual spaces for guided immersive practice. Participants explore expanded states through structured protocols and supervised technologies while developing long-term capacities.</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">&#127760;</div>
                        <div class="feature-title">Cyberdelic Society</div>
                        <div class="feature-desc" contenteditable="true" id="business-society-desc">A membership-driven cultural network that offers community, research access, events, and ongoing collaboration opportunities. The connective tissue for the entire ecosystem.</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128202;</div>
                        Market Opportunity
                    </div>
                </div>

                <div class="market-bar">
                    <div class="market-bar-header">
                        <span class="market-bar-label">Digital Therapeutics</span>
                        <span class="market-bar-value">$8.2B &#8594; $55B (2032)</span>
                    </div>
                    <div class="market-bar-track">
                        <div class="market-bar-fill" style="width: 85%;">26.3% CAGR</div>
                    </div>
                </div>

                <div class="market-bar">
                    <div class="market-bar-header">
                        <span class="market-bar-label">Extended Reality (XR)</span>
                        <span class="market-bar-value">$184B &#8594; $1.7T (2032)</span>
                    </div>
                    <div class="market-bar-track">
                        <div class="market-bar-fill" style="width: 95%;">32.1% CAGR</div>
                    </div>
                </div>

                <div class="market-bar">
                    <div class="market-bar-header">
                        <span class="market-bar-label">Wellness Economy</span>
                        <span class="market-bar-value">$5.6T &#8594; $8.5T (2032)</span>
                    </div>
                    <div class="market-bar-track">
                        <div class="market-bar-fill" style="width: 70%;">5-7% CAGR</div>
                    </div>
                </div>

                <div class="market-bar">
                    <div class="market-bar-header">
                        <span class="market-bar-label">Online Education</span>
                        <span class="market-bar-value">$350B &#8594; $1T+ (2032)</span>
                    </div>
                    <div class="market-bar-track">
                        <div class="market-bar-fill" style="width: 75%;">14% CAGR</div>
                    </div>
                </div>

                <div style="margin-top: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px;">
                    <h4 style="color: var(--accent-cyan); margin-bottom: 1rem;">Serviceable Addressable Market (SAM)</h4>
                    <p style="color: var(--text-secondary); line-height: 1.7;" contenteditable="true" id="business-market-sam-desc">
                        Focusing on consciousness-oriented technology and experiential wellness: <strong style="color: var(--accent-cyan);">$15-25 billion</strong> globally, encompassing VR/AR wellness applications, mindfulness platforms, professional consciousness facilitation training, and experiential wellness centers.
                    </p>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128176;</div>
                        3-Year Revenue Projections
                    </div>
                </div>

                <!-- Year Headers -->
                <div style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; background: var(--bg-tertiary); border-bottom: 2px solid var(--border); font-weight: 600; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">
                    <div>Revenue Stream</div>
                    <div style="text-align: center;">Year 1</div>
                    <div style="text-align: center;">Year 2</div>
                    <div style="text-align: center;">Year 3</div>
                </div>

                <!-- Society Memberships Row -->
                <div style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 500;">Society Memberships</div>
                    <input type="text" class="editable-revenue" data-year="1" data-stream="society" value="$60,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue" data-year="2" data-stream="society" value="$240,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue highlight" data-year="3" data-stream="society" value="$600,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--accent-cyan, #00d4ff) transparent var(--accent-cyan, #00d4ff) transparent; border-width: 0 0 2px 0; padding: 0.5rem; border-radius: 6px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; font-weight: 600;">
                </div>

                <!-- Academy Courses Row -->
                <div style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 500;">Academy Courses</div>
                    <input type="text" class="editable-revenue" data-year="1" data-stream="academy" value="$25,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue" data-year="2" data-stream="academy" value="$100,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue highlight" data-year="3" data-stream="academy" value="$300,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--accent-cyan, #00d4ff) transparent var(--accent-cyan, #00d4ff) transparent; border-width: 0 0 2px 0; padding: 0.5rem; border-radius: 6px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; font-weight: 600;">
                </div>

                <!-- Labs Consulting Row -->
                <div style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 500;">Labs Consulting</div>
                    <input type="text" class="editable-revenue" data-year="1" data-stream="labs" value="$50,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue" data-year="2" data-stream="labs" value="$150,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue highlight" data-year="3" data-stream="labs" value="$400,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--accent-cyan, #00d4ff) transparent var(--accent-cyan, #00d4ff) transparent; border-width: 0 0 2px 0; padding: 0.5rem; border-radius: 6px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; font-weight: 600;">
                </div>

                <!-- Events Row -->
                <div style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 500;">Events (Summit)</div>
                    <input type="text" class="editable-revenue" data-year="1" data-stream="events" value="$30,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue" data-year="2" data-stream="events" value="$75,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue highlight" data-year="3" data-stream="events" value="$150,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--accent-cyan, #00d4ff) transparent var(--accent-cyan, #00d4ff) transparent; border-width: 0 0 2px 0; padding: 0.5rem; border-radius: 6px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; font-weight: 600;">
                </div>

                <!-- Merch & Other Row -->
                <div style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1rem 1.5rem; border-bottom: 2px solid var(--border); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 500;">Merch & Other</div>
                    <input type="text" class="editable-revenue" data-year="1" data-stream="merch" value="$10,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue" data-year="2" data-stream="merch" value="$35,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--border); padding: 0.5rem; border-radius: 6px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace;">
                    <input type="text" class="editable-revenue highlight" data-year="3" data-stream="merch" value="$50,000" style="text-align: center; background: var(--bg-card); border: 1px solid var(--accent-cyan, #00d4ff) transparent var(--accent-cyan, #00d4ff) transparent; border-width: 0 0 2px 0; padding: 0.5rem; border-radius: 6px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; font-weight: 600;">
                </div>

                <!-- Total Revenue Row -->
                <div style="display: grid; grid-template-columns: 200px repeat(3, 1fr); gap: 1rem; padding: 1.5rem; background: rgba(0, 212, 255, 0.05); align-items: center;">
                    <div style="color: var(--text-primary); font-weight: 700; font-size: 1rem;">Total Revenue</div>
                    <div id="revenue-year1-total" style="text-align: center; font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700; color: var(--accent-cyan);">$175,000</div>
                    <div id="revenue-year2-total" style="text-align: center; font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700; color: var(--accent-cyan);">$600,000</div>
                    <div id="revenue-year3-total" style="text-align: center; font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; font-weight: 700; color: var(--accent-cyan);">$1,500,000</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#9889;</div>
                        Competitive Moat
                    </div>
                </div>
                <div class="grid-3">
                    <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 8px;">
                        <h4 style="color: var(--accent-cyan); margin-bottom: 0.5rem;">Ecosystem Integration</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true" id="business-moat-ecosystem">No single competitor offers the full stack of research, education, community, and physical spaces</p>
                    </div>
                    <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 8px;">
                        <h4 style="color: var(--accent-purple); margin-bottom: 0.5rem;">Proprietary Frameworks</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true" id="business-moat-frameworks">The Cyberdelic XD Canvas and training protocols create differentiated IP</p>
                    </div>
                    <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 8px;">
                        <h4 style="color: var(--accent-pink); margin-bottom: 0.5rem;">Network Effects</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true" id="business-moat-network">Each branch strengthens the others, creating switching costs for engaged members</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==========================================
             ELEVATOR PITCH SECTION
             ========================================== -->
        <section id="pitch" class="section">
            <div class="pitch-hero">
                <div class="pitch-tagline" contenteditable="true" id="pitch-tagline-text">
                    We're building the <span>operating system for consciousness technology</span> -
                    the integrated platform where research, education, and practice converge to help
                    people transform peak experiences into lasting human capacities.
                </div>
                <div class="hero-stats">
                    <div class="hero-stat">
                        <div class="hero-stat-value" id="pitch-seed-round">$500K</div>
                        <div class="hero-stat-label">Seed Round</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value" id="pitch-runway">18 mo</div>
                        <div class="hero-stat-label">Runway</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value">8.6x</div>
                        <div class="hero-stat-label">Target Return</div>
                    </div>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; flex-wrap: wrap;">
                    <div style="flex: 1; max-width: 300px;">
                        <label style="display: block; font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Investor Pitch Link</label>
                        <input type="url" id="pitch-deck-link" class="input-field" placeholder="https://yourpitch.com/deck" value="" style="margin-bottom: 0.5rem;">
                        <a href="#" id="pitch-deck-button" class="btn-primary" style="display: inline-block; width: 100%; text-align: center; padding: 0.75rem 1.5rem; background: linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-purple) 100%); color: #fff; text-decoration: none; border-radius: 8px; font-weight: 600; transition: transform 0.2s;">
                            ðŸ“Š View Investor Pitch
                        </a>
                    </div>
                    <div style="flex: 1; max-width: 300px;">
                        <label style="display: block; font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Book Meeting Link</label>
                        <input type="url" id="meeting-link" class="input-field" placeholder="https://cal.com/yourmeeting" value="" style="margin-bottom: 0.5rem;">
                        <a href="#" id="meeting-button" class="btn-primary" style="display: inline-block; width: 100%; text-align: center; padding: 0.75rem 1.5rem; background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-pink) 100%); color: #fff; text-decoration: none; border-radius: 8px; font-weight: 600; transition: transform 0.2s;">
                            ðŸ“… Book a Meeting
                        </a>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="pitch-section">
                    <h3>&#128308; The Problem</h3>
                    <p contenteditable="true" id="pitch-problem-intro">Altered states of consciousness can enhance creativity, problem-solving, and well-being. But today, people explore these states through <strong>scattered subcultures, isolated experiences, and unconnected tools</strong>.</p>
                    <ul style="margin-top: 1rem;">
                        <li contenteditable="true" id="pitch-problem-1">Transformative experiences exist in silos with no unified framework</li>
                        <li contenteditable="true" id="pitch-problem-2">No cultural scaffolding for harm reduction or integration</li>
                        <li contenteditable="true" id="pitch-problem-3">Groundbreaking projects struggle to reach audiences</li>
                        <li contenteditable="true" id="pitch-problem-4">Research, creators, and practitioners rarely converge</li>
                    </ul>
                </div>

                <div class="pitch-section">
                    <h3>&#128994; Our Solution</h3>
                    <p contenteditable="true" id="pitch-solution-intro">Cyberdelic Nexus is the <strong>integrated ecosystem</strong> that connects the fragmented landscape of consciousness technology into a coherent platform.</p>
                    <ul style="margin-top: 1rem;">
                        <li contenteditable="true" id="pitch-solution-1"><strong>Labs:</strong> R&D and consulting ($175/hr avg)</li>
                        <li contenteditable="true" id="pitch-solution-2"><strong>Academy:</strong> Courses and certifications ($99-$2,499)</li>
                        <li contenteditable="true" id="pitch-solution-3"><strong>Society:</strong> Membership community ($15-$199/mo)</li>
                        <li contenteditable="true" id="pitch-solution-4"><strong>Dojos:</strong> Physical/virtual practice spaces</li>
                    </ul>
                </div>
            </div>

            <div class="pitch-section">
                <h3>&#128640; Why Now?</h3>
                <div class="grid-3" style="margin-top: 1rem;">
                    <div style="text-align: center; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#127973;</div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true" id="pitch-why-now-1">Digital therapeutics growing at 27% CAGR</div>
                    </div>
                    <div style="text-align: center; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#129299;</div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true" id="pitch-why-now-2">XR wellness becoming mainstream</div>
                    </div>
                    <div style="text-align: center; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 12px;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#129504;</div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;" contenteditable="true" id="pitch-why-now-3">Mental health crisis demands innovation</div>
                    </div>
                </div>
            </div>

            <div class="pitch-section">
                <h3>&#128176; Traction & Milestones</h3>
                <div class="timeline" style="margin-top: 1rem;">
                    <div class="timeline-item">
                        <div class="timeline-title">Foundation Complete</div>
                        <div class="timeline-desc" contenteditable="true" id="pitch-timeline-1">Business plan finalized, legal structure established (LLC/OU), initial partnerships secured</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Community Building</div>
                        <div class="timeline-desc" contenteditable="true" id="pitch-timeline-2">Growing community of practitioners, researchers, and technologists engaged with vision</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Product Development</div>
                        <div class="timeline-desc" contenteditable="true" id="pitch-timeline-3">Proprietary Cyberdelic XD Canvas framework developed, Academy curriculum in progress</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Revenue Generation</div>
                        <div class="timeline-desc" contenteditable="true" id="pitch-timeline-4">Initial consulting engagements, membership subscriptions launching</div>
                    </div>
                </div>
            </div>

            <div class="ask-box">
                <div style="font-size: 0.85rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem;">The Ask</div>
                <div class="ask-amount" id="pitch-ask-amount">$500,000</div>
                <div class="ask-label">Seed Round via SAFE Note at <span id="pitch-safe-cap">$2M</span> Cap</div>
                <div style="margin-top: 1.5rem; display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap;">
                    <div style="text-align: center;">
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.25rem; color: var(--accent-green);" id="pitch-ask-runway">18 months</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">Runway</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.25rem; color: var(--accent-purple);" id="pitch-year3-revenue">$1.5M</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">Year 3 Revenue Target</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.25rem; color: var(--accent-cyan);">5,000+</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">Members by Year 3</div>
                    </div>
                </div>
            </div>

            <div class="pitch-section" style="margin-top: 1.5rem;">
                <h3>&#128161; Why Invest?</h3>
                <div class="grid-2" style="margin-top: 1rem;">
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Category Creation Opportunity</h4>
                        <p contenteditable="true" id="pitch-invest-1">First-mover advantage in defining "integrated consciousness technology" before market consolidation</p>
                    </div>
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Multiple Revenue Streams</h4>
                        <p contenteditable="true" id="pitch-invest-2">Diversified model with memberships, consulting, courses, and events reduces risk</p>
                    </div>
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Defensible Moat</h4>
                        <p contenteditable="true" id="pitch-invest-3">Network effects, proprietary IP, and ecosystem lock-in create lasting competitive advantage</p>
                    </div>
                    <div>
                        <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">Social Impact</h4>
                        <p contenteditable="true" id="pitch-invest-4">Aligned with growing ESG trends in mental health, wellness, and consciousness expansion</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==========================================
             ONE-PAGER SECTION
             ========================================== -->
        <section id="onepager" class="section">
            <div class="onepager-header">
                <div class="onepager-logo">
                    <div class="onepager-logo-icon">CN</div>
                    <div>
                        <div class="onepager-company">Cyberdelic Nexus</div>
                        <div class="onepager-tagline" contenteditable="true" id="onepager-tagline">The Operating System for Consciousness Technology</div>
                    </div>
                </div>
                <div class="onepager-contact">
                    <div>cyberdelic.nexus</div>
                    <div style="color: var(--accent-cyan);">Seed Round: $500K</div>
                </div>
            </div>

            <div class="onepager-grid">
                <div class="onepager-section">
                    <h4>&#128161; Problem</h4>
                    <p contenteditable="true" id="onepager-problem-text">The $55B+ digital therapeutics and $1.7T XR markets lack a coherent ecosystem. Transformative experiences exist in silos - no unified platform connects research, education, and practice for consciousness technology.</p>
                </div>

                <div class="onepager-section">
                    <h4>&#128640; Solution</h4>
                    <p contenteditable="true" id="onepager-solution-text">Cyberdelic Nexus is an integrated platform with four branches: Labs (R&D/consulting), Academy (education), Society (community), and Dojos (practice spaces) - creating the connective tissue for consciousness technology.</p>
                </div>

                <div class="onepager-section">
                    <h4>&#128202; Market Size</h4>
                    <ul class="onepager-list">
                        <li><span class="label">TAM (Digital Therapeutics + XR)</span><span class="value" contenteditable="true" id="market-tam">$1.7T+</span></li>
                        <li><span class="label">SAM (Consciousness Tech)</span><span class="value" contenteditable="true" id="market-sam">$15-25B</span></li>
                        <li><span class="label">SOM (Year 1-3)</span><span class="value" contenteditable="true" id="market-som">$1-5M</span></li>
                        <li><span class="label">Market CAGR</span><span class="value" contenteditable="true" id="market-cagr">27%+</span></li>
                    </ul>
                </div>

                <div class="onepager-section">
                    <h4>&#128176; Business Model</h4>
                    <ul class="onepager-list">
                        <li><span class="label">Society Memberships</span><span class="value">$15-199/mo</span></li>
                        <li><span class="label">Academy Courses</span><span class="value">$99-2,499</span></li>
                        <li><span class="label">Labs Consulting</span><span class="value">$175/hr+</span></li>
                        <li><span class="label">Enterprise Programs</span><span class="value">$50K-200K</span></li>
                    </ul>
                </div>

                <div class="onepager-section">
                    <h4>&#128200; Financial Projections</h4>
                    <ul class="onepager-list">
                        <li><span class="label">Year 1 Revenue</span><span class="value" id="onepager-year1-revenue">$175K</span></li>
                        <li><span class="label">Year 2 Revenue</span><span class="value" id="onepager-year2-revenue">$600K</span></li>
                        <li><span class="label">Year 3 Revenue</span><span class="value" id="onepager-year3-revenue">$1.5M</span></li>
                        <li><span class="label">Break-Even</span><span class="value" contenteditable="true" id="onepager-breakeven">Mid-Year 2</span></li>
                    </ul>
                </div>

                <div class="onepager-section">
                    <h4>&#9889; Competitive Advantage</h4>
                    <ul class="onepager-list">
                        <li><span class="label">Full-Stack Ecosystem</span><span class="value">&#10003;</span></li>
                        <li><span class="label">Proprietary XD Canvas</span><span class="value">&#10003;</span></li>
                        <li><span class="label">Network Effects</span><span class="value">&#10003;</span></li>
                        <li><span class="label">First-Mover Position</span><span class="value">&#10003;</span></li>
                    </ul>
                </div>

                <div class="onepager-section">
                    <h4>&#128101; Key Milestones (18 mo)</h4>
                    <ul class="onepager-list">
                        <li><span class="label">Community Members</span><span class="value">2,000+</span></li>
                        <li><span class="label">Courses Launched</span><span class="value">10+</span></li>
                        <li><span class="label">Consulting Clients</span><span class="value">5-10</span></li>
                        <li><span class="label">Dojo Pop-ups</span><span class="value">3-5</span></li>
                    </ul>
                </div>

                <div class="onepager-section">
                    <h4>&#128184; Use of Funds</h4>
                    <div class="funds-chart">
                        <div class="funds-item">
                            <div class="funds-bar">
                                <div class="funds-fill" style="height: 40%;"></div>
                            </div>
                            <div class="funds-percent">40%</div>
                            <div class="funds-label">Team</div>
                        </div>
                        <div class="funds-item">
                            <div class="funds-bar">
                                <div class="funds-fill" style="height: 25%;"></div>
                            </div>
                            <div class="funds-percent">25%</div>
                            <div class="funds-label">Product</div>
                        </div>
                        <div class="funds-item">
                            <div class="funds-bar">
                                <div class="funds-fill" style="height: 20%;"></div>
                            </div>
                            <div class="funds-percent">20%</div>
                            <div class="funds-label">Marketing</div>
                        </div>
                        <div class="funds-item">
                            <div class="funds-bar">
                                <div class="funds-fill" style="height: 15%;"></div>
                            </div>
                            <div class="funds-percent">15%</div>
                            <div class="funds-label">Operations</div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin-top: 1.5rem; padding: 2rem; background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(168, 85, 247, 0.1)); border: 2px solid var(--accent-cyan); border-radius: 16px; text-align: center;">
                <div style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem;">Investment Terms</div>
                <div style="display: flex; justify-content: center; gap: 3rem; flex-wrap: wrap;">
                    <div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-cyan);">$500K</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">Raise Amount</div>
                    </div>
                    <div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-purple);">$2M</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">Valuation Cap</div>
                    </div>
                    <div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-green);">SAFE</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">Instrument</div>
                    </div>
                    <div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--accent-orange);">18 mo</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">Runway</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==========================================
             CAPITAL RAISE SECTION
             ========================================== -->
        <section id="capital" class="section">
            <div class="section-header">
                <h1 class="section-title">Capital Raising Model</h1>
                <p class="section-subtitle">Calculate funding needs, dilution, and compare SAFE vs Equity</p>
            </div>

            <div class="grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-title-icon">&#128176;</div>
                            Funding Calculator
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">Monthly Burn Rate</label>
                        <input type="number" class="input-field" id="monthly-burn" value="28000" placeholder="$28,000">
                    </div>

                    <div class="input-group">
                        <label class="input-label">Current Cash on Hand</label>
                        <input type="number" class="input-field" id="current-cash" value="25000" placeholder="$25,000">
                    </div>

                    <div class="range-container">
                        <div class="range-header">
                            <span class="range-label">Target Runway</span>
                            <span class="range-value" id="runway-target-display">18 months</span>
                        </div>
                        <input type="range" class="range-slider" id="runway-target" min="6" max="36" value="18">
                    </div>

                    <div class="divider"></div>

                    <div class="summary-row">
                        <span class="summary-label">Total Funding Needed</span>
                        <span class="summary-value" id="funding-needed">$479,000</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-title-icon">&#128200;</div>
                            Dilution Scenarios
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">Pre-Money Valuation</label>
                        <input type="number" class="input-field" id="pre-money" value="2000000" placeholder="$2,000,000">
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Raise Amount</th>
                                <th>Investor %</th>
                                <th>Founder %</th>
                                <th>@ $10M Exit</th>
                            </tr>
                        </thead>
                        <tbody id="dilution-table"></tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#9878;</div>
                        SAFE vs Equity Comparison
                    </div>
                </div>

                <div class="grid-2" style="margin-bottom: 1.5rem;">
                    <div class="input-group">
                        <label class="input-label">Investment Amount</label>
                        <input type="number" class="input-field" id="investment-amount" value="500000" placeholder="$500,000">
                    </div>
                    <div class="input-group">
                        <label class="input-label">SAFE Valuation Cap</label>
                        <input type="number" class="input-field" id="safe-cap" value="2000000" placeholder="$2,000,000">
                    </div>
                </div>

                <div class="comparison-grid">
                    <div class="comparison-card safe">
                        <div class="comparison-header">
                            <span>&#9889;</span> SAFE Note (Recommended)
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Immediate Dilution</span>
                            <span class="comparison-value" style="color: var(--accent-green);">0%</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Legal Costs</span>
                            <span class="comparison-value">$500 - $2,000</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Time to Close</span>
                            <span class="comparison-value">1-2 weeks</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Board Seat</span>
                            <span class="comparison-value">Usually No</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Ownership at Conversion</span>
                            <span class="comparison-value" id="safe-ownership">20.0%</span>
                        </div>
                    </div>
                    <div class="comparison-card equity">
                        <div class="comparison-header">
                            <span>&#128220;</span> Priced Equity
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Immediate Dilution</span>
                            <span class="comparison-value" id="equity-dilution" style="color: var(--accent-orange);">20.0%</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Legal Costs</span>
                            <span class="comparison-value">$10,000 - $25,000</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Time to Close</span>
                            <span class="comparison-value">4-8 weeks</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Board Seat</span>
                            <span class="comparison-value">Often Yes</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">Ownership</span>
                            <span class="comparison-value" id="equity-ownership">20.0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==========================================
             REVENUE SECTION
             ========================================== -->
        <section id="revenue" class="section">
            <div class="section-header">
                <h1 class="section-title">Revenue Projections</h1>
                <p class="section-subtitle">Model revenue by branch with CAC/LTV analysis</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#127760;</div>
                        Cyberdelic Society
                    </div>
                    <span class="status-badge success">Active</span>
                </div>

                <div class="grid-3">
                    <div class="input-group">
                        <label class="input-label">Cybernaut (Free)</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-cybernaut" value="0" placeholder="$">
                            <input type="number" class="input-field qty society-member" data-tier="cybernaut" data-price-id="price-cybernaut" value="500" placeholder="Members">
                        </div>
                        <div class="input-hint">Price /mo | Members</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Reality Hacker ($10/mo)</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-reality-hacker" value="10" placeholder="$">
                            <input type="number" class="input-field qty society-member" data-tier="reality-hacker" data-price-id="price-reality-hacker" value="300" placeholder="Members">
                        </div>
                        <div class="input-hint">Price /mo | Members</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Reality Weaver ($20/mo)</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-reality-weaver" value="20" placeholder="$">
                            <input type="number" class="input-field qty society-member" data-tier="reality-weaver" data-price-id="price-reality-weaver" value="100" placeholder="Members">
                        </div>
                        <div class="input-hint">Price /mo | Members</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Lifetime Membership ($99 one-time)</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-lifetime" value="99" placeholder="$">
                            <input type="number" class="input-field qty" id="society-lifetime" value="25" placeholder="Members">
                        </div>
                        <div class="input-hint">Price /mo | Members</div>
                    </div>
                    <div class="input-group" style="grid-column: 1 / -1;">
                        <label class="input-label">Events Tracking</label>
                        <div style="display: grid; gap: 0.5rem; margin-top: 0.5rem;">
                            <div style="display: grid; grid-template-columns: 2fr 1fr 1fr 0.5fr; gap: 0.5rem; font-size: 0.75rem; color: var(--text-secondary); padding: 0 0.5rem;">
                                <div>Event Name</div>
                                <div style="text-align: center;">Estimated</div>
                                <div style="text-align: center;">Actual</div>
                                <div></div>
                            </div>
                            <div id="society-events-list">
                                <div class="event-item" data-event-id="1" style="display: grid; grid-template-columns: 2fr 1fr 1fr 0.5fr; gap: 0.5rem; align-items: center;">
                                    <input type="text" class="input-field event-name" value="Monthly Gathering" placeholder="Event name">
                                    <input type="number" class="input-field event-estimated" value="1500" placeholder="Estimated $">
                                    <input type="number" class="input-field event-actual" value="1500" placeholder="Actual $">
                                    <button class="btn-icon remove-event" title="Remove">&#10005;</button>
                                </div>
                            </div>
                            <div class="add-course-row">
                                <button class="btn-icon add" id="add-event" title="Add Event">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Merch Revenue/mo</label>
                        <input type="number" class="input-field" id="society-merch" value="850">
                    </div>
                </div>

                <div class="summary-row">
                    <span class="summary-label">Society Monthly Revenue</span>
                    <span class="summary-value" id="society-total">$0</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#129514;</div>
                        Cyberdelic Labs
                    </div>
                    <span class="status-badge warning">Building</span>
                </div>

                <div class="input-group">
                    <label class="input-label">Consulting Hours/mo</label>
                    <div class="dual-input">
                        <input type="number" class="input-field price" id="price-consulting" value="175" placeholder="$/hr">
                        <input type="number" class="input-field qty" id="labs-consulting-hours" value="40" placeholder="Hours">
                    </div>
                    <div class="input-hint">Rate /hr | Hours</div>
                </div>

                <div class="input-label" style="margin-top: 1.5rem; margin-bottom: 0.75rem;">R&D Projects & Client Work</div>
                <div style="display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; padding: 0.5rem 0; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600;">
                    <span>Project/Client Name</span>
                    <span>Value</span>
                    <span>Type</span>
                    <span></span>
                </div>
                <div id="labs-project-list">
                    <div class="course-item" data-project-id="1" style="display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; align-items: center;">
                        <input type="text" class="input-field project-name" value="XR Wellness Platform" placeholder="Project name">
                        <input type="number" class="input-field project-value" value="5000" placeholder="$">
                        <select class="input-field project-type" style="padding: 0.65rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                            <option value="monthly">Monthly</option>
                            <option value="project">Per Project</option>
                        </select>
                        <button class="btn-icon remove-project" title="Remove">&#10005;</button>
                    </div>
                    <div class="course-item" data-project-id="2" style="display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; align-items: center;">
                        <input type="text" class="input-field project-name" value="Consciousness Tech Consulting" placeholder="Project name">
                        <input type="number" class="input-field project-value" value="3000" placeholder="$">
                        <select class="input-field project-type" style="padding: 0.65rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                            <option value="monthly">Monthly</option>
                            <option value="project">Per Project</option>
                        </select>
                        <button class="btn-icon remove-project" title="Remove">&#10005;</button>
                    </div>
                </div>
                <button class="btn-add" id="add-project">+ Add Project</button>

                <div class="input-label" style="margin-top: 1.5rem; margin-bottom: 0.75rem;">Grants & Partnerships</div>
                <div class="course-header">
                    <span>Grant/Partner Name</span>
                    <span>Monthly Value</span>
                    <span></span>
                </div>
                <div id="labs-grant-list">
                    <div class="course-item" data-grant-id="1">
                        <input type="text" class="input-field grant-name" value="Research Grant - Immersive Tech" placeholder="Grant/partner name">
                        <input type="number" class="input-field grant-value" value="2000" placeholder="$/mo">
                        <button class="btn-icon remove-grant" title="Remove">&#10005;</button>
                    </div>
                    <div class="course-item" data-grant-id="2">
                        <input type="text" class="input-field grant-name" value="Partnership - XR Foundation" placeholder="Grant/partner name">
                        <input type="number" class="input-field grant-value" value="2000" placeholder="$/mo">
                        <button class="btn-icon remove-grant" title="Remove">&#10005;</button>
                    </div>
                </div>
                <button class="btn-add" id="add-grant">+ Add Grant/Partnership</button>

                <div class="summary-row" style="margin-top: 1.5rem;">
                    <span class="summary-label">Labs Monthly Revenue</span>
                    <span class="summary-value" id="labs-total">$0</span>
                </div>
                <div class="metric-row" style="margin-top: 0.5rem;">
                    <span class="metric-label">Active Projects</span>
                    <span class="metric-value" id="labs-projects-count">0</span>
                </div>
                <div class="metric-row" style="margin-top: 0.5rem;">
                    <span class="metric-label">Active Grants/Partnerships</span>
                    <span class="metric-value" id="labs-grants-count">0</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#127891;</div>
                        Cyberdelic Academy
                    </div>
                    <span class="status-badge success">Active</span>
                </div>

                <div class="input-label" style="margin-bottom: 0.75rem;">Individual Courses</div>
                <div class="course-header">
                    <span>Course Name</span>
                    <span>Price</span>
                    <span>Sales/mo</span>
                    <span></span>
                </div>
                <div class="course-list" id="course-list">
                    <div class="course-item" data-course-id="1">
                        <input type="text" class="input-field course-name" value="Foundations of Cyberdelics" placeholder="Course name">
                        <input type="number" class="input-field course-price" value="99" placeholder="$">
                        <input type="number" class="input-field course-sales" value="15" placeholder="Qty">
                        <button class="btn-icon remove-course" title="Remove">&#10005;</button>
                    </div>
                    <div class="course-item" data-course-id="2">
                        <input type="text" class="input-field course-name" value="XR Experience Design" placeholder="Course name">
                        <input type="number" class="input-field course-price" value="299" placeholder="$">
                        <input type="number" class="input-field course-sales" value="8" placeholder="Qty">
                        <button class="btn-icon remove-course" title="Remove">&#10005;</button>
                    </div>
                    <div class="course-item" data-course-id="3">
                        <input type="text" class="input-field course-name" value="Facilitator Certification" placeholder="Course name">
                        <input type="number" class="input-field course-price" value="999" placeholder="$">
                        <input type="number" class="input-field course-sales" value="3" placeholder="Qty">
                        <button class="btn-icon remove-course" title="Remove">&#10005;</button>
                    </div>
                </div>
                <div class="add-course-row">
                    <button class="btn-icon add" id="add-course" title="Add Course">+</button>
                </div>

                <div class="divider"></div>

                <div class="grid-3">
                    <div class="input-group">
                        <label class="input-label">Masterclasses</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-cert" value="149" placeholder="$">
                            <input type="number" class="input-field qty" id="academy-certs" value="20" placeholder="Attendees">
                        </div>
                        <div class="input-hint">Avg price | Attendees/mo</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Workshops</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-workshop" value="75" placeholder="$">
                            <input type="number" class="input-field qty" id="academy-workshops" value="35" placeholder="Attendees">
                        </div>
                        <div class="input-hint">Avg price | Attendees/mo</div>
                    </div>
                </div>

                <div class="summary-row">
                    <span class="summary-label">Academy Monthly Revenue</span>
                    <span class="summary-value" id="academy-total">$0</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#129351;</div>
                        Cyberdelic Dojos
                    </div>
                    <span class="status-badge warning">Planning</span>
                </div>

                <div class="grid-3">
                    <div class="input-group">
                        <label class="input-label">Monthly Memberships</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-dojo-membership" value="150" placeholder="$">
                            <input type="number" class="input-field qty" id="dojos-memberships" value="25" placeholder="Members">
                        </div>
                        <div class="input-hint">Price /mo | Members</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">XR Sessions/mo</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-xr-session" value="35" placeholder="$">
                            <input type="number" class="input-field qty" id="dojos-xr-sessions" value="100" placeholder="Sessions">
                        </div>
                        <div class="input-hint">Avg price | Sessions</div>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Retreat Packages/mo</label>
                        <div class="dual-input">
                            <input type="number" class="input-field price" id="price-training" value="500" placeholder="$">
                            <input type="number" class="input-field qty" id="dojos-training" value="8" placeholder="Packages">
                        </div>
                        <div class="input-hint">Avg price | Packages</div>
                    </div>
                </div>

                <div class="summary-row">
                    <span class="summary-label">Dojos Monthly Revenue</span>
                    <span class="summary-value" id="dojos-total">$0</span>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128200;</div>
                        CAC & LTV Analysis
                    </div>
                </div>

                <table class="data-table unit-economics-table">
                    <thead>
                        <tr>
                            <th>Branch</th>
                            <th>CAC</th>
                            <th>LTV</th>
                            <th>LTV:CAC</th>
                            <th>Payback</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Society</td>
                            <td class="highlight">$25</td>
                            <td>$540</td>
                            <td>21.6:1</td>
                            <td>0.6 mo</td>
                            <td><span class="status-badge success">Excellent</span></td>
                        </tr>
                        <tr>
                            <td>Labs</td>
                            <td class="highlight">$500</td>
                            <td>$15,000</td>
                            <td>30.0:1</td>
                            <td>0.4 mo</td>
                            <td><span class="status-badge success">Excellent</span></td>
                        </tr>
                        <tr>
                            <td>Academy</td>
                            <td class="highlight">$75</td>
                            <td>$450</td>
                            <td>6.0:1</td>
                            <td>0.5 mo</td>
                            <td><span class="status-badge success">Good</span></td>
                        </tr>
                        <tr>
                            <td>Dojos</td>
                            <td class="highlight">$100</td>
                            <td>$1,800</td>
                            <td>18.0:1</td>
                            <td>0.7 mo</td>
                            <td><span class="status-badge success">Excellent</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- ==========================================
             OPERATIONS SECTION
             ========================================== -->
        <section id="operations" class="section">
            <div class="section-header">
                <h1 class="section-title">Operational Budget</h1>
                <p class="section-subtitle">Track fixed vs variable costs and monitor burn rate</p>
            </div>

            <div class="grid-2">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-title-icon">&#128274;</div>
                            Fixed Costs (Monthly)
                        </div>
                    </div>

                    <div style="display: grid; gap: 0.5rem;">
                        <div id="fixed-costs-list">
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Salaries & Contractors" placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="12000" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Office / Coworking" placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="1500" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Software & Tools" placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="1200" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Insurance" placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="400" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Legal & Accounting" placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="800" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="Estonian OU Maintenance" placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="200" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field fixed-cost-name" value="US LLC Costs" placeholder="Cost name">
                                <input type="number" class="input-field fixed-cost-value" value="100" placeholder="$">
                                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
                            </div>
                        </div>
                        <div class="add-course-row">
                            <button class="btn-icon add" id="add-fixed-cost" title="Add Fixed Cost">+</button>
                        </div>
                    </div>

                    <div class="summary-row">
                        <span class="summary-label">Total Fixed Costs</span>
                        <span class="summary-value" id="total-fixed">$16,200</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-title-icon">&#128202;</div>
                            Variable Costs (Monthly)
                        </div>
                    </div>

                    <div style="display: grid; gap: 0.5rem;">
                        <div id="variable-costs-list">
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field variable-cost-name" value="Marketing & Ads" placeholder="Cost name">
                                <input type="number" class="input-field variable-cost-value" value="4000" placeholder="$">
                                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field variable-cost-name" value="Event Production" placeholder="Cost name">
                                <input type="number" class="input-field variable-cost-value" value="2500" placeholder="$">
                                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field variable-cost-name" value="Content Creation" placeholder="Cost name">
                                <input type="number" class="input-field variable-cost-value" value="1500" placeholder="$">
                                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field variable-cost-name" value="Travel" placeholder="Cost name">
                                <input type="number" class="input-field variable-cost-value" value="1500" placeholder="$">
                                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
                            </div>
                            <div class="cost-item" style="display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                                <input type="text" class="input-field variable-cost-name" value="R&D / Prototyping" placeholder="Cost name">
                                <input type="number" class="input-field variable-cost-value" value="2300" placeholder="$">
                                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
                            </div>
                        </div>
                        <div class="add-course-row">
                            <button class="btn-icon add" id="add-variable-cost" title="Add Variable Cost">+</button>
                        </div>
                    </div>

                    <div class="summary-row">
                        <span class="summary-label">Total Variable Costs</span>
                        <span class="summary-value" id="total-variable">$11,800</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-title-icon">&#128293;</div>
                        Burn Rate & Runway
                    </div>
                </div>

                <div class="grid-4">
                    <div class="metric-card">
                        <div class="metric-label">Monthly Burn</div>
                        <div class="metric-value pink" id="ops-burn">$28,000</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Annual Burn</div>
                        <div class="metric-value orange" id="ops-annual">$336,000</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Current Runway</div>
                        <div class="metric-value cyan" id="ops-runway">0.9 mo</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">18-Month Need</div>
                        <div class="metric-value purple" id="ops-need">$504,000</div>
                    </div>
                </div>

                <div style="margin-top: 1.5rem;">
                    <div class="range-container">
                        <div class="range-header">
                            <span class="range-label">Cash on Hand</span>
                            <span class="range-value" id="cash-display">$25,000</span>
                        </div>
                        <input type="range" class="range-slider" id="cash-slider" min="0" max="500000" value="25000" step="5000">
                    </div>

                    <div style="margin-top: 1rem;">
                        <div class="metric-label">Runway Progress to 18 Months</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="runway-progress" style="width: 5%;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // ============================================
        // CYBERDELIC NEXUS FINANCIAL MATRIX
        // Interactive Calculator Engine
        // ============================================

        // Navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tab.dataset.section).classList.add('active');
            });
        });

        // Scenario Pills
        document.querySelectorAll('.scenario-pill').forEach(pill => {
            pill.addEventListener('click', () => {
                document.querySelectorAll('.scenario-pill').forEach(p => p.classList.remove('active'));
                pill.classList.add('active');
                updateProjectionChart(pill.dataset.scenario);
            });
        });

        // Utility Functions
        const formatCurrency = (num) => {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(num);
        };

        const formatPercent = (num, decimals = 1) => {
            return (num * 100).toFixed(decimals) + '%';
        };

        // ============================================
        // CAPITAL RAISE CALCULATIONS
        // ============================================

        function updateCapitalCalcs() {
            const monthlyBurn = parseFloat(document.getElementById('monthly-burn').value) || 0;
            const currentCash = parseFloat(document.getElementById('current-cash').value) || 0;
            const runwayTarget = parseFloat(document.getElementById('runway-target').value) || 18;
            const preMoney = parseFloat(document.getElementById('pre-money').value) || 2000000;

            document.getElementById('runway-target-display').textContent = runwayTarget + ' months';

            const fundingNeeded = (monthlyBurn * runwayTarget) - currentCash;
            document.getElementById('funding-needed').textContent = formatCurrency(Math.max(0, fundingNeeded));

            const raises = [250000, 500000, 1000000];
            const optionPool = 0.10;
            let tableHTML = '';

            raises.forEach(raise => {
                const postMoney = preMoney + raise;
                const investorPct = raise / postMoney;
                const founderPct = 1 - investorPct - optionPool;
                const exitValue = founderPct * 10000000;

                tableHTML += `
                    <tr>
                        <td>${formatCurrency(raise)}</td>
                        <td class="highlight">${formatPercent(investorPct)}</td>
                        <td>${formatPercent(founderPct)}</td>
                        <td>${formatCurrency(exitValue)}</td>
                    </tr>
                `;
            });

            document.getElementById('dilution-table').innerHTML = tableHTML;

            const currentRunway = monthlyBurn > 0 ? currentCash / monthlyBurn : 0;
            document.getElementById('runway-months').textContent = currentRunway.toFixed(1) + ' mo';
            document.getElementById('funding-gap').textContent = formatCurrency(Math.max(0, fundingNeeded));
        }

        // ============================================
        // SAFE VS EQUITY
        // ============================================

        function updateSafeEquityCalcs() {
            const investment = parseFloat(document.getElementById('investment-amount').value) || 0;
            const safeCap = parseFloat(document.getElementById('safe-cap').value) || 0;
            const preMoney = parseFloat(document.getElementById('pre-money').value) || 0;

            const postMoney = preMoney + investment;
            const equityOwnership = investment / postMoney;
            const safeOwnership = investment / safeCap;

            document.getElementById('safe-ownership').textContent = formatPercent(safeOwnership);
            document.getElementById('equity-dilution').textContent = formatPercent(equityOwnership);
            document.getElementById('equity-ownership').textContent = formatPercent(equityOwnership);
        }

        // ============================================
        // REVENUE CALCULATIONS
        // ============================================

        function updateRevenueCalcs() {
            // Society
            let societyMemberships = 0;
            let societyMembers = 0;
            document.querySelectorAll('.society-member').forEach(input => {
                const count = parseFloat(input.value) || 0;
                const priceId = input.dataset.priceId;
                const price = parseFloat(document.getElementById(priceId).value) || 0;
                societyMemberships += count * price;
                societyMembers += count;
            });

            const lifetimeMembers = parseFloat(document.getElementById('society-lifetime').value) || 0;
            const lifetimePrice = parseFloat(document.getElementById('price-lifetime').value) || 0;
            societyMemberships += lifetimeMembers * lifetimePrice;
            societyMembers += lifetimeMembers;

            // Calculate total events revenue (use actual if available, otherwise estimated)
            let societyEvents = 0;
            document.querySelectorAll('#society-events-list .event-item').forEach(item => {
                const actualInput = item.querySelector('.event-actual');
                const estimatedInput = item.querySelector('.event-estimated');
                if (actualInput && estimatedInput) {
                    const actual = parseFloat(actualInput.value) || 0;
                    const estimated = parseFloat(estimatedInput.value) || 0;
                    // Use actual if it's greater than 0, otherwise use estimated
                    societyEvents += actual > 0 ? actual : estimated;
                }
            });

            const societyMerch = parseFloat(document.getElementById('society-merch').value) || 0;
            const societyTotal = societyMemberships + societyEvents + societyMerch;

            document.getElementById('society-total').textContent = formatCurrency(societyTotal);
            document.getElementById('society-mrr').textContent = formatCurrency(societyTotal);
            document.getElementById('society-members').textContent = societyMembers.toLocaleString();

            // Labs
            const consultingRate = parseFloat(document.getElementById('price-consulting').value) || 0;
            const labsConsulting = (parseFloat(document.getElementById('labs-consulting-hours').value) || 0) * consultingRate;

            // Calculate total from all individual projects
            let labsProjects = 0;
            let projectCount = 0;
            document.querySelectorAll('.project-value').forEach(input => {
                const value = parseFloat(input.value) || 0;
                labsProjects += value;
                if (value > 0) projectCount++;
            });

            // Calculate total from all individual grants/partnerships
            let labsGrants = 0;
            let grantCount = 0;
            document.querySelectorAll('.grant-value').forEach(input => {
                const value = parseFloat(input.value) || 0;
                labsGrants += value;
                if (value > 0) grantCount++;
            });

            const labsTotal = labsConsulting + labsProjects + labsGrants;

            document.getElementById('labs-total').textContent = formatCurrency(labsTotal);
            document.getElementById('labs-mrr').textContent = formatCurrency(labsTotal);
            document.getElementById('labs-projects-count').textContent = projectCount;
            document.getElementById('labs-grants-count').textContent = grantCount;

            // Academy
            let academyCourses = 0;
            let totalCourseStudents = 0;
            document.querySelectorAll('#course-list .course-item').forEach(item => {
                const priceInput = item.querySelector('.course-price');
                const salesInput = item.querySelector('.course-sales');
                if (priceInput && salesInput) {
                    const price = parseFloat(priceInput.value) || 0;
                    const sales = parseFloat(salesInput.value) || 0;
                    academyCourses += price * sales;
                    totalCourseStudents += sales;
                }
            });
            const certPrice = parseFloat(document.getElementById('price-cert').value) || 0;
            const academyCerts = (parseFloat(document.getElementById('academy-certs').value) || 0) * certPrice;
            const workshopPrice = parseFloat(document.getElementById('price-workshop').value) || 0;
            const academyWorkshops = (parseFloat(document.getElementById('academy-workshops').value) || 0) * workshopPrice;
            const academyTotal = academyCourses + academyCerts + academyWorkshops;

            document.getElementById('academy-total').textContent = formatCurrency(academyTotal);
            document.getElementById('academy-mrr').textContent = formatCurrency(academyTotal);
            document.getElementById('academy-students').textContent = (
                totalCourseStudents +
                (parseFloat(document.getElementById('academy-certs').value) || 0) +
                (parseFloat(document.getElementById('academy-workshops').value) || 0)
            );

            // Dojos
            const dojoMemberPrice = parseFloat(document.getElementById('price-dojo-membership').value) || 0;
            const dojosMemberships = (parseFloat(document.getElementById('dojos-memberships').value) || 0) * dojoMemberPrice;
            const xrSessionPrice = parseFloat(document.getElementById('price-xr-session').value) || 0;
            const dojosXR = (parseFloat(document.getElementById('dojos-xr-sessions').value) || 0) * xrSessionPrice;
            const trainingPrice = parseFloat(document.getElementById('price-training').value) || 0;
            const dojosTraining = (parseFloat(document.getElementById('dojos-training').value) || 0) * trainingPrice;
            const dojosTotal = dojosMemberships + dojosXR + dojosTraining;

            document.getElementById('dojos-total').textContent = formatCurrency(dojosTotal);
            document.getElementById('dojos-mrr').textContent = formatCurrency(dojosTotal);
            document.getElementById('dojos-sessions').textContent = document.getElementById('dojos-xr-sessions').value;

            // Total MRR
            const totalMRR = societyTotal + labsTotal + academyTotal + dojosTotal;
            document.getElementById('total-mrr').textContent = formatCurrency(totalMRR);

            // Update LTV:CAC
            document.getElementById('ltv-cac-ratio').textContent = '14.5:1';
            document.getElementById('ltv-cac-status').className = 'metric-change positive';
            document.getElementById('ltv-cac-status').textContent = 'Above target';

            return totalMRR;
        }

        // ============================================
        // OPERATIONS CALCULATIONS
        // ============================================

        function updateOperationsCalcs() {
            let fixedTotal = 0;
            document.querySelectorAll('.fixed-cost-value').forEach(input => {
                fixedTotal += parseFloat(input.value) || 0;
            });

            let variableTotal = 0;
            document.querySelectorAll('.variable-cost-value').forEach(input => {
                variableTotal += parseFloat(input.value) || 0;
            });

            const monthlyBurn = fixedTotal + variableTotal;
            const currentCash = parseFloat(document.getElementById('cash-slider').value) || 0;
            const runway = monthlyBurn > 0 ? currentCash / monthlyBurn : 0;
            const need18mo = monthlyBurn * 18;

            document.getElementById('total-fixed').textContent = formatCurrency(fixedTotal);
            document.getElementById('total-variable').textContent = formatCurrency(variableTotal);
            document.getElementById('ops-burn').textContent = formatCurrency(monthlyBurn);
            document.getElementById('ops-annual').textContent = formatCurrency(monthlyBurn * 12);
            document.getElementById('ops-runway').textContent = runway.toFixed(1) + ' mo';
            document.getElementById('ops-need').textContent = formatCurrency(need18mo);
            document.getElementById('cash-display').textContent = formatCurrency(currentCash);

            const progress = Math.min((runway / 18) * 100, 100);
            document.getElementById('runway-progress').style.width = progress + '%';

            document.getElementById('monthly-burn').value = monthlyBurn;
            document.getElementById('current-cash').value = currentCash;

            // Update connected values (but don't call updateCapitalCalcs to avoid infinite loop)
            updateAllConnectedValues();
        }

        // ============================================
        // PROJECTION CHART
        // ============================================

        function updateProjectionChart(scenario) {
            const growthRates = {
                conservative: 0.08,
                moderate: 0.12,
                aggressive: 0.20
            };

            const rateLabels = {
                conservative: '8%',
                moderate: '12%',
                aggressive: '20%'
            };

            const rate = growthRates[scenario];
            const startMRR = updateRevenueCalcs();

            const quarters = ['Q1 Y1', 'Q2 Y1', 'Q3 Y1', 'Q4 Y1', 'Q1 Y2', 'Q2 Y2', 'Q3 Y2', 'Q4 Y2', 'Q1 Y3', 'Q2 Y3', 'Q3 Y3', 'Q4 Y3'];

            let chartHTML = '';
            let maxRevenue = 0;
            const revenues = [];

            // Calculate revenues
            quarters.forEach((q, i) => {
                const monthsElapsed = (i + 1) * 3;
                const quarterlyGrowth = Math.pow(1 + rate, monthsElapsed / 12);
                const revenue = startMRR * 3 * quarterlyGrowth;
                revenues.push(revenue);
                if (revenue > maxRevenue) maxRevenue = revenue;
            });

            // Update summary metrics
            const endMRR = revenues[revenues.length - 1] / 3;
            const totalARR = endMRR * 12;
            document.getElementById('projection-start-mrr').textContent = formatCurrencyShort(startMRR);
            document.getElementById('projection-end-mrr').textContent = formatCurrencyShort(endMRR);
            document.getElementById('projection-total-arr').textContent = formatCurrencyShort(totalARR);
            document.getElementById('projection-growth-rate').textContent = rateLabels[scenario] + ' MoM';

            // Generate Y-axis values
            const yAxisSteps = 5;
            let yAxisHTML = '';
            for (let i = yAxisSteps; i >= 0; i--) {
                const value = (maxRevenue / yAxisSteps) * i;
                yAxisHTML += `<div>${formatCurrencyShort(value)}</div>`;
            }
            document.getElementById('y-axis-values').innerHTML = yAxisHTML;

            // Generate chart bars with value labels
            quarters.forEach((q, i) => {
                const height = (revenues[i] / maxRevenue) * 200;
                chartHTML += `
                    <div class="chart-bar-group">
                        <div class="chart-bar" style="height: ${height}px;" title="${formatCurrencyShort(revenues[i])}">
                            <div style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 0.65rem; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; white-space: nowrap;">${formatCurrencyShort(revenues[i])}</div>
                        </div>
                        <div class="chart-bar-label">${q}</div>
                    </div>
                `;
            });

            document.getElementById('projection-chart').innerHTML = chartHTML;

            // Generate quarterly breakdown table
            let tableHTML = '';
            quarters.forEach((q, i) => {
                const year = Math.ceil((i + 1) / 4);
                tableHTML += `
                    <div style="padding: 1rem; background: var(--bg-card); border-radius: 8px; border: 1px solid var(--border);">
                        <div style="font-size: 0.7rem; color: var(--text-muted); margin-bottom: 0.5rem;">${q}</div>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; color: var(--accent-cyan); margin-bottom: 0.25rem;">${formatCurrencyShort(revenues[i])}</div>
                        <div style="font-size: 0.65rem; color: var(--text-secondary);">Revenue</div>
                    </div>
                `;
            });
            document.getElementById('projection-table-view').innerHTML = tableHTML;
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================

        ['monthly-burn', 'current-cash', 'pre-money'].forEach(id => {
            document.getElementById(id).addEventListener('input', () => {
                updateCapitalCalcs();
                updateSafeEquityCalcs();
                updateAllConnectedValues();
            });
        });

        document.getElementById('runway-target').addEventListener('input', () => {
            updateCapitalCalcs();
            updateAllConnectedValues();
        });

        ['investment-amount', 'safe-cap'].forEach(id => {
            document.getElementById(id).addEventListener('input', () => {
                updateSafeEquityCalcs();
                updateAllConnectedValues();
            });
        });

        function handleRevenueInput() {
            updateRevenueCalcs();
            updateProjectionChart(document.querySelector('.scenario-pill.active').dataset.scenario);
        }

        function attachRevenueListeners() {
            document.querySelectorAll('.society-member, #society-lifetime, #society-merch').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('.event-name, .event-estimated, .event-actual').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('#price-cybernaut, #price-reality-hacker, #price-reality-weaver, #price-lifetime').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('#price-consulting, #labs-consulting-hours').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('.project-name, .project-value, .project-type, .grant-name, .grant-value').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
                input.removeEventListener('change', handleRevenueInput);
                input.addEventListener('change', handleRevenueInput);
            });
            document.querySelectorAll('#price-cert, #academy-certs, #price-workshop, #academy-workshops').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('.course-price, .course-sales').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
            document.querySelectorAll('#price-dojo-membership, #dojos-memberships, #price-xr-session, #dojos-xr-sessions, #price-training, #dojos-training').forEach(input => {
                input.removeEventListener('input', handleRevenueInput);
                input.addEventListener('input', handleRevenueInput);
            });
        }

        // Event management (for Society)
        let eventIdCounter = 2;

        function addEvent() {
            const eventList = document.getElementById('society-events-list');
            const newEvent = document.createElement('div');
            newEvent.className = 'event-item';
            newEvent.dataset.eventId = eventIdCounter++;
            newEvent.style.cssText = 'display: grid; grid-template-columns: 2fr 1fr 1fr 0.5fr; gap: 0.5rem; align-items: center;';
            newEvent.innerHTML = `
                <input type="text" class="input-field event-name" value="New Event" placeholder="Event name">
                <input type="number" class="input-field event-estimated" value="0" placeholder="Estimated $">
                <input type="number" class="input-field event-actual" value="0" placeholder="Actual $">
                <button class="btn-icon remove-event" title="Remove">&#10005;</button>
            `;
            eventList.appendChild(newEvent);
            attachRevenueListeners();
            attachEventRemoveListeners();
            handleRevenueInput();
        }

        function removeEvent(e) {
            const eventItem = e.target.closest('.event-item');
            if (document.querySelectorAll('#society-events-list .event-item').length > 1) {
                eventItem.remove();
                handleRevenueInput();
            }
        }

        function attachEventRemoveListeners() {
            document.querySelectorAll('.remove-event').forEach(btn => {
                btn.removeEventListener('click', removeEvent);
                btn.addEventListener('click', removeEvent);
            });
        }

        document.getElementById('add-event').addEventListener('click', addEvent);
        attachEventRemoveListeners();

        // Fixed Cost management
        let fixedCostIdCounter = 8;

        function addFixedCost() {
            const costList = document.getElementById('fixed-costs-list');
            const newCost = document.createElement('div');
            newCost.className = 'cost-item';
            newCost.dataset.costId = fixedCostIdCounter++;
            newCost.style.cssText = 'display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;';
            newCost.innerHTML = `
                <input type="text" class="input-field fixed-cost-name" value="New Cost" placeholder="Cost name">
                <input type="number" class="input-field fixed-cost-value" value="0" placeholder="$">
                <button class="btn-icon remove-fixed-cost" title="Remove">&#10005;</button>
            `;
            costList.appendChild(newCost);
            attachFixedCostListeners();
            attachFixedCostRemoveListeners();
            updateOperationsCalcs();
        }

        function removeFixedCost(e) {
            const costItem = e.target.closest('.cost-item');
            if (document.querySelectorAll('#fixed-costs-list .cost-item').length > 1) {
                costItem.remove();
                updateOperationsCalcs();
            }
        }

        function attachFixedCostListeners() {
            document.querySelectorAll('.fixed-cost-name, .fixed-cost-value').forEach(input => {
                input.removeEventListener('input', updateOperationsCalcs);
                input.addEventListener('input', updateOperationsCalcs);
            });
        }

        function attachFixedCostRemoveListeners() {
            document.querySelectorAll('.remove-fixed-cost').forEach(btn => {
                btn.removeEventListener('click', removeFixedCost);
                btn.addEventListener('click', removeFixedCost);
            });
        }

        document.getElementById('add-fixed-cost').addEventListener('click', addFixedCost);
        attachFixedCostListeners();
        attachFixedCostRemoveListeners();

        // Variable Cost management
        let variableCostIdCounter = 6;

        function addVariableCost() {
            const costList = document.getElementById('variable-costs-list');
            const newCost = document.createElement('div');
            newCost.className = 'cost-item';
            newCost.dataset.costId = variableCostIdCounter++;
            newCost.style.cssText = 'display: grid; grid-template-columns: 2fr 1fr 0.5fr; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;';
            newCost.innerHTML = `
                <input type="text" class="input-field variable-cost-name" value="New Cost" placeholder="Cost name">
                <input type="number" class="input-field variable-cost-value" value="0" placeholder="$">
                <button class="btn-icon remove-variable-cost" title="Remove">&#10005;</button>
            `;
            costList.appendChild(newCost);
            attachVariableCostListeners();
            attachVariableCostRemoveListeners();
            updateOperationsCalcs();
        }

        function removeVariableCost(e) {
            const costItem = e.target.closest('.cost-item');
            if (document.querySelectorAll('#variable-costs-list .cost-item').length > 1) {
                costItem.remove();
                updateOperationsCalcs();
            }
        }

        function attachVariableCostListeners() {
            document.querySelectorAll('.variable-cost-name, .variable-cost-value').forEach(input => {
                input.removeEventListener('input', updateOperationsCalcs);
                input.addEventListener('input', updateOperationsCalcs);
            });
        }

        function attachVariableCostRemoveListeners() {
            document.querySelectorAll('.remove-variable-cost').forEach(btn => {
                btn.removeEventListener('click', removeVariableCost);
                btn.addEventListener('click', removeVariableCost);
            });
        }

        document.getElementById('add-variable-cost').addEventListener('click', addVariableCost);
        attachVariableCostListeners();
        attachVariableCostRemoveListeners();

        // Course management
        let courseIdCounter = 4;

        function addCourse() {
            const courseList = document.getElementById('course-list');
            const newCourse = document.createElement('div');
            newCourse.className = 'course-item';
            newCourse.dataset.courseId = courseIdCounter++;
            newCourse.innerHTML = `
                <input type="text" class="input-field course-name" value="New Course" placeholder="Course name">
                <input type="number" class="input-field course-price" value="199" placeholder="$">
                <input type="number" class="input-field course-sales" value="0" placeholder="Qty">
                <button class="btn-icon remove-course" title="Remove">&#10005;</button>
            `;
            courseList.appendChild(newCourse);
            attachRevenueListeners();
            attachCourseRemoveListeners();
            handleRevenueInput();
        }

        function removeCourse(e) {
            const courseItem = e.target.closest('.course-item');
            if (document.querySelectorAll('#course-list .course-item').length > 1) {
                courseItem.remove();
                handleRevenueInput();
            }
        }

        function attachCourseRemoveListeners() {
            document.querySelectorAll('.remove-course').forEach(btn => {
                btn.removeEventListener('click', removeCourse);
                btn.addEventListener('click', removeCourse);
            });
        }

        document.getElementById('add-course').addEventListener('click', addCourse);

        // Project management (for Labs)
        let projectIdCounter = 3;

        function addProject() {
            const projectList = document.getElementById('labs-project-list');
            const newProject = document.createElement('div');
            newProject.className = 'course-item';
            newProject.dataset.projectId = projectIdCounter++;
            newProject.style.cssText = 'display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.5fr; gap: 0.5rem; align-items: center;';
            newProject.innerHTML = `
                <input type="text" class="input-field project-name" value="New Project" placeholder="Project name">
                <input type="number" class="input-field project-value" value="0" placeholder="$">
                <select class="input-field project-type" style="padding: 0.65rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                    <option value="monthly">Monthly</option>
                    <option value="project">Per Project</option>
                </select>
                <button class="btn-icon remove-project" title="Remove">&#10005;</button>
            `;
            projectList.appendChild(newProject);
            attachRevenueListeners();
            attachProjectRemoveListeners();
            handleRevenueInput();
        }

        function removeProject(e) {
            const projectItem = e.target.closest('.course-item');
            if (document.querySelectorAll('#labs-project-list .course-item').length > 1) {
                projectItem.remove();
                handleRevenueInput();
            }
        }

        function attachProjectRemoveListeners() {
            document.querySelectorAll('.remove-project').forEach(btn => {
                btn.removeEventListener('click', removeProject);
                btn.addEventListener('click', removeProject);
            });
        }

        document.getElementById('add-project').addEventListener('click', addProject);
        attachProjectRemoveListeners();

        // Grant management (for Labs)
        let grantIdCounter = 3;

        function addGrant() {
            const grantList = document.getElementById('labs-grant-list');
            const newGrant = document.createElement('div');
            newGrant.className = 'course-item';
            newGrant.dataset.grantId = grantIdCounter++;
            newGrant.innerHTML = `
                <input type="text" class="input-field grant-name" value="New Grant/Partnership" placeholder="Grant/partner name">
                <input type="number" class="input-field grant-value" value="0" placeholder="$/mo">
                <button class="btn-icon remove-grant" title="Remove">&#10005;</button>
            `;
            grantList.appendChild(newGrant);
            attachRevenueListeners();
            attachGrantRemoveListeners();
            handleRevenueInput();
        }

        function removeGrant(e) {
            const grantItem = e.target.closest('.course-item');
            if (document.querySelectorAll('#labs-grant-list .course-item').length > 1) {
                grantItem.remove();
                handleRevenueInput();
            }
        }

        function attachGrantRemoveListeners() {
            document.querySelectorAll('.remove-grant').forEach(btn => {
                btn.removeEventListener('click', removeGrant);
                btn.addEventListener('click', removeGrant);
            });
        }

        document.getElementById('add-grant').addEventListener('click', addGrant);
        attachGrantRemoveListeners();

        document.querySelectorAll('.fixed-cost, .variable-cost').forEach(input => {
            input.addEventListener('input', updateOperationsCalcs);
        });

        document.getElementById('cash-slider').addEventListener('input', updateOperationsCalcs);

        // ============================================
        // HELPER FUNCTIONS
        // ============================================

        function parseCurrencyValue(text) {
            if (!text) return 0;
            text = text.trim();
            const multiplier = text.includes('M') ? 1000000 : text.includes('K') ? 1000 : 1;
            const value = parseFloat(text.replace(/[$,KM]/g, '')) || 0;
            return value * multiplier;
        }

        function formatCurrencyShort(value) {
            if (value >= 1000000) {
                return '$' + (value / 1000000).toFixed(1) + 'M';
            } else if (value >= 1000) {
                return '$' + (value / 1000).toFixed(0) + 'K';
            }
            return formatCurrency(value);
        }

        // ============================================
        // LOCALSTORAGE SAVE/LOAD MECHANISM
        // ============================================

        function saveAllData() {
            const data = {
                // Revenue tab inputs
                revenueInputs: {},
                // Capital tab inputs
                capitalInputs: {},
                // Operations tab inputs
                operationsInputs: {},
                // Business Plan 3-Year Revenue Projections (editable cells)
                revenueProjections: {},
                // All contenteditable fields
                editableText: {},
                // Timestamp
                lastSaved: new Date().toISOString()
            };

            // Save all input fields by ID
            document.querySelectorAll('input[type="number"], input[type="text"], input[type="range"]').forEach(input => {
                if (input.id) {
                    data.revenueInputs[input.id] = input.value;
                }
            });

            // Save editable revenue input fields
            document.querySelectorAll('.editable-revenue').forEach(input => {
                const year = input.dataset.year;
                const stream = input.dataset.stream;
                if (year && stream) {
                    data.revenueProjections[`${stream}-year${year}`] = input.value;
                }
            });

            // Save all contenteditable text fields
            document.querySelectorAll('[contenteditable="true"]').forEach(element => {
                if (element.id) {
                    data.editableText[element.id] = element.textContent || element.innerHTML;
                } else {
                    // Create a unique identifier for elements without IDs
                    const identifier = element.className + '-' + Array.from(element.parentNode.children).indexOf(element);
                    data.editableText[identifier] = element.textContent || element.innerHTML;
                }
            });

            // Save courses
            const courses = [];
            document.querySelectorAll('#course-list .course-item').forEach(courseItem => {
                courses.push({
                    name: courseItem.querySelector('.course-name')?.value || '',
                    price: courseItem.querySelector('.course-price')?.value || '',
                    sales: courseItem.querySelector('.course-sales')?.value || ''
                });
            });
            data.courses = courses;

            // Save labs projects
            const projects = [];
            document.querySelectorAll('#labs-project-list .course-item').forEach(projectItem => {
                projects.push({
                    name: projectItem.querySelector('.project-name')?.value || '',
                    value: projectItem.querySelector('.project-value')?.value || '',
                    type: projectItem.querySelector('.project-type')?.value || 'monthly'
                });
            });
            data.projects = projects;

            // Save labs grants/partnerships
            const grants = [];
            document.querySelectorAll('#labs-grant-list .course-item').forEach(grantItem => {
                grants.push({
                    name: grantItem.querySelector('.grant-name')?.value || '',
                    value: grantItem.querySelector('.grant-value')?.value || ''
                });
            });
            data.grants = grants;

            // Save society events
            const events = [];
            document.querySelectorAll('#society-events-list .event-item').forEach(eventItem => {
                events.push({
                    name: eventItem.querySelector('.event-name').value,
                    estimated: eventItem.querySelector('.event-estimated').value,
                    actual: eventItem.querySelector('.event-actual').value
                });
            });
            data.events = events;

            // Save fixed costs
            const fixedCosts = [];
            document.querySelectorAll('#fixed-costs-list .cost-item').forEach(costItem => {
                fixedCosts.push({
                    name: costItem.querySelector('.fixed-cost-name').value,
                    value: costItem.querySelector('.fixed-cost-value').value
                });
            });
            data.fixedCosts = fixedCosts;

            // Save variable costs
            const variableCosts = [];
            document.querySelectorAll('#variable-costs-list .cost-item').forEach(costItem => {
                variableCosts.push({
                    name: costItem.querySelector('.variable-cost-name').value,
                    value: costItem.querySelector('.variable-cost-value').value
                });
            });
            data.variableCosts = variableCosts;

            localStorage.setItem('cyberdelicCFOData', JSON.stringify(data));
            console.log('Data saved at', data.lastSaved);
        }

        function loadAllData() {
            const savedData = localStorage.getItem('cyberdelicCFOData');
            if (!savedData) return false;

            try {
                const data = JSON.parse(savedData);

                // Restore all input fields
                Object.keys(data.revenueInputs || {}).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.value = data.revenueInputs[id];
                    }
                });

                // Restore editable revenue input fields
                Object.keys(data.revenueProjections || {}).forEach(key => {
                    const [stream, yearPart] = key.split('-year');
                    const input = document.querySelector(`.editable-revenue[data-year="${yearPart}"][data-stream="${stream}"]`);
                    if (input) {
                        input.value = data.revenueProjections[key];
                    }
                });

                // Restore contenteditable text fields
                Object.keys(data.editableText || {}).forEach(identifier => {
                    const element = document.getElementById(identifier);
                    if (element) {
                        element.textContent = data.editableText[identifier];
                    }
                });

                // Restore courses
                if (data.courses && data.courses.length > 0) {
                    const courseList = document.getElementById('course-list');
                    // Clear existing courses except the first template
                    const courseItems = courseList.querySelectorAll('.course-item');
                    for (let i = 1; i < courseItems.length; i++) {
                        courseItems[i].remove();
                    }

                    // Add saved courses
                    data.courses.forEach((course, index) => {
                        if (index === 0) {
                            // Update first course
                            const firstCourse = courseList.querySelector('.course-item');
                            if (firstCourse) {
                                firstCourse.querySelector('.course-name').value = course.name;
                                firstCourse.querySelector('.course-price').value = course.price;
                                firstCourse.querySelector('.course-sales').value = course.sales;
                            }
                        } else {
                            // Add new courses
                            addCourse();
                            const lastCourse = courseList.querySelector('.course-item:last-child');
                            if (lastCourse) {
                                lastCourse.querySelector('.course-name').value = course.name;
                                lastCourse.querySelector('.course-price').value = course.price;
                                lastCourse.querySelector('.course-sales').value = course.sales;
                            }
                        }
                    });
                }

                // Restore labs projects
                if (data.projects && data.projects.length > 0) {
                    const projectList = document.getElementById('labs-project-list');
                    // Clear existing projects except the first template
                    const projectItems = projectList.querySelectorAll('.course-item');
                    for (let i = 1; i < projectItems.length; i++) {
                        projectItems[i].remove();
                    }

                    // Add saved projects
                    data.projects.forEach((project, index) => {
                        if (index === 0) {
                            // Update first project
                            const firstProject = projectList.querySelector('.course-item');
                            if (firstProject) {
                                firstProject.querySelector('.project-name').value = project.name;
                                firstProject.querySelector('.project-value').value = project.value;
                                if (firstProject.querySelector('.project-type')) {
                                    firstProject.querySelector('.project-type').value = project.type || 'monthly';
                                }
                            }
                        } else {
                            // Add new projects
                            addProject();
                            const lastProject = projectList.querySelector('.course-item:last-child');
                            if (lastProject) {
                                lastProject.querySelector('.project-name').value = project.name;
                                lastProject.querySelector('.project-value').value = project.value;
                                if (lastProject.querySelector('.project-type')) {
                                    lastProject.querySelector('.project-type').value = project.type || 'monthly';
                                }
                            }
                        }
                    });
                }

                // Restore labs grants/partnerships
                if (data.grants && data.grants.length > 0) {
                    const grantList = document.getElementById('labs-grant-list');
                    // Clear existing grants except the first template
                    const grantItems = grantList.querySelectorAll('.course-item');
                    for (let i = 1; i < grantItems.length; i++) {
                        grantItems[i].remove();
                    }

                    // Add saved grants
                    data.grants.forEach((grant, index) => {
                        if (index === 0) {
                            // Update first grant
                            const firstGrant = grantList.querySelector('.course-item');
                            if (firstGrant) {
                                firstGrant.querySelector('.grant-name').value = grant.name;
                                firstGrant.querySelector('.grant-value').value = grant.value;
                            }
                        } else {
                            // Add new grants
                            addGrant();
                            const lastGrant = grantList.querySelector('.course-item:last-child');
                            if (lastGrant) {
                                lastGrant.querySelector('.grant-name').value = grant.name;
                                lastGrant.querySelector('.grant-value').value = grant.value;
                            }
                        }
                    });
                }

                // Restore society events
                if (data.events && data.events.length > 0) {
                    const eventList = document.getElementById('society-events-list');
                    const eventItems = eventList.querySelectorAll('.event-item');
                    for (let i = 1; i < eventItems.length; i++) {
                        eventItems[i].remove();
                    }

                    data.events.forEach((event, index) => {
                        if (index === 0) {
                            const firstEvent = eventList.querySelector('.event-item');
                            if (firstEvent) {
                                firstEvent.querySelector('.event-name').value = event.name;
                                firstEvent.querySelector('.event-estimated').value = event.estimated;
                                firstEvent.querySelector('.event-actual').value = event.actual;
                            }
                        } else {
                            addEvent();
                            const lastEvent = eventList.querySelector('.event-item:last-child');
                            if (lastEvent) {
                                lastEvent.querySelector('.event-name').value = event.name;
                                lastEvent.querySelector('.event-estimated').value = event.estimated;
                                lastEvent.querySelector('.event-actual').value = event.actual;
                            }
                        }
                    });
                }

                // Restore fixed costs
                if (data.fixedCosts && data.fixedCosts.length > 0) {
                    const fixedCostsList = document.getElementById('fixed-costs-list');
                    fixedCostsList.innerHTML = '';
                    data.fixedCosts.forEach(cost => {
                        addFixedCost();
                        const lastCost = fixedCostsList.querySelector('.cost-item:last-child');
                        if (lastCost) {
                            lastCost.querySelector('.fixed-cost-name').value = cost.name;
                            lastCost.querySelector('.fixed-cost-value').value = cost.value;
                        }
                    });
                }

                // Restore variable costs
                if (data.variableCosts && data.variableCosts.length > 0) {
                    const variableCostsList = document.getElementById('variable-costs-list');
                    variableCostsList.innerHTML = '';
                    data.variableCosts.forEach(cost => {
                        addVariableCost();
                        const lastCost = variableCostsList.querySelector('.cost-item:last-child');
                        if (lastCost) {
                            lastCost.querySelector('.variable-cost-name').value = cost.name;
                            lastCost.querySelector('.variable-cost-value').value = cost.value;
                        }
                    });
                }

                // Recalculate all values after loading
                attachRevenueListeners();
                attachEventRemoveListeners();
                attachFixedCostListeners();
                attachFixedCostRemoveListeners();
                attachVariableCostListeners();
                attachVariableCostRemoveListeners();
                handleRevenueInput();
                updateCapitalCalcs();
                updateSafeEquityCalcs();
                updateOperationsCalcs();
                updateRevenueProjectionTotals();

                console.log('Data loaded from', data.lastSaved);
                return true;
            } catch (error) {
                console.error('Error loading saved data:', error);
                return false;
            }
        }

        // Auto-save every 5 seconds when there are changes
        let autoSaveTimer;
        function scheduleAutoSave() {
            clearTimeout(autoSaveTimer);
            autoSaveTimer = setTimeout(() => {
                saveAllData();
            }, 5000);
        }

        // Add save listener to all inputs
        function attachAutoSaveListeners() {
            document.querySelectorAll('input, [contenteditable="true"]').forEach(element => {
                element.addEventListener('input', scheduleAutoSave);
                element.addEventListener('blur', saveAllData); // Save immediately on blur
            });
        }

        // Manual save button functionality (we'll add a button for this)
        function createSaveButton() {
            const saveBtn = document.createElement('button');
            saveBtn.id = 'save-progress-btn';
            saveBtn.textContent = 'ðŸ’¾ Save Progress';
            saveBtn.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: linear-gradient(135deg, #00d4ff 0%, #a855f7 100%);
                color: #0a0a0f;
                border: none;
                padding: 12px 24px;
                border-radius: 12px;
                font-weight: 600;
                cursor: pointer;
                box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
                z-index: 10000;
                font-family: inherit;
                font-size: 0.9rem;
                transition: all 0.2s ease;
            `;
            saveBtn.addEventListener('click', () => {
                saveAllData();
                saveBtn.textContent = 'âœ“ Saved!';
                saveBtn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                setTimeout(() => {
                    saveBtn.textContent = 'ðŸ’¾ Save Progress';
                    saveBtn.style.background = 'linear-gradient(135deg, #00d4ff 0%, #a855f7 100%)';
                }, 2000);
            });
            saveBtn.addEventListener('mouseenter', () => {
                saveBtn.style.transform = 'scale(1.05)';
            });
            saveBtn.addEventListener('mouseleave', () => {
                saveBtn.style.transform = 'scale(1)';
            });
            document.body.appendChild(saveBtn);
            console.log('âœ… Save button created and added to page');
        }

        // ============================================
        // REVENUE PROJECTIONS TABLE SYNC
        // ============================================

        function updateRevenueProjectionTotals() {
            try {
                // Calculate totals for each year from the editable revenue input fields
                const years = [1, 2, 3];
                years.forEach(year => {
                    let total = 0;
                    document.querySelectorAll(`.editable-revenue[data-year="${year}"]`).forEach(input => {
                        const value = parseCurrencyValue(input.value) || 0;
                        total += value;
                    });
                    const totalElement = document.getElementById(`revenue-year${year}-total`);
                    if (totalElement) {
                        totalElement.textContent = formatCurrencyShort(total);
                    }
                });

                // Update all connected displays
                updateAllConnectedValues();
            } catch (error) {
                console.error('Error in updateRevenueProjectionTotals:', error);
            }
        }

        function attachRevenueProjectionListeners() {
            document.querySelectorAll('.editable-revenue').forEach(input => {
                input.addEventListener('input', function() {
                    updateRevenueProjectionTotals();
                });

                input.addEventListener('blur', function() {
                    // Clean up the value on blur
                    const value = parseCurrencyValue(this.value) || 0;
                    this.value = formatCurrencyShort(value);
                    updateRevenueProjectionTotals();
                });

                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        this.blur();
                    }
                });
            });
        }

        // ============================================
        // MASTER UPDATE FUNCTION - SYNC ALL VALUES
        // ============================================

        function updateAllConnectedValues() {
            try {
                // Get values from 3-Year Revenue Projections table (Business Plan tab)
                const year1Revenue = parseCurrencyValue(document.getElementById('revenue-year1-total')?.textContent) || 175000;
                const year2Revenue = parseCurrencyValue(document.getElementById('revenue-year2-total')?.textContent) || 600000;
                const year3Revenue = parseCurrencyValue(document.getElementById('revenue-year3-total')?.textContent) || 1500000;

            // Get MRR from Revenue tab (if available, use MRR * 12 for Year 1)
            const totalMRRElement = document.getElementById('total-mrr');
            if (totalMRRElement) {
                const totalMRR = parseCurrencyValue(totalMRRElement.textContent) || 0;
                // Optionally sync Year 1 with Revenue tab MRR * 12
                // Uncomment the line below if you want Revenue tab to override Business Plan Year 1
                // if (totalMRR > 0) year1Revenue = totalMRR * 12;
            }

            // Get values from Capital tab
            const investmentAmount = parseFloat(document.getElementById('investment-amount')?.value) || 500000;
            const safeCap = parseFloat(document.getElementById('safe-cap')?.value) || 2000000;

            // Calculate runway
            const monthlyBurn = parseFloat(document.getElementById('monthly-burn')?.value) || 27778;
            const currentCash = parseFloat(document.getElementById('current-cash')?.value) || 0;
            const runwayTarget = parseFloat(document.getElementById('runway-target')?.value) || 18;
            const currentRunway = monthlyBurn > 0 ? currentCash / monthlyBurn : 0;
            const runway = currentRunway > 0 ? currentRunway : runwayTarget;

            // Update One-Pager Financial Projections
            if (document.getElementById('onepager-year1-revenue')) {
                document.getElementById('onepager-year1-revenue').textContent = formatCurrencyShort(year1Revenue);
            }
            if (document.getElementById('onepager-year2-revenue')) {
                document.getElementById('onepager-year2-revenue').textContent = formatCurrencyShort(year2Revenue);
            }
            if (document.getElementById('onepager-year3-revenue')) {
                document.getElementById('onepager-year3-revenue').textContent = formatCurrencyShort(year3Revenue);
            }

            // Update Elevator Pitch stats
            if (document.getElementById('pitch-seed-round')) {
                document.getElementById('pitch-seed-round').textContent = formatCurrencyShort(investmentAmount);
            }
            if (document.getElementById('pitch-runway')) {
                document.getElementById('pitch-runway').textContent = Math.round(runway) + ' mo';
            }

            // Update Elevator Pitch "The Ask" section
            if (document.getElementById('pitch-ask-amount')) {
                document.getElementById('pitch-ask-amount').textContent = formatCurrencyShort(investmentAmount);
            }
            if (document.getElementById('pitch-safe-cap')) {
                document.getElementById('pitch-safe-cap').textContent = formatCurrencyShort(safeCap);
            }
            if (document.getElementById('pitch-ask-runway')) {
                document.getElementById('pitch-ask-runway').textContent = Math.round(runway) + ' months';
            }
            if (document.getElementById('pitch-year3-revenue')) {
                document.getElementById('pitch-year3-revenue').textContent = formatCurrencyShort(year3Revenue);
            }
            } catch (error) {
                console.error('Error in updateAllConnectedValues:', error);
            }
        }

        // ============================================
        // ATTACH LISTENERS TO CAPITAL TAB INPUTS
        // ============================================

        function attachCapitalTabListeners() {
            const capitalInputs = ['investment-amount', 'safe-cap', 'monthly-burn', 'current-cash', 'runway-target'];
            capitalInputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', updateAllConnectedValues);
                }
            });
        }

        // ============================================
        // INITIALIZE
        // ============================================

        // Load saved data first
        const dataLoaded = loadAllData();

        attachRevenueListeners();
        attachCourseRemoveListeners();

        // Only run initial calculations if no data was loaded
        if (!dataLoaded) {
            updateCapitalCalcs();
            updateSafeEquityCalcs();
            updateRevenueCalcs();
            updateOperationsCalcs();
            updateProjectionChart('moderate');
        } else {
            // If data was loaded, recalculate everything with loaded values
            setTimeout(() => {
                updateCapitalCalcs();
                updateSafeEquityCalcs();
                updateRevenueCalcs();
                updateOperationsCalcs();
                updateProjectionChart('moderate');
            }, 50);
        }

        // Attach these listeners and update after initial calculations
        attachRevenueProjectionListeners();
        attachCapitalTabListeners();
        attachAutoSaveListeners();

        // Normalize all revenue cell formatting on load
        function normalizeRevenueCellFormatting() {
            document.querySelectorAll('.editable-revenue').forEach(cell => {
                const value = parseCurrencyValue(cell.textContent) || 0;
                cell.textContent = formatCurrencyShort(value);
            });
        }

        // ============================================
        // SAVE/LOAD BUTTON FUNCTIONALITY
        // ============================================

        const headerSaveBtn = document.getElementById('header-save-btn');
        const headerLoadBtn = document.getElementById('header-load-btn');
        const loadDropdown = document.getElementById('load-dropdown');
        const savedStatesList = document.getElementById('saved-states-list');

        // Save button - saves with timestamp
        if (headerSaveBtn) {
            headerSaveBtn.addEventListener('click', () => {
                console.log('ðŸ’¾ Save button clicked');
                saveTimestampedState();
            });
            console.log('âœ… Save button listener attached');
        } else {
            console.error('âŒ Save button not found!');
        }

        // Load button - toggles dropdown
        if (headerLoadBtn && loadDropdown) {
            headerLoadBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                console.log('ðŸ“‚ Load button clicked');
                const isVisible = loadDropdown.style.display === 'block';
                loadDropdown.style.display = isVisible ? 'none' : 'block';
                console.log('Dropdown display set to:', loadDropdown.style.display);
                if (!isVisible) {
                    refreshSavedStatesList();
                }
            });
            console.log('âœ… Load button listener attached');
        } else {
            console.error('âŒ Load button or dropdown not found!', { headerLoadBtn, loadDropdown });
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (headerLoadBtn && loadDropdown && !headerLoadBtn.contains(e.target) && !loadDropdown.contains(e.target)) {
                loadDropdown.style.display = 'none';
            }
        });

        function saveTimestampedState() {
            console.log('ðŸ“ Starting save process...');
            const timestamp = new Date().toISOString();
            const data = {
                revenueInputs: {},
                capitalInputs: {},
                operationsInputs: {},
                revenueProjections: {},
                editableText: {},
                courses: [],
                projects: [],
                grants: [],
                events: [],
                timestamp: timestamp
            };
            console.log('Created data structure with timestamp:', timestamp);

            // Save all input fields
            document.querySelectorAll('input[type="number"], input[type="text"], input[type="range"]').forEach(input => {
                if (input.id) {
                    data.revenueInputs[input.id] = input.value;
                }
            });

            // Save editable revenue projections
            document.querySelectorAll('.editable-revenue').forEach(input => {
                const year = input.dataset.year;
                const stream = input.dataset.stream;
                if (year && stream) {
                    data.revenueProjections[`${stream}-year${year}`] = input.value;
                }
            });

            // Save contenteditable fields
            document.querySelectorAll('[contenteditable="true"]').forEach(element => {
                if (element.id) {
                    data.editableText[element.id] = element.textContent || element.innerHTML;
                }
            });

            // Save courses
            document.querySelectorAll('#course-list .course-item').forEach(item => {
                data.courses.push({
                    name: item.querySelector('.course-name').value,
                    price: item.querySelector('.course-price').value,
                    sales: item.querySelector('.course-sales').value
                });
            });

            // Save projects
            document.querySelectorAll('#labs-project-list .course-item').forEach(item => {
                const typeSelect = item.querySelector('.project-type');
                data.projects.push({
                    name: item.querySelector('.project-name').value,
                    value: item.querySelector('.project-value').value,
                    type: typeSelect ? typeSelect.value : 'monthly'
                });
            });

            // Save grants
            document.querySelectorAll('#labs-grant-list .course-item').forEach(item => {
                data.grants.push({
                    name: item.querySelector('.grant-name').value,
                    value: item.querySelector('.grant-value').value
                });
            });

            // Save events
            document.querySelectorAll('#society-events-list .event-item').forEach(item => {
                data.events.push({
                    name: item.querySelector('.event-name').value,
                    estimated: item.querySelector('.event-estimated').value,
                    actual: item.querySelector('.event-actual').value
                });
            });

            // Get existing saved states
            const savedStates = JSON.parse(localStorage.getItem('cyberdelicCFOSavedStates') || '[]');

            // Add new state
            savedStates.push(data);

            // Keep only last 20 saves
            if (savedStates.length > 20) {
                savedStates.shift();
            }

            // Save to localStorage
            localStorage.setItem('cyberdelicCFOSavedStates', JSON.stringify(savedStates));
            console.log('âœ… Saved to localStorage. Total saves:', savedStates.length);
            console.log('Saved data preview:', {
                inputsCount: Object.keys(data.revenueInputs).length,
                coursesCount: data.courses.length,
                projectsCount: data.projects.length,
                grantsCount: data.grants.length
            });

            // Also save as current state (for auto-save compatibility)
            saveAllData();

            // Show success message on Save button
            const originalText = headerSaveBtn.innerHTML;
            const originalBg = headerSaveBtn.style.background;
            headerSaveBtn.innerHTML = 'âœ“ Saved!';
            headerSaveBtn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
            setTimeout(() => {
                headerSaveBtn.innerHTML = originalText;
                headerSaveBtn.style.background = originalBg;
            }, 2000);

            refreshSavedStatesList();
        }

        function loadTimestampedState(timestamp) {
            console.log('ðŸ“‚ Loading state with timestamp:', timestamp);
            const savedStates = JSON.parse(localStorage.getItem('cyberdelicCFOSavedStates') || '[]');
            console.log('Found', savedStates.length, 'saved states');
            const state = savedStates.find(s => s.timestamp === timestamp);

            if (!state) {
                console.error('âŒ State not found for timestamp:', timestamp);
                alert('State not found!');
                return;
            }
            console.log('âœ… State found, restoring data...');

            // Restore all input fields
            Object.keys(state.revenueInputs || {}).forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.value = state.revenueInputs[id];
                }
            });

            // Restore editable revenue projections
            Object.keys(state.revenueProjections || {}).forEach(key => {
                const [stream, yearPart] = key.split('-year');
                const input = document.querySelector(`.editable-revenue[data-year="${yearPart}"][data-stream="${stream}"]`);
                if (input) {
                    input.value = state.revenueProjections[key];
                }
            });

            // Restore contenteditable fields
            Object.keys(state.editableText || {}).forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = state.editableText[id];
                }
            });

            // Restore courses
            if (state.courses && state.courses.length > 0) {
                const courseList = document.getElementById('course-list');
                courseList.innerHTML = '';
                state.courses.forEach(course => {
                    addCourse();
                    const lastCourse = courseList.querySelector('.course-item:last-child');
                    if (lastCourse) {
                        lastCourse.querySelector('.course-name').value = course.name;
                        lastCourse.querySelector('.course-price').value = course.price;
                        lastCourse.querySelector('.course-sales').value = course.sales;
                    }
                });
            }

            // Restore projects
            if (state.projects && state.projects.length > 0) {
                const projectList = document.getElementById('labs-project-list');
                projectList.innerHTML = '';
                state.projects.forEach(project => {
                    addProject();
                    const lastProject = projectList.querySelector('.course-item:last-child');
                    if (lastProject) {
                        lastProject.querySelector('.project-name').value = project.name;
                        lastProject.querySelector('.project-value').value = project.value;
                        if (lastProject.querySelector('.project-type')) {
                            lastProject.querySelector('.project-type').value = project.type || 'monthly';
                        }
                    }
                });
            }

            // Restore grants
            if (state.grants && state.grants.length > 0) {
                const grantList = document.getElementById('labs-grant-list');
                grantList.innerHTML = '';
                state.grants.forEach(grant => {
                    addGrant();
                    const lastGrant = grantList.querySelector('.course-item:last-child');
                    if (lastGrant) {
                        lastGrant.querySelector('.grant-name').value = grant.name;
                        lastGrant.querySelector('.grant-value').value = grant.value;
                    }
                });
            }

            // Restore events
            if (state.events && state.events.length > 0) {
                const eventList = document.getElementById('society-events-list');
                eventList.innerHTML = '';
                state.events.forEach(event => {
                    addEvent();
                    const lastEvent = eventList.querySelector('.event-item:last-child');
                    if (lastEvent) {
                        lastEvent.querySelector('.event-name').value = event.name;
                        lastEvent.querySelector('.event-estimated').value = event.estimated;
                        lastEvent.querySelector('.event-actual').value = event.actual;
                    }
                });
            }

            // Recalculate everything
            console.log('ðŸ”„ Recalculating all values...');
            handleRevenueInput();
            updateCapitalCalcs();
            updateSafeEquityCalcs();
            updateOperationsCalcs();
            updateRevenueProjectionTotals();

            loadDropdown.style.display = 'none';
            console.log('âœ… State loaded and calculations complete!');
            alert('State loaded successfully!');
        }

        function deleteTimestampedState(timestamp, event) {
            event.stopPropagation();

            if (!confirm('Are you sure you want to delete this saved state?')) {
                return;
            }

            const savedStates = JSON.parse(localStorage.getItem('cyberdelicCFOSavedStates') || '[]');
            const filteredStates = savedStates.filter(s => s.timestamp !== timestamp);
            localStorage.setItem('cyberdelicCFOSavedStates', JSON.stringify(filteredStates));
            refreshSavedStatesList();
        }

        function formatTimestamp(isoString) {
            const date = new Date(isoString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);

            let timeAgo;
            if (diffMins < 1) {
                timeAgo = 'Just now';
            } else if (diffMins < 60) {
                timeAgo = `${diffMins}m ago`;
            } else if (diffHours < 24) {
                timeAgo = `${diffHours}h ago`;
            } else if (diffDays === 1) {
                timeAgo = 'Yesterday';
            } else if (diffDays < 7) {
                timeAgo = `${diffDays}d ago`;
            } else {
                timeAgo = date.toLocaleDateString();
            }

            const timeStr = date.toLocaleString('en-US', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            return { timeStr, timeAgo };
        }

        function refreshSavedStatesList() {
            const savedStates = JSON.parse(localStorage.getItem('cyberdelicCFOSavedStates') || '[]');

            if (savedStates.length === 0) {
                savedStatesList.innerHTML = '<div style="padding: 1rem; text-align: center; color: var(--text-secondary); font-size: 0.85rem;">No saved states yet</div>';
                return;
            }

            // Sort by timestamp (newest first)
            savedStates.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

            savedStatesList.innerHTML = savedStates.map(state => {
                const { timeStr, timeAgo } = formatTimestamp(state.timestamp);
                return `
                    <button class="saved-state-item" onclick="loadTimestampedState('${state.timestamp}')">
                        <div style="flex: 1;">
                            <div style="font-weight: 500; margin-bottom: 0.25rem;">${timeStr}</div>
                            <div class="saved-state-time">${timeAgo}</div>
                        </div>
                        <button class="delete-state-btn" onclick="deleteTimestampedState('${state.timestamp}', event)">Delete</button>
                    </button>
                `;
            }).join('');
        }

        // Make functions global so they can be called from onclick attributes
        window.loadTimestampedState = loadTimestampedState;
        window.deleteTimestampedState = deleteTimestampedState;

        console.log('âœ… Save/Load buttons connected');

        // ============================================
        // MOBILE HAMBURGER MENU
        // ============================================

        const hamburgerBtn = document.getElementById('hamburger-btn');
        const hamburgerIcon = document.getElementById('hamburger-icon');
        const navTabs = document.getElementById('nav-tabs');

        console.log('Hamburger elements:', { hamburgerBtn, hamburgerIcon, navTabs });

        if (hamburgerBtn && navTabs) {
            hamburgerBtn.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                console.log('ðŸ” Hamburger clicked! Current state:', navTabs.classList.contains('mobile-open'));
                navTabs.classList.toggle('mobile-open');
                hamburgerIcon.classList.toggle('active');
                console.log('New state:', navTabs.classList.contains('mobile-open'));
            });

            // Also listen on the icon itself
            if (hamburgerIcon) {
                hamburgerIcon.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('ðŸ” Icon clicked!');
                    navTabs.classList.toggle('mobile-open');
                    hamburgerIcon.classList.toggle('active');
                });
            }

            // Close menu when a tab is clicked
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    if (window.innerWidth <= 768) {
                        navTabs.classList.remove('mobile-open');
                        hamburgerIcon.classList.remove('active');
                    }
                });
            });

            console.log('âœ… Mobile hamburger menu connected');
        } else {
            console.error('âŒ Hamburger menu elements not found!', { hamburgerBtn, navTabs });
        }

        // ============================================
        // THEME TOGGLE
        // ============================================

        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const html = document.documentElement;

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'light') {
            html.setAttribute('data-theme', 'light');
            themeIcon.textContent = 'â˜€ï¸';
        }

        if (themeToggle) {
            themeToggle.addEventListener('click', () => {
                const currentTheme = html.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';

                html.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);

                themeIcon.textContent = newTheme === 'light' ? 'â˜€ï¸' : 'ðŸŒ™';

                console.log('ðŸŽ¨ Theme switched to:', newTheme);
            });
            console.log('âœ… Theme toggle connected');
        }

        // ============================================
        // ELEVATOR PITCH LINKS
        // ============================================

        const pitchDeckLinkInput = document.getElementById('pitch-deck-link');
        const meetingLinkInput = document.getElementById('meeting-link');
        const pitchDeckButton = document.getElementById('pitch-deck-button');
        const meetingButton = document.getElementById('meeting-button');

        // Update button hrefs when inputs change
        if (pitchDeckLinkInput && pitchDeckButton) {
            pitchDeckLinkInput.addEventListener('input', () => {
                const url = pitchDeckLinkInput.value;
                pitchDeckButton.href = url || '#';
                if (url) {
                    pitchDeckButton.setAttribute('target', '_blank');
                    pitchDeckButton.setAttribute('rel', 'noopener noreferrer');
                } else {
                    pitchDeckButton.removeAttribute('target');
                    pitchDeckButton.removeAttribute('rel');
                }
            });
        }

        if (meetingLinkInput && meetingButton) {
            meetingLinkInput.addEventListener('input', () => {
                const url = meetingLinkInput.value;
                meetingButton.href = url || '#';
                if (url) {
                    meetingButton.setAttribute('target', '_blank');
                    meetingButton.setAttribute('rel', 'noopener noreferrer');
                } else {
                    meetingButton.removeAttribute('target');
                    meetingButton.removeAttribute('rel');
                }
            });
        }

        // Normalize all revenue cell formatting on load
        function normalizeRevenueCellFormatting() {
            document.querySelectorAll('.editable-revenue').forEach(input => {
                const value = parseCurrencyValue(input.value) || 0;
                input.value = formatCurrencyShort(value);
            });
        }

        // Small delay to ensure DOM is fully ready, then normalize and update
        setTimeout(() => {
            // Normalize formatting and update values
            normalizeRevenueCellFormatting();
            updateRevenueProjectionTotals();
            updateAllConnectedValues();
        }, 200);
    </script>
</body>
</html>
